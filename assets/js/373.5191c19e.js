(window.webpackJsonp=window.webpackJsonp||[]).push([[373],{697:function(t,s,r){"use strict";r.r(s);var a=r(4),_=Object(a.a)({},(function(){var t=this,s=t._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"æ•°æ®åº“è¡¨çš„ç©ºé—´å›æ”¶"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#æ•°æ®åº“è¡¨çš„ç©ºé—´å›æ”¶"}},[t._v("#")]),t._v(" æ•°æ®åº“è¡¨çš„ç©ºé—´å›æ”¶")]),t._v(" "),s("p",[s("strong",[t._v("innodb_file_per_table")]),t._v("ï¼šæ§åˆ¶è¡¨æ•°æ®çš„å­˜åœ¨å½¢å¼ã€‚è®¾ç½®ä¸ºONè¡¨ç¤ºæ•°æ®å­˜æ”¾åœ¨.ibdä¸ºåç¼€çš„æ–‡ä»¶ä¸­ã€‚"),s("strong",[t._v("è®¾ç½®ä¸ºOFFè¡¨ç¤ºæ•°æ®å­˜æ”¾åœ¨å…±äº«è¡¨ç©ºé—´ï¼Œè¿™ç§æƒ…å†µä¸‹å³ä½¿è¡¨åˆ é™¤äº†ç©ºé—´ä¸ä¼šå›æ”¶")]),t._v("ã€‚å› æ­¤ä¸€èˆ¬æƒ…å†µä¸‹"),s("strong",[t._v("æ¨èè®¾ç½®ä¸ºON")]),t._v("ã€‚")]),t._v(" "),s("h2",{attrs:{id:"_1-æ•°æ®åˆ é™¤æ’å…¥æµç¨‹"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-æ•°æ®åˆ é™¤æ’å…¥æµç¨‹"}},[t._v("#")]),t._v(" 1.æ•°æ®åˆ é™¤æ’å…¥æµç¨‹")]),t._v(" "),s("p",[t._v("æ— è®ºæ˜¯åˆ é™¤è¿˜æ˜¯æ’å…¥ï¼Œ"),s("strong",[t._v("æ•°æ®æ›´æ–°åè¡¨ç©ºé—´å¤„äºå¯å¤ç”¨ä½†æ˜¯è¿˜æœªè¢«ä½¿ç”¨çš„ç©ºé—´")]),t._v("ï¼Œéƒ½å±äºâ€œç©ºæ´â€ã€‚è¿™äº›ç©ºæ´å°šæœªè¢«InnoDBé‡Šæ”¾å›æ”¶ï¼Œä»è€Œå¯¼è‡´æ•°æ®é¡µç©ºé—´åˆ©ç”¨ç‡æ¯”è¾ƒä½ã€‚")]),t._v(" "),s("ul",[s("li",[s("strong",[t._v("åˆ é™¤")])])]),t._v(" "),s("p",[s("strong",[t._v("å¤ç”¨")]),t._v("ï¼šæ— è®ºæ˜¯åˆ é™¤innoDBç´¢å¼•æ ‘ä¸Šçš„ä¸€æ¡è®°å½•ï¼Œè¿˜æ˜¯åˆ é™¤ä¸€ä¸ªæ•°æ®é¡µä¸Šçš„æ‰€æœ‰è®°å½•ã€‚"),s("font",{attrs:{color:"red"}},[s("strong",[t._v("InnoDBå¹¶ä¸ä¼šç›´æ¥å°†æ•´è¡Œè®°å½•æˆ–è€…æ•´ä¸ªæ•°æ®é¡µéƒ½åˆ é™¤ï¼Œè€Œæ˜¯åœ¨è¿™æ¡è®°å½•çš„ä½ç½®æˆ–è€…è¿™ä¸ªæ•°æ®é¡µä¸Šæ ‡è®°ä¸ºâ€œå¯å¤ç”¨")])]),t._v("â€ï¼Œè¿™æ ·æ–°çš„æ•°æ®æ’å…¥åç›´æ¥ä½¿ç”¨åŸæœ¬çš„ç©ºé—´å³å¯ã€‚")],1),t._v(" "),s("p",[t._v("å…¶ä¸­è¡Œå¤ç”¨å’Œé¡µå¤ç”¨çš„åŒºåˆ«åœ¨äºï¼Œ"),s("strong",[t._v("æ–°æ’å…¥è¡Œå¤ç”¨ä½ç½®çš„è®°å½•IDï¼Œä¼šå—åˆ°åŸå…ˆä½ç½®è®°å½•çš„çº¦æŸ")]),t._v("ã€‚è€Œé¡µå¤ç”¨åˆ™ä¸å—ä»»ä½•æ•°æ®ç´¢å¼•æˆ–è€…æ˜¯ä¸»é”®çš„é™åˆ¶ã€‚")]),t._v(" "),s("ul",[s("li",[s("strong",[t._v("æ’å…¥")])])]),t._v(" "),s("p",[t._v("ä¸¾ä¸ªä¾‹å­ï¼ŒåŸå…ˆæ•°æ®é¡µä¸­"),s("strong",[t._v("æŸæ¡è®°å½•")]),t._v("ï¼Œç”±äºæ’å…¥æ–°çš„è®°å½•å¯¼è‡´æ•°æ®é¡µåˆ†è£‚ï¼Œä¸æ–°è®°å½•åˆå¹¶å­˜æ”¾åˆ°æ–°çš„æ•°æ®é¡µã€‚æ­¤æ—¶è¯¥æ¡æ•°æ®åŸå…ˆæ‰€åœ¨çš„ä½ç½®å°±æ˜¯æ•°æ®ç©ºæ´ã€‚")]),t._v(" "),s("h2",{attrs:{id:"_2-é‡å»ºè¡¨"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-é‡å»ºè¡¨"}},[t._v("#")]),t._v(" 2.é‡å»ºè¡¨")]),t._v(" "),s("p",[t._v("é‡å»ºè¡¨ï¼šæ–°å»ºä¸€å¼ è¡¨ï¼Œå°†æ—§çš„å­˜åœ¨å¤šä¸ªç©ºæ´çš„è¡¨æ•°æ®å…¨éƒ¨ä¸€è¡Œä¸€è¡Œæ‹·è´åˆ°æ–°è¡¨å½“ä¸­ã€‚æ˜¾ç„¶å¾—åˆ°çš„æ–°è¡¨ä¸­"),s("strong",[t._v("æ•°æ®é¡µåˆ©ç”¨ç‡æ›´é«˜ï¼Œå¹¶ä¸”ä¸»é”®ç´¢å¼•æ›´åŠ ç´§å‡‘")]),t._v("ã€‚ä¸‹é¢ä»‹ç»ä¸‰ç§é‡å»ºè¡¨çš„ç­–ç•¥ã€‚")]),t._v(" "),s("p",[t._v("DDLï¼šç”±äºæ‰§è¡ŒDDLè¯­å¥åå¯èƒ½ä¼šä¿®æ”¹è¡¨çš„ç»“æ„ï¼Œå› æ­¤"),s("strong",[t._v("ä¼šè§¦å‘â€œé‡å»ºè¡¨â€æ•´ä¸ªè¿‡ç¨‹")]),t._v("ã€‚")]),t._v(" "),s("h3",{attrs:{id:"_2-1copy"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-1copy"}},[t._v("#")]),t._v(" 2.1COPY")]),t._v(" "),s("div",{staticClass:"language-sql line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-sql"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("alter")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("table")]),t._v(" t "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("engine")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("innodb")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("ALGORITHM")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("copy\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br")])]),s("p",[t._v("åœ¨"),s("strong",[t._v("serviceå±‚")]),t._v("åˆ›å»ºä¸€ä¸ªä¸´æ—¶è¡¨æ¥å¯¹æ•°æ®è¿›è¡Œæ‹·è´ï¼Œæœ€åç”¨ä¸´æ—¶è¡¨æ›¿æ¢åŸè¡¨ã€‚")]),t._v(" "),s("p",[t._v("åœ¨æ•´ä¸ªè¿‡ç¨‹ä¸­"),s("font",{attrs:{color:"red"}},[s("strong",[t._v("è¡¨Aä»…å…è®¸è¯»æ“ä½œï¼Œé˜»å¡æ‰€æœ‰DMLæ›´æ–°å†™æ“ä½œ")])]),t._v("ã€‚ç”±äºéœ€è¦æ¶ˆè€—é¢å¤–çš„æ•°æ®ç©ºé—´ï¼Œå› æ­¤ä»…é€‚ç”¨äºæ•°æ®é‡æ¯”è¾ƒå°çš„åœºæ™¯ã€‚")],1),t._v(" "),s("h3",{attrs:{id:"_2-2inplace"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-2inplace"}},[t._v("#")]),t._v(" 2.2Inplace")]),t._v(" "),s("div",{staticClass:"language-sql line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-sql"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("alter")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("table")]),t._v(" t "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("engine")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("innodb")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("ALGORITHM")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("inplace\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br")])]),s("p",[t._v("åœ¨"),s("strong",[t._v("InnoDBå†…éƒ¨")]),t._v("åˆ›å»º"),s("strong",[t._v("ä¸´æ—¶æ–‡ä»¶tmp_file")]),t._v("è¿›è¡Œä¿®æ”¹å¤åˆ¶(è¿™é‡Œå¯ä»¥è¿‘ä¼¼çœ‹ä½œæ˜¯"),s("font",{attrs:{color:"red"}},[s("strong",[t._v("åŸåœ°ä¿®æ”¹")])]),t._v("è¡¨çš„å­—æ®µ)ï¼Œ"),s("strong",[t._v("æ•´ä¸ªDDLè¿‡ç¨‹éƒ½æ˜¯åœ¨InnoDBå†…éƒ¨è¿›è¡Œ")]),t._v("ã€‚å¯¹äºserverå±‚è€Œè¨€å¹¶æ²¡æœ‰å°†æ•°æ®æŒªåŠ¨åˆ°ä¸´æ—¶è¡¨ï¼Œç›¸å½“äº"),s("strong",[t._v("åŸåœ°æ“ä½œ")]),t._v("ã€‚")],1),t._v(" "),s("p",[t._v("è¿™é‡Œè¦æ³¨æ„ï¼Œè¯´æ˜¯â€œåŸåœ°ä¿®æ”¹â€ï¼Œå®é™…ä¸Šä¸´æ—¶æ–‡ä»¶ä¹Ÿéœ€è¦å ç”¨ä¸€å®šçš„ç£ç›˜ç©ºé—´ã€‚é€‚ç”¨äºå¤§è¡¨ä¿®æ”¹çš„åœºæ™¯ã€‚")]),t._v(" "),s("h3",{attrs:{id:"_2-3online-ddl"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-3online-ddl"}},[t._v("#")]),t._v(" 2.3Online DDL")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://jsd.cdn.zzko.cn/gh/blage-coding/picx-images-hosting@master/20230630/image.6c8xpd18vfw0.webp",alt:""}})]),t._v(" "),s("p",[t._v("é‡å»ºè¡¨æ—¶å¦‚æœæœ‰æ–°çš„æ•°æ®è¦å†™å…¥ï¼Œä¼šå¯¼è‡´æ•°æ®ä¸¢å¤±ï¼Œå› æ­¤å¼•å…¥Online DDLå¯¹æ“ä½œæµç¨‹è¿›è¡Œä¼˜åŒ–ï¼Œæ•´ä¸ªè¿‡ç¨‹å¦‚ä¸‹ï¼š")]),t._v(" "),s("ul",[s("li",[s("p",[t._v("æ‰§è¡ŒDDLè¯­å¥å‰ï¼Œè·å–MDLå†™é”ã€‚")])]),t._v(" "),s("li",[s("p",[t._v("ğŸ”¥"),s("strong",[t._v("æ‹·è´æ•°æ®ä¹‹å‰ï¼ŒMDLå†™é”é€€åŒ–ä¸ºMDLè¯»é”ï¼Œä»è€Œä¿è¯åœ¨æ‰§è¡ŒDDLå’Œæ‹·è´æ—¶ï¼Œä¸ä¼šé˜»å¡å…¶å®ƒçº¿ç¨‹çš„DMLå¢åˆ æ”¹æ“ä½œ")]),t._v("ã€‚è¿™å°±æ˜¯Onlineåç§°çš„ç”±æ¥ã€‚")])]),t._v(" "),s("li",[s("p",[t._v("åˆ›å»ºä¸€ä¸ªä¸´æ—¶æ–‡ä»¶ï¼Œ"),s("strong",[t._v("æ ¹æ®Aè¡¨ä¸­ä¸»é”®æ•°æ®é¡µçš„æœ‰æ•ˆè®°å½•ç”ŸæˆB+æ ‘ï¼Œè®°å½•åˆ°ä¸´æ—¶æ–‡ä»¶ä¸­")]),t._v("ã€‚æ­¤æ—¶è¡¨æ˜¯æœ€ç´§å‡‘çš„ã€‚")])]),t._v(" "),s("li",[s("p",[t._v("æ­¤æ—¶å¦‚æœè¦å†™å…¥æ•°æ®ï¼Œå†™å…¥åˆ°æ—§çš„Aè¡¨åï¼Œ"),s("font",{attrs:{color:"red"}},[s("strong",[t._v("ç»Ÿä¸€å°†æ‰€æœ‰æ“ä½œè®°å½•åœ¨ä¸€ä¸ªrow logæ–‡ä»¶å½“ä¸­")])]),t._v("ã€‚")],1)]),t._v(" "),s("li",[s("p",[t._v("ä¸´æ—¶æ–‡ä»¶ç”Ÿæˆå®Œåï¼ŒæŒ‰é¡ºåºè¿›è¡Œä»¥ä¸‹ä¸¤ä¸ªæ­¥éª¤ï¼š")]),t._v(" "),s("ul",[s("li",[s("p",[t._v("â‘ "),s("strong",[t._v("å°†MDLè¯»é”å‡çº§åˆ°MDLå†™é”")]),t._v("ï¼Œä¸ºæ¥ä¸‹æ¥é‡æ”¾æ›´æ–°æ“ä½œåšå‡†å¤‡ï¼Œæ­¤æ—¶ä¸€å®šè¦æ§åˆ¶å¤šå¹¶å‘DMLã€‚")])]),t._v(" "),s("li",[s("p",[t._v("â‘¡"),s("strong",[t._v("å°†row logæ‰€æœ‰å†™æ“ä½œåº”ç”¨åˆ°ä¸´æ—¶æ–‡ä»¶ä¸­")]),t._v("ã€‚æ­¤æ—¶ä¸´æ—¶æ–‡ä»¶è¡¨æ•°æ®æ—¶æœ€æ–°çš„ï¼Œä½†æ˜¯"),s("strong",[t._v("å¹¶ä¸ä¸€å®šæ˜¯æœ€ç´§å‡‘çš„ï¼Œå› ä¸ºå¾€è¡¨ä¸­æ’å…¥æ–°çš„æ•°æ®åå¯èƒ½äº§ç”Ÿæ–°çš„ç©ºæ´")]),t._v("ã€‚")])])])]),t._v(" "),s("li",[s("p",[t._v("å°†ä¸´æ—¶æ–‡ä»¶ä»£æ›¿è¡¨Açš„æ•°æ®æ–‡ä»¶ã€‚")])])]),t._v(" "),s("p",[t._v("åŒºåˆ«ä¸è”ç³»ï¼šæ˜¾ç„¶online DDLç”¨åˆ°äº†ä¸´æ—¶æ–‡ä»¶ï¼Œ"),s("strong",[t._v("å› æ­¤onlineä¸€å®šæ˜¯inplaceçš„")]),t._v("ã€‚"),s("strong",[t._v("åä¹‹inplaceä¸ä¸€å®šæ˜¯onlineå¯å¤šå¹¶å‘DMLçš„ï¼Œæ¯”å¦‚å…¨æ–‡ç´¢å¼•")]),t._v("ã€‚")]),t._v(" "),s("h2",{attrs:{id:"_3-æ€»ç»“"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-æ€»ç»“"}},[t._v("#")]),t._v(" 3.æ€»ç»“")]),t._v(" "),s("p",[t._v("è¦æƒ³è¾¾åˆ°çœŸæ­£çš„åˆ é™¤è¡¨å¹¶ä¸”é‡Šæ”¾ç©ºé—´ï¼Œéœ€è¦delete+alterï¼Œæˆ–è€…truncate(drop+create)")])])}),[],!1,null,null,null);s.default=_.exports}}]);