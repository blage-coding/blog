(window.webpackJsonp=window.webpackJsonp||[]).push([[342],{660:function(t,s,a){"use strict";a.r(s);var n=a(4),e=Object(n.a)({},(function(){var t=this,s=t._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"jmmè¯­ä¹‰ä¸é‡æ’"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#jmmè¯­ä¹‰ä¸é‡æ’"}},[t._v("#")]),t._v(" JMMè¯­ä¹‰ä¸é‡æ’")]),t._v(" "),s("h2",{attrs:{id:"_1-å†…å­˜æ¨¡å‹åŸºç¡€"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-å†…å­˜æ¨¡å‹åŸºç¡€"}},[t._v("#")]),t._v(" 1.å†…å­˜æ¨¡å‹åŸºç¡€")]),t._v(" "),s("p",[t._v("é¡ºåºä¸€è‡´æ€§æ¨¡å‹(å†…å­˜å±éšœé™åˆ¶æœ€å¤š)+é‡æ’åºå¹¶è¡Œä¼˜åŒ–=JMM")]),t._v(" "),s("ul",[s("li",[t._v("Javaå¹¶å‘é‡‡ç”¨"),s("strong",[t._v("å…±äº«å†…å­˜æ¨¡å‹")]),t._v("ï¼Œçº¿ç¨‹ä¹‹é—´çš„é€šä¿¡æ˜¯æ ¹æ®"),s("strong",[t._v("å†™-è¯»å†…å­˜ä¸­çš„å…¬å…±çŠ¶æ€")]),t._v("è¿›è¡Œéšå¼é€šä¿¡ã€‚")]),t._v(" "),s("li",[t._v("Javaæºç¨‹åºåœ¨ç¼–è¯‘æ‰§è¡Œçš„è¿‡ç¨‹ï¼Œå¯èƒ½ä¼šç»å†å‡ ç§é‡æ’åºã€‚JMMé€šè¿‡æ’å…¥"),s("strong",[t._v("å†…å­˜å±éšœæŒ‡ä»¤")]),t._v("(ç¦æ­¢å‰åæŒ‡ä»¤é‡æ’)ï¼Œä¿è¯ä¸€è‡´çš„å†…å­˜å¯è§æ€§ã€‚")])]),t._v(" "),s("p",[t._v("ğŸ”¥æ— è®ºæ˜¯å“ªç§å†…å­˜æ¨¡å‹ï¼Œæ·»åŠ çš„å†…å­˜å±éšœå’Œçº¦æŸè¶Šå°‘ï¼Œé‚£ä¹ˆæŒ‡ä»¤çš„å¹¶è¡Œåº¦è¶Šé«˜ï¼Œ"),s("strong",[t._v("æ€§èƒ½è¶Šå¥½")]),t._v("ï¼›ä½†æ˜¯ç›¸å¯¹çš„æŒ‡ä»¤ä»£ç æ‰§è¡Œçš„é¡ºåº"),s("strong",[t._v("ä¸å¯æ§")]),t._v("ï¼Œæ˜“ç¼–ç¨‹æ€§å˜å·®ã€‚")]),t._v(" "),s("h2",{attrs:{id:"_2-é‡æ’åº"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-é‡æ’åº"}},[t._v("#")]),t._v(" 2.é‡æ’åº")]),t._v(" "),s("p",[t._v("ä»£ç åœ¨æ‰§è¡Œæ—¶ï¼Œ"),s("font",{staticStyle:{background:"rgb(255, 240, 102)"}},[s("strong",[t._v("ç¼–è¯‘å™¨")])]),t._v("å’Œ"),s("font",{staticStyle:{background:"rgb(255, 240, 102)"}},[s("strong",[t._v("å¤„ç†å™¨")])]),t._v("å¯èƒ½éƒ½ä¼šå¯¹å…¶è¿›è¡Œé‡æ’åºã€‚")],1),t._v(" "),s("p",[t._v("JMMä¼šåˆ¶å®šç›¸åº”çš„è§„åˆ™ï¼Œé™åˆ¶ä¸åŒæƒ…å†µä¸‹çš„é‡æ’ã€‚")]),t._v(" "),s("p",[s("font",{attrs:{color:"red"}},[s("strong",[t._v("ç»“è®ºï¼šå¤šçº¿ç¨‹ä¸‹ï¼Œå¯¹æ•°æ®ä¾èµ–å’Œæ§åˆ¶ä¾èµ–çš„æ“ä½œè¿›è¡Œé‡æ’åºä¼šæ”¹å˜æ‰§è¡Œç»“æœ")])]),t._v("ã€‚")],1),t._v(" "),s("h3",{attrs:{id:"as-if-serialè¯­ä¹‰"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#as-if-serialè¯­ä¹‰"}},[t._v("#")]),t._v(" as-if-serialè¯­ä¹‰")]),t._v(" "),s("p",[t._v("ä¿è¯å•çº¿ç¨‹æ‰§è¡Œç»“æœä¸ä¼šæ”¹å˜ã€‚æ¢å¥è¯è¯´ï¼Œç¼–è¯‘å™¨å’Œå¤„ç†å™¨é‡æ’æ—¶ï¼Œ"),s("strong",[t._v("ä¸èƒ½æ”¹å˜å­˜åœ¨æ•°æ®ä¾èµ–å…³ç³»çš„æ“ä½œ")]),t._v("ã€‚(å•çº¿ç¨‹ä¸‹é‡æ’æ§åˆ¶ä¾èµ–æ“ä½œä¸å—å½±å“)")]),t._v(" "),s("h2",{attrs:{id:"_3-volatileå†…å­˜è¯­ä¹‰"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-volatileå†…å­˜è¯­ä¹‰"}},[t._v("#")]),t._v(" 3.volatileå†…å­˜è¯­ä¹‰")]),t._v(" "),s("p",[t._v("volatileå…·æœ‰ä»¥ä¸‹ç‰¹æ€§å’Œè¯­ä¹‰ï¼š")]),t._v(" "),s("ul",[s("li",[s("strong",[t._v("å¯è§æ€§")]),t._v("ï¼šå…¶å®ƒçº¿ç¨‹æ€»èƒ½è¯»åˆ°volatileå˜é‡æœ€æ–°çš„å€¼")]),t._v(" "),s("li",[s("strong",[t._v("åŸå­æ€§")]),t._v("ï¼šå¯¹å•ä¸ªvolatileå˜é‡çš„æ“ä½œå…·æœ‰åŸå­æ€§ã€‚æ¯æ¬¡è¯»/å†™æ“ä½œç­‰æ•ˆäºä½¿ç”¨ä¸€ä¸ªsynchronizedé”åŒæ­¥ã€‚")]),t._v(" "),s("li",[t._v("volatileå†™ï¼šåœ¨çº¿ç¨‹å†…å­˜ç©ºé—´å¯¹å½“å‰volatileå˜é‡ä¿®æ”¹åï¼Œ"),s("strong",[t._v("åˆ·æ–°åˆ°ä¸»å†…å­˜å…±äº«åŒºåŸŸ")]),t._v("ã€‚")]),t._v(" "),s("li",[t._v("volatileè¯»ï¼šçº¿ç¨‹å†…å­˜ç©ºé—´çš„volatileå˜é‡"),s("strong",[t._v("ç½®ä¸ºæ— æ•ˆ")]),t._v("ï¼Œä»ä¸»å†…å­˜è¯»å–æœ€æ–°å…±äº«å˜é‡ã€‚")])]),t._v(" "),s("p",[s("font",{attrs:{color:"red"}},[s("strong",[t._v("ç»“è®ºï¼šä¸ºäº†å®ç°volatileå†…å­˜è¯­ä¹‰ï¼Œé€šè¿‡æ’å…¥ä¸åŒå†…å­˜å±éšœå®ç°ä»£ç çš„åŒæ­¥")])]),t._v("ã€‚")],1),t._v(" "),s("h2",{attrs:{id:"_4-é”çš„å†…å­˜è¯­ä¹‰"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_4-é”çš„å†…å­˜è¯­ä¹‰"}},[t._v("#")]),t._v(" 4.é”çš„å†…å­˜è¯­ä¹‰")]),t._v(" "),s("p",[t._v("ReentrantLockåˆ†ä¸º"),s("strong",[t._v("å…¬å¹³é”")]),t._v("å’Œ"),s("strong",[t._v("éå…¬å¹³é”")]),t._v("ï¼Œå®ƒä»¬çš„é”è·å–-é‡Šæ”¾çš„åŒºåˆ«å¦‚ä¸‹,åˆ†åˆ«ä»£è¡¨ä¸¤ç§é”çš„å®ç°ï¼š")]),t._v(" "),s("ul",[s("li",[t._v("å…¬å¹³é”é”è·å–æ—¶ï¼Œä¼š"),s("strong",[t._v("è¯»volatileå˜é‡")]),t._v("ï¼›é‡Šæ”¾é”æ—¶ä¼š"),s("strong",[t._v("å†™volatileå˜é‡")]),t._v("ã€‚â€”â€”åˆ©ç”¨volatileçš„å†…å­˜è¯­ä¹‰ã€‚")]),t._v(" "),s("li",[t._v("éå…¬å¹³é”åœ¨è·å–é”æ—¶ï¼Œä¼šä½¿ç”¨"),s("strong",[t._v("CASæ–¹æ³•")]),t._v("æ›´æ–°stateå€¼ã€‚")])]),t._v(" "),s("h2",{attrs:{id:"_5-finalå†…å­˜è¯­ä¹‰"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_5-finalå†…å­˜è¯­ä¹‰"}},[t._v("#")]),t._v(" 5.finalå†…å­˜è¯­ä¹‰")]),t._v(" "),s("p",[t._v("finalåŸŸé‡æ’åºä¸å†…å­˜å±éšœé™åˆ¶ï¼š")]),t._v(" "),s("ul",[s("li",[s("strong",[t._v("å†™æ“ä½œ")]),t._v("ï¼šfinalå˜é‡çš„å†™åªèƒ½åœ¨"),s("strong",[t._v("æ„é€ å‡½æ•°")]),t._v("å†…è¿›è¡Œï¼Œä¸èƒ½é‡æ’åˆ°æ„é€ å‡½æ•°ä¹‹å¤–ã€‚")]),t._v(" "),s("li",[s("strong",[t._v("è¯»æ“ä½œ")]),t._v("ï¼šâ‘ finalå˜é‡çš„å¯¹è±¡å¼•ç”¨çš„è¯»æ“ä½œâ‘¡finalå˜é‡çš„è¯»æ“ä½œã€‚ä¸¤è€…æ‰§è¡Œé¡ºåºä¸èƒ½æ”¹å˜")])]),t._v(" "),s("h2",{attrs:{id:"_6-happens-beforeå…³ç³»"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_6-happens-beforeå…³ç³»"}},[t._v("#")]),t._v(" 6.happens-beforeå…³ç³»")]),t._v(" "),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"custom-block-title"},[t._v("happens-before")]),t._v(" "),s("p",[t._v("æè¿°ä»£ç ç¼–å†™çš„å…ˆåå…³ç³»ï¼Œå¼ºè°ƒå‰é¢çš„æ“ä½œç»“æœä¸€å®šå¯¹åé¢æ“ä½œç»“æœå¯è§ã€‚")]),t._v(" "),s("p",[t._v("ä»£ç ä¹‹é—´åªè¦ä¸å­˜åœ¨æ•°æ®ä¾èµ–å…³ç³»ï¼Œé‚£ä¹ˆä»£ç å®é™…æ‰§è¡Œé¡ºåºå¹¶ä¸ä¸€å®šè·Ÿhappens-beforeå…³ç³»ä¿æŒä¸€è‡´ã€‚")])]),t._v(" "),s("p",[t._v("å¸¸è§çš„happens-beforeè§„åˆ™ï¼š")]),t._v(" "),s("ul",[s("li",[t._v("ç¨‹åºé¡ºåºè§„åˆ™")]),t._v(" "),s("li",[t._v("volatileè§„åˆ™ï¼švolatileå˜é‡å†™ â€”> happens-before â€”> volatileå˜é‡è¯»ã€‚ä¿è¯æ‰€æœ‰çº¿ç¨‹èƒ½å¤Ÿè¯»åˆ°æœ€æ–°çš„å…±äº«å˜é‡ã€‚")]),t._v(" "),s("li",[t._v("ç›‘è§†å™¨é”è§„åˆ™ï¼šå¯¹ä¸€ä¸ªé”çš„è§£é”â€”>happens-beforeâ€”>å¯¹ä¸€ä¸ªé”çš„åŠ é”ã€‚è§£é”åé”çš„çŠ¶æ€è¦å¯¹å…¨å±€å¯è§ï¼Œæ‰èƒ½å¤ŸåŠ é”ã€‚")]),t._v(" "),s("li",[t._v("ä¼ é€’æ€§")]),t._v(" "),s("li",[t._v("startè§„åˆ™ï¼šAçº¿ç¨‹æ‰§è¡ŒThreadB.startå¯åŠ¨çº¿ç¨‹ï¼Œé‚£ä¹ˆåœ¨æ‰§è¡ŒThreadB.start()ä¹‹å‰å¯¹å…±äº«å˜é‡æ‰€åšçš„ä¿®æ”¹ï¼Œæ¥ä¸‹æ¥åœ¨Bçº¿ç¨‹å¼€å§‹æ‰§è¡Œåéƒ½æ˜¯å¯è§çš„ã€‚")]),t._v(" "),s("li",[t._v("joinè§„åˆ™ï¼šAçº¿ç¨‹æ‰§è¡ŒThreadB.joinç»ˆæ­¢Bçº¿ç¨‹ï¼Œé‚£ä¹ˆBçº¿ç¨‹ç»ˆæ­¢å‰ä¿®æ”¹çš„å…±äº«å˜é‡ï¼Œåœ¨Aæ‰§è¡ŒThreadB.joinéƒ½èƒ½å¤Ÿè¯»å–åˆ°ã€‚")])]),t._v(" "),s("h2",{attrs:{id:"_7-å»¶è¿Ÿåˆå§‹åŒ–æ–¹æ¡ˆ"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_7-å»¶è¿Ÿåˆå§‹åŒ–æ–¹æ¡ˆ"}},[t._v("#")]),t._v(" 7.å»¶è¿Ÿåˆå§‹åŒ–æ–¹æ¡ˆ")]),t._v(" "),s("p",[t._v("å»¶è¿Ÿåˆå§‹åŒ–ï¼šJavaç¨‹åºä¸­ï¼Œæœ‰æ—¶å€™å¯¹è±¡åˆå§‹åŒ–çš„æ¯”è¾ƒå¤§ï¼Œ"),s("strong",[t._v("éœ€è¦åœ¨ä½¿ç”¨è¯¥å¯¹è±¡çš„æ—¶å€™å†è¿›è¡Œåˆå§‹åŒ–")]),t._v("ï¼Œä¹Ÿå°±æ˜¯æ‡’åŠ è½½ï¼Œå› æ­¤ç¨‹åºå‘˜éœ€è¦å»¶è¿Ÿåˆå§‹åŒ–ã€‚")]),t._v(" "),s("div",{staticClass:"language-java line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Instance")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getInstance")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("instance"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\t\tinstance"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Instance")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n     "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" instance"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br")])]),s("p",[t._v("ä½†ä¸Šè¿°ä»£ç åœ¨å¤šçº¿ç¨‹çš„ç¯å¢ƒä¸‹å­˜åœ¨é—®é¢˜ã€‚")]),t._v(" "),s("h3",{attrs:{id:"double-checked-lockingå­˜åœ¨çš„é—®é¢˜"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#double-checked-lockingå­˜åœ¨çš„é—®é¢˜"}},[t._v("#")]),t._v(" Double-Checked Lockingå­˜åœ¨çš„é—®é¢˜")]),t._v(" "),s("p",[t._v("ä¸Šè¿°ä»£ç åœ¨å¤šçº¿ç¨‹ä¸‹å­˜åœ¨é—®é¢˜ï¼Œå¦‚æœåœ¨æ–¹æ³•åŠ é”synchronizedï¼Œè™½ç„¶é—®é¢˜å¯ä»¥è§£å†³ï¼Œä½†æ˜¯åŠ é”å¼€é”€è¾ƒå¤§ã€‚")]),t._v(" "),s("p",[t._v("æˆ‘ä»¬å¸Œæœ›å¦‚æœå½“å‰å¯¹è±¡å·²ç»åˆå§‹åŒ–ï¼Œé‚£ä¹ˆç›´æ¥è¿”å›å¯¹è±¡ï¼Œä¸éœ€è¦é‡æ–°è·å–é”èµ„æºï¼Œä»è€Œå‡å°é”ç²’åº¦å’Œå¼€é”€ï¼Œå› æ­¤å°±æœ‰äº†ä¸‹é¢çš„ä»£ç ï¼š")]),t._v(" "),s("div",{staticClass:"language-java line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("DoubleCheckedLocking")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" \t\t\t\t\t\t"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 1")]),t._v("\n     "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Instance")]),t._v(" instance"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" \t\t\t\t\t\t"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 2")]),t._v("\n     "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Instance")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getInstance")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" \t\t\t\t"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 3")]),t._v("\n         "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("instance "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" \t\t\t\t\t\t\t"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 4:ç¬¬ä¸€æ¬¡æ£€æŸ¥")]),t._v("\n             "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("synchronized")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("DoubleCheckedLocking")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" \t"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 5:åŠ é”")]),t._v("\n                 "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("instance "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" \t\t\t\t\t\t"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 6:ç¬¬äºŒæ¬¡æ£€æŸ¥")]),t._v("\n                 instance "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Instance")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" \t\t\t\t"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 7:é—®é¢˜çš„æ ¹æºå‡ºåœ¨è¿™é‡Œ")]),t._v("\n             "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" \t\t\t\t\t\t\t\t\t\t\t\t"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 8")]),t._v("\n         "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" \t\t\t\t\t\t\t\t\t\t\t\t\t"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 9")]),t._v("\n         "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" instance"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" \t\t\t\t\t\t\t\t\t"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 10")]),t._v("\n     "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" \t\t\t\t\t\t\t\t\t\t\t\t\t\t"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 11")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br")])]),s("p",[t._v("ç„¶è€Œä¸Šè¿°ä»£ç å­˜åœ¨çš„é—®é¢˜åœ¨äºï¼Œç¬¬ä¸ƒè¡Œä»£ç å¹¶ä¸æ˜¯ä¸€ä¸ªåŸå­æ“ä½œï¼Œå®ƒåˆ†ä¸ºä¸¤ä¸ªæ­¥éª¤"),s("font",{staticStyle:{background:"rgb(255, 240, 102)"}},[s("strong",[t._v("â‘ åˆ†é…å†…å­˜åœ°å€ç©ºé—´ï¼Œå¹¶å®Œæˆåˆå§‹åŒ–â‘¡instanceå¼•ç”¨æŒ‡å‘å†…å­˜ç©ºé—´")])]),t._v("ã€‚åœ¨å¤šçº¿ç¨‹ä¸‹è‹¥å‘ç”Ÿé‡æ’ï¼Œåˆ™çº¿ç¨‹Båœ¨æ‰§è¡Œç¬¬4è¡Œè¿›è¡Œåˆ¤æ–­æ—¶ï¼Œ"),s("strong",[t._v("ä¼šå‡ºç°instanceä¸ä¸ºnullï¼Œä½†æ˜¯è¿˜æ²¡å®Œæˆåˆå§‹åŒ–çš„æƒ…å†µ")]),t._v("ã€‚")],1),t._v(" "),s("p",[t._v("è§£å†³æ–¹æ¡ˆåˆ†ä¸ºä¸¤ä¸ªï¼š")]),t._v(" "),s("ol",[s("li",[t._v("âœ¨ä¿è¯instance=new Instance()åˆå§‹åŒ–è¿‡ç¨‹ä¸­ï¼Œ"),s("strong",[t._v("ä¸å‡ºç°é‡æ’")]),t._v("ã€‚")])]),t._v(" "),s("ul",[s("li",[t._v("ç›´æ¥å°†instanceå˜é‡è®¾ç½®ä¸º"),s("strong",[t._v("volatileä¿®é¥°")]),t._v("ã€‚å•ä¸ªvolatileæ“ä½œå…·æœ‰åŸå­æ€§ã€‚")])]),t._v(" "),s("ol",{attrs:{start:"2"}},[s("li",[s("p",[t._v("âœ¨instance=new Instance()åˆå§‹åŒ–çš„è¿‡ç¨‹"),s("strong",[t._v("å¯¹å¤–ä¸å¯è§")]),t._v("ã€‚")]),t._v(" "),s("ul",[s("li",[t._v("åŸºäºç±»åˆå§‹åŒ–çš„æ–¹æ¡ˆï¼šåœ¨æ‰§è¡Œç±»åˆå§‹åŒ–æœŸé—´ï¼ŒJVMä¼šå»è·å–ä¸€ä¸ªé”ï¼Œå®ƒå¯ä»¥åŒæ­¥å¤šä¸ªçº¿ç¨‹åŒæ­¥è¿‡ç¨‹ï¼Œä¸»è¦æ˜¯ç±»åˆå§‹åŒ–é”çš„äº”ä¸ªé˜¶æ®µ...")])]),t._v(" "),s("div",{staticClass:"language-java line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("InstanceFactory")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n     "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("InstanceHolder")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n         "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Instance")]),t._v(" instance "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Instance")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n     "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n     "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Instance")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getInstance")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n         "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("InstanceHolder")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("instance "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("ã€€ã€€"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//è¿™é‡Œå°†å¯¼è‡´InstanceHolderç±»è¢«åˆå§‹åŒ–")]),t._v("\n     "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br")])])])])])}),[],!1,null,null,null);s.default=e.exports}}]);