(window.webpackJsonp=window.webpackJsonp||[]).push([[388],{707:function(s,t,a){"use strict";a.r(t);var n=a(4),r=Object(n.a)({},(function(){var s=this,t=s._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h1",{attrs:{id:"åˆ†åŒºè¡¨"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#åˆ†åŒºè¡¨"}},[s._v("#")]),s._v(" åˆ†åŒºè¡¨")]),s._v(" "),t("div",{staticClass:"custom-block danger"},[t("p",{staticClass:"custom-block-title"},[s._v("é—®é¢˜")]),s._v(" "),t("p",[s._v("ä¸ºä»€ä¹ˆå…¬å¸è§„èŒƒä¸è®©ä½¿ç”¨åˆ†åŒºè¡¨ï¼Ÿ")])]),s._v(" "),t("h2",{attrs:{id:"åˆ†åŒºè¡¨æ˜¯ä»€ä¹ˆ"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#åˆ†åŒºè¡¨æ˜¯ä»€ä¹ˆ"}},[s._v("#")]),s._v(" åˆ†åŒºè¡¨æ˜¯ä»€ä¹ˆï¼Ÿ")]),s._v(" "),t("div",{staticClass:"language-sql line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("CREATE")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("TABLE")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token identifier"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("t"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")])]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token identifier"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("ftime"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")])]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("datetime")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("NOT")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("NULL")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token identifier"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("c"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")])]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("int")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("11")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("DEFAULT")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("NULL")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("KEY")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token identifier"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("ftime"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")])]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ENGINE")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("InnoDB")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("DEFAULT")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("CHARSET")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("latin1\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("PARTITION")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("BY")]),s._v(" RANGE "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("YEAR")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("ftime"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("PARTITION")]),s._v(" p_2017 "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("VALUES")]),s._v(" LESS THAN "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2017")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ENGINE")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("InnoDB")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("PARTITION")]),s._v(" p_2018 "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("VALUES")]),s._v(" LESS THAN "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2018")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ENGINE")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("InnoDB")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("PARTITION")]),s._v(" p_2019 "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("VALUES")]),s._v(" LESS THAN "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2019")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ENGINE")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("InnoDB")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("PARTITION")]),s._v(" p_others "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("VALUES")]),s._v(" LESS THAN MAXVALUE "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ENGINE")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("InnoDB")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("insert")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("into")]),s._v(" t "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("values")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'2017-4-1'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'2018-4-1'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br")])]),t("p",[t("img",{attrs:{src:"https://jsd.cdn.zzko.cn/gh/blage-coding/picx-images-hosting@master/20230712/image.4u7vmabhvzq0.png",alt:""}})]),s._v(" "),t("ul",[t("li",[s._v("åˆ›å»ºè¡¨tï¼Œå¹¶æ ¹æ®å­—æ®µftimeçš„å¹´ä»½æ˜ å°„æ¥åˆ’åˆ†æˆå››ä¸ªåˆ†åŒº")]),s._v(" "),t("li",[s._v("æ¯ä¸ªå­—æ®µéƒ½è®¾ç½®å¯¹åº”çš„åˆ†åŒºè§„åˆ™ï¼Œæ¯”å¦‚å¹´ä»½å°äº2017çš„è¡Œè®°å½•åˆ™æ”¾å…¥åˆ†åŒºp_2017")])]),s._v(" "),t("p",[s._v("å› æ­¤åˆ†è¡¨åï¼š")]),s._v(" "),t("ul",[t("li",[t("strong",[s._v("å¯¹äºå¼•æ“å±‚æ¥è¯´ï¼Œç›¸å½“äºæœ‰å››ä¸ªibdè¡¨")]),s._v("ã€‚")]),s._v(" "),t("li",[t("strong",[s._v("å¯¹äºserverå±‚æ¥è¯´ï¼Œè¿˜æ˜¯ä¸€ä¸ªè¡¨")]),s._v("ã€‚")])]),s._v(" "),t("h2",{attrs:{id:"åˆ†åŒºè¡¨çš„å¼•æ“å±‚è¡Œä¸º"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#åˆ†åŒºè¡¨çš„å¼•æ“å±‚è¡Œä¸º"}},[s._v("#")]),s._v(" åˆ†åŒºè¡¨çš„å¼•æ“å±‚è¡Œä¸º")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://jsd.cdn.zzko.cn/gh/blage-coding/picx-images-hosting@master/20230712/image.6nuf90mbjgc0.webp",alt:""}})]),s._v(" "),t("p",[s._v("å¯¹äºåˆ†åŒºè¡¨æ¥è¯´ï¼ŒInnoDBåœ¨ç¬¬ä¸€æ¡è¯­å¥ä¸ŠåŠ é”æ—¶ï¼Œ"),t("strong",[s._v("åªä¼šåœ¨p_2018è¿™ä¸€ä¸ªåˆ†åŒºè¡¨ä¸ŠåŠ é”")]),s._v("(2017-4-1,supremum)ï¼Œå…¶å®ƒåˆ†åŒºè¡¨ä¸Šçš„æ•°æ®ä¸ä¼šå—åˆ°å½±å“ã€‚")]),s._v(" "),t("p",[s._v("å¦‚æœè¡¨tæ”¹æˆMyISAMå¼•æ“ï¼Œç»“æœä¾æ—§ç±»ä¼¼ã€‚"),t("font",{attrs:{color:"red"}},[t("strong",[s._v("MyISAMä»…ä»…æ”¯æŒè¡¨é”ï¼Œå¹¶ä¸”æ˜¯åœ¨å¼•æ“å±‚å®ç°")])]),s._v("ï¼Œå› æ­¤sessionAæ‰§è¡Œåp_2018æ•´ä¸ªè¡¨éƒ½ä¼šè¢«é”ä½ã€‚è€Œ"),t("strong",[s._v("è½åœ¨å…¶å®ƒåˆ†åŒºçš„æŸ¥è¯¢å’Œæ“ä½œä¸ä¼šå—åˆ°å½±å“")]),s._v("ã€‚")],1),s._v(" "),t("h2",{attrs:{id:"åˆ†åŒºè¡¨çš„serverå±‚è¡Œä¸º"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#åˆ†åŒºè¡¨çš„serverå±‚è¡Œä¸º"}},[s._v("#")]),s._v(" åˆ†åŒºè¡¨çš„serverå±‚è¡Œä¸º")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://jsd.cdn.zzko.cn/gh/blage-coding/picx-images-hosting@master/20230712/image.4sptkr505yg0.webp",alt:""}})]),s._v(" "),t("p",[t("font",{attrs:{color:"red"}},[t("strong",[s._v("å¯¹äºDDLè¯­å¥æ¥è¯´ï¼Œåˆ†åŒºè¡¨åœ¨serverå±‚çœ‹æ¥åªæ˜¯ä¸€å¼ è¡¨")])]),s._v("ã€‚")],1),s._v(" "),t("p",[s._v("sessionAæŒæœ‰çš„MDLé”ä¸æ˜¯å•ä¸ªåˆ†åŒºè¡¨çš„é”ï¼Œè€Œæ˜¯æ•´ä¸ªè¡¨tçš„MDLè¯»é”ã€‚å› æ­¤sessionBä¼šè¢«é˜»å¡ä½ã€‚")]),s._v(" "),t("p",[s._v("è€Œå¦‚æœæ˜¯åœ¨åº”ç”¨å±‚ä»£ç æ‰‹åŠ¨åˆ†åŒºçš„è¡¨ï¼ŒæŒæœ‰çš„MDLé”è‚¯å®šä¸ä¼šé˜»å¡åˆ°å…¶å®ƒè¯­å¥çš„æŸ¥è¯¢ï¼Œå› ä¸ºæ™®é€šåˆ†è¡¨æœ¬èº«è¡¨ä¹‹é—´éƒ½æ˜¯ç‹¬ç«‹çš„ã€‚")]),s._v(" "),t("h2",{attrs:{id:"åˆ†åŒºè¡¨çš„æ‰“å¼€è¡¨è¡Œä¸º"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#åˆ†åŒºè¡¨çš„æ‰“å¼€è¡¨è¡Œä¸º"}},[s._v("#")]),s._v(" åˆ†åŒºè¡¨çš„æ‰“å¼€è¡¨è¡Œä¸º")]),s._v(" "),t("p",[s._v("åˆ†åŒºè¡¨æ‰“å¼€è¡¨çš„è¡Œä¸ºï¼š"),t("font",{attrs:{color:"red"}},[t("strong",[s._v("æ¯å½“ç¬¬ä¸€æ¬¡è®¿é—®ä¸€ä¸ªåˆ†åŒºè¡¨çš„æ—¶å€™ï¼ŒMySQLéœ€è¦æŠŠæ‰€æœ‰çš„åˆ†åŒºéƒ½è®¿é—®ä¸€é")])]),s._v("ã€‚è¿™ä¹Ÿæ˜¯åˆ†åŒºè¡¨å¹¿å—è¯Ÿç—…çš„åœ°æ–¹ï¼")],1),s._v(" "),t("p",[s._v("å› æ­¤å¦‚æœ"),t("strong",[s._v("ä¸€ä¸ªè¡¨ä¸‹åˆ›å»ºäº†å¾ˆå¤šä¸ªåˆ†åŒºè¡¨")]),s._v("(MySQLå¯åŠ¨"),t("font",{staticStyle:{background:"rgb(240, 240, 236)"},attrs:{color:"#d94a33"}},[t("strong",[s._v("open_files_limit")])]),s._v("é»˜è®¤æœ€å¤šæ‰“å¼€1024ä¸ªåˆ†åŒº)ï¼Œé‚£ä¹ˆå³ä½¿å½“å‰SQLè¯­å¥åªç”¨åˆ°ä¸€ä¸ªåˆ†åŒºï¼Œè¯­å¥æ‰§è¡Œæ—¶ä¹Ÿä¼šæŠ¥é”™æ–‡ä»¶æ‰“å¼€æ•°è¿‡å¤šã€‚")],1),s._v(" "),t("h2",{attrs:{id:"åˆ†åŒºè¡¨çš„åº”ç”¨åœºæ™¯"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#åˆ†åŒºè¡¨çš„åº”ç”¨åœºæ™¯"}},[s._v("#")]),s._v(" åˆ†åŒºè¡¨çš„åº”ç”¨åœºæ™¯")]),s._v(" "),t("p",[s._v("æ€»è€Œè¨€ä¹‹åˆ†åŒºè¡¨å…·æœ‰ä»¥ä¸‹ç‰¹ç‚¹ï¼š")]),s._v(" "),t("ul",[t("li",[s._v("ä¼˜ç‚¹åœ¨äºå¯¹ä¸šåŠ¡é€æ˜ï¼Œå¹¶ä¸”ç›¸å¯¹äºæ‰‹åŠ¨åˆ†è¡¨è€Œè¨€ï¼Œä¸šåŠ¡ä»£ç æ›´åŠ ç®€æ´ã€‚")]),s._v(" "),t("li",[s._v("ğŸ’£ä¸¤ä¸ªæœ€å¤§çš„"),t("strong",[s._v("ç¼ºç‚¹")]),s._v("åœ¨äºâ‘ æ‰€æœ‰åˆ†åŒºè¡¨å…¬ç”¨MDLé”â‘¡ç¬¬ä¸€æ¬¡è®¿é—®ä¼šæ‰“å¼€è®¿é—®æ‰€æœ‰çš„åˆ†åŒºã€‚")])]),s._v(" "),t("p",[s._v("âœ¨æ–¹ä¾¿å¤„ç†å†å²æ•°æ®ï¼šå¯ä»¥å°†ä¸€é¡¹ä¸šåŠ¡çš„"),t("font",{attrs:{color:"red"}},[t("strong",[s._v("å†å²æ•°æ®æŒ‰ç…§æ—¶é—´çº¿è¿›è¡Œåˆ†åŒº")])]),s._v("ã€‚å¦‚æœè¦åˆ é™¤æŸä¸ªæ—¶é—´æ®µçš„å†å²æ•°æ®ï¼Œç›´æ¥alter table t drop partitionåˆ é™¤æŸä¸ªåˆ†åŒºè¡¨ã€‚å®ƒä¼š"),t("strong",[s._v("ç›´æ¥åˆ é™¤åˆ†åŒºæ–‡ä»¶")]),s._v("ï¼Œé€Ÿåº¦å¿«ã€‚")],1),s._v(" "),t("p",[s._v("âœ¨å½“ç„¶å¦‚æœæœ‰æˆç†Ÿçš„"),t("strong",[s._v("åˆ†åº“åˆ†è¡¨ä¸­é—´ä»¶")]),s._v("ï¼Œä¹Ÿå¯ä»¥ä»£æ›¿åˆ†åŒºè¡¨ï¼Œæ¯”å¦‚"),t("strong",[s._v("dbrouter")])])])}),[],!1,null,null,null);t.default=r.exports}}]);