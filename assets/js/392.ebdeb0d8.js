(window.webpackJsonp=window.webpackJsonp||[]).push([[392],{711:function(s,t,a){"use strict";a.r(t);var e=a(4),n=Object(e.a)({},(function(){var s=this,t=s._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h1",{attrs:{id:"ç›‘æ§mysqlçŠ¶æ€æ˜¯å¦æ­£å¸¸"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#ç›‘æ§mysqlçŠ¶æ€æ˜¯å¦æ­£å¸¸"}},[s._v("#")]),s._v(" ç›‘æ§MySQLçŠ¶æ€æ˜¯å¦æ­£å¸¸")]),s._v(" "),t("p",[t("font",{staticStyle:{background:"rgb(240, 240, 236)"},attrs:{color:"#d94a33"}},[t("strong",[s._v("innodb_thread_concurrency")])]),s._v("ï¼šæ§åˆ¶InnoDB"),t("strong",[s._v("å¹¶å‘çº¿ç¨‹")]),s._v("ä¸Šé™ï¼Œä¸€æ—¦è¶…è¿‡è¿™ä¸ªé˜ˆå€¼ï¼ŒInnoDBæ¥æ”¶åˆ°æ–°çš„è¯·æ±‚æ—¶å°±ä¼šè¿›å…¥ç­‰å¾…çŠ¶æ€ã€‚ä¸€èˆ¬æƒ…å†µä¸‹è®¾ç½®ä¸º64~128ä¹‹é—´æŸä¸ªå€¼ã€‚")],1),s._v(" "),t("p",[s._v("æƒ³è¦æ£€æµ‹å½“å‰MySQLçŠ¶æ€æ˜¯å¦æ­£å¸¸ï¼Œå®é™…ä¸Šç›¸å½“äºæ£€æµ‹å½“å‰å¹¶å‘çº¿ç¨‹æ•°æ˜¯å¦è¿‡å¤šè¶…å‡ºäº†é˜ˆå€¼ï¼Œå¯¼è‡´ç³»ç»Ÿä¸å¯ç”¨ã€‚")]),s._v(" "),t("h2",{attrs:{id:"select-1åˆ¤æ–­"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#select-1åˆ¤æ–­"}},[s._v("#")]),s._v(" select 1åˆ¤æ–­")]),s._v(" "),t("p",[s._v("å¦‚æœé€šè¿‡select 1æˆåŠŸè¿”å›ï¼Œåªèƒ½è¯´æ˜è¿™ä¸ªåº“çš„è¿›ç¨‹è¿˜åœ¨(å³ä½¿å½“å‰å¹¶å‘çº¿ç¨‹æ•°å·²ç»è¾¾åˆ°ä¸Šé™ä¹Ÿèƒ½å¤Ÿæ­£å¸¸è¿”å›)ï¼Œä½†æ˜¯å¯¹æŸä¸ªæ•°æ®è¡¨çš„æŸ¥è¯¢ä¾ç„¶ä¼šç»§ç»­é˜»å¡ã€‚å› æ­¤é€šè¿‡select 1å¹¶ä¸èƒ½æ£€æŸ¥å½“å‰æ•°æ®åº“çš„çŠ¶æ€æ˜¯å¦å¯ç”¨ã€‚")]),s._v(" "),t("p",[t("strong",[s._v("å¹¶å‘è¿æ¥")]),s._v("ï¼šæ‰§è¡Œshow processlistç»“æœçœ‹åˆ°çš„è¿æ¥æ•°ï¼Œä¸€èˆ¬æƒ…å†µä¸‹å¹¶å‘è¿æ¥æ•°ä¼šå¤§äºå¹¶å‘çº¿ç¨‹æ•°ï¼Œ")]),s._v(" "),t("p",[t("strong",[s._v("å¹¶å‘æŸ¥è¯¢/å¹¶å‘çº¿ç¨‹")]),s._v("ï¼šçœŸæ­£"),t("strong",[s._v("æ¶ˆè€—CPUèµ„æº")]),s._v("ï¼Œæ­£åœ¨æ‰§è¡ŒæŸ¥è¯¢äº‹åŠ¡çš„çº¿ç¨‹æ•°é‡ã€‚")]),s._v(" "),t("p",[s._v("æŸä¸ªçº¿ç¨‹è¿›å…¥æŸ¥è¯¢äº‹åŠ¡æ—¶ï¼Œ"),t("font",{attrs:{color:"red"}},[t("strong",[s._v("å¦‚æœé‡åˆ°é”ç­‰å¾…ï¼Œé‚£ä¹ˆè¯¥çº¿ç¨‹å°±ä¸ä¼šç®—å…¥å½“å‰MySQLçš„å¹¶å‘çº¿ç¨‹æ•°å½“ä¸­ï¼Œâ€œå¹¶å‘çº¿ç¨‹â€è®¡æ•°å‡ä¸€")])]),s._v("ã€‚å› ä¸ºè¿›å…¥é”ç­‰å¾…åï¼Œè¯¥çº¿ç¨‹å¹¶"),t("strong",[s._v("ä¸ä¼šåƒCPUèµ„æº")]),s._v("ï¼Œæœ€å¤šä¹Ÿå°±å ç”¨å†…å­˜ã€‚MySQLè¿™ä¹ˆè®¾è®¡çš„åŸå› ä¸»è¦æœ‰ä¸¤ä¸ªï¼š")],1),s._v(" "),t("ul",[t("li",[s._v("æé«˜æ•°æ®åº“çš„å¹¶å‘èƒ½åŠ›")]),s._v(" "),t("li",[s._v("é¿å…æ•´ä¸ªç³»ç»Ÿé”ä½ã€‚é˜²æ­¢å‡ºç°CPUåˆ©ç”¨ç‡ä¸º0è€Œæ•´ä¸ªæ•°æ®åº“å¤„äºä¸å¯ç”¨çš„çŠ¶æ€ã€‚")])]),s._v(" "),t("h2",{attrs:{id:"æŸ¥è¡¨åˆ¤æ–­"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#æŸ¥è¡¨åˆ¤æ–­"}},[s._v("#")]),s._v(" æŸ¥è¡¨åˆ¤æ–­")]),s._v(" "),t("p",[s._v("åœ¨ç³»ç»Ÿåº“åˆ›å»ºä¸€ä¸ªè¡¨ï¼Œé‡Œé¢éšä¾¿æ”¾å…¥ä¸€è¡Œæ•°æ®ï¼Œå¹¶"),t("strong",[s._v("å®šæœŸæ‰§è¡Œ")]),s._v("ã€‚ç›¸æ¯”äºä¸Šé¢ä¸€ç§æ–¹æ³•ï¼Œå› ä¸ºè¿™é‡Œæ˜¯å…·ä½“å¯¹æŸä¸ªè¡¨çš„æŸ¥è¯¢ï¼Œå› æ­¤è¶…è¿‡å¹¶å‘çº¿ç¨‹æ•°æ—¶ä¼šè¢«é˜»å¡ã€‚")]),s._v(" "),t("div",{staticClass:"language-sql line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" mysql"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("health_check"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("ğŸ’£å­˜åœ¨çš„é—®é¢˜ï¼šç£ç›˜ç©ºé—´å ç”¨ç‡å æ»¡åå°±ä¸èƒ½æ­£å¸¸å†™binlogï¼Œåç»­æ‰€æœ‰"),t("strong",[s._v("æ›´æ–°è¯­å¥")]),s._v("å’Œäº‹åŠ¡æäº¤éƒ½ä¼šè¢«é˜»å¡ä½ã€‚è€Œæ­¤æ—¶ç³»ç»Ÿæ˜¯å¯ä»¥æ­£å¸¸"),t("strong",[s._v("è¯»æ•°æ®")]),s._v("çš„ï¼Œæ„Ÿå—ä¸åˆ°ç£ç›˜çš„æƒ…å†µã€‚")]),s._v(" "),t("h2",{attrs:{id:"æ›´æ–°åˆ¤æ–­"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#æ›´æ–°åˆ¤æ–­"}},[s._v("#")]),s._v(" æ›´æ–°åˆ¤æ–­")]),s._v(" "),t("p",[s._v("åœ¨å¤–éƒ¨è¡¨ä¸Šå°†æŸ¥è¯¢è¯­å¥æ”¹ä¸º"),t("strong",[s._v("æ‰§è¡Œæ›´æ–°è¯­å¥")]),s._v("ï¼Œå› ä¸ºæ›´æ–°è¯­å¥ä¼šæäº¤äº‹åŠ¡å¹¶ä¸”å†™binlogï¼Œæ‰€ä»¥å¦‚æœç£ç›˜ç©ºé—´ä¸è¶³å°±ä¼šè¶…æ—¶ä¸è¿”å›ï¼Œä»è€Œç¡®è®¤â€œå½“å‰ç³»ç»Ÿä¸å¯ç”¨â€ã€‚")]),s._v(" "),t("p",[s._v("è€Œå¯¹äºä¸€ä¸»å¤šä»çš„ç»“æ„ï¼Œå› ä¸ºä¸»å¤‡åº“éƒ½ä¼šæ‰§è¡Œæ›´æ–°æ£€æµ‹ï¼Œæ‰§è¡Œæ—¶æœºå­˜åœ¨å…ˆåå·®å¼‚ï¼Œå¹¶ä¸”å­˜åœ¨è¡Œå†²çªã€‚å› æ­¤ç³»ç»Ÿæ´»æ€§è¡¨éœ€è¦"),t("strong",[s._v("ä»¥æ¯ä¸ªä¸»å¤‡åº“çš„"),t("font",{staticStyle:{background:"rgb(240, 240, 236)"},attrs:{color:"#d94a33"}},[s._v("server_id")]),s._v("ä½œä¸ºä¸»é”®")],1),s._v("æ¥æ›´æ–°æ’å…¥è¡Œè®°å½•("),t("strong",[s._v("ä¸»å¤‡åº“çš„"),t("font",{staticStyle:{background:"rgb(240, 240, 236)"},attrs:{color:"#d94a33"}},[s._v("server_id")]),s._v("æ˜¯ä¸åŒä¸”å”¯ä¸€çš„")],1),s._v(")ï¼Œæ¯ä¸ªåº“å„è‡ªç»´æŠ¤è‡ªå·±çš„æ£€æµ‹æ—¶é—´ã€‚")]),s._v(" "),t("div",{staticClass:"language-sql line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("insert")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("into")]),s._v(" mysql"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("health_check"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("id"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("t_modified"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("values")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("@"),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("@server_id")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("now")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("on")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("duplicate")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("key")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("update")]),s._v(" t_modified"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("now")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("ğŸ’£å­˜åœ¨çš„é—®é¢˜ï¼šâ€œ"),t("strong",[s._v("åˆ¤å®šæ…¢")]),s._v("â€ã€‚å…·ä½“æ¥è¯´ï¼Œä¸Šè¿°æ›´æ–°è¯­å¥éœ€è¦çš„IOèµ„æºå°‘ï¼Œæ‰§è¡Œæ¯”è¾ƒå¿«ä¸”èƒ½ç«‹åˆ»è¿”å›ã€‚å¯èƒ½ä¸‹ä¸€æ—¶åˆ»ç³»ç»Ÿä¸Šçš„SQLå°±å·²ç»æ‰§è¡Œçš„å¾ˆæ…¢äº†ï¼Œè€Œå‰ä¸€æ—¶åˆ»DBAæ‹¿åˆ°æ›´æ–°è¯­å¥çš„è¿”å›ç»“æœï¼Œè¿˜è®¤ä¸ºâ€œå½“å‰æ•°æ®åº“ç³»ç»Ÿæ­£å¸¸â€ã€‚")]),s._v(" "),t("p",[t("font",{attrs:{color:"red"}},[t("strong",[s._v("å¤–éƒ¨æ£€æµ‹çš„ç¼ºé™·åœ¨äºï¼Œæ£€æµ‹æŸ¥è¯¢çš„æ—¶æœºæ˜¯éšæœºçš„ï¼Œå¯èƒ½ç³»ç»Ÿåœ¨å½“å‰æ—¶åˆ»å°±å·²ç»å‡ºç°é—®é¢˜ï¼Œå´éœ€è¦ç­‰åˆ°ä¸‹ä¸€æ¬¡æ£€æµ‹æ‰èƒ½å‘ç°")])]),s._v("ã€‚")],1),s._v(" "),t("h2",{attrs:{id:"å†…éƒ¨ç»Ÿè®¡"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#å†…éƒ¨ç»Ÿè®¡"}},[s._v("#")]),s._v(" å†…éƒ¨ç»Ÿè®¡")]),s._v(" "),t("p",[t("font",{staticStyle:{background:"rgb(240, 240, 236)"},attrs:{color:"#d94a33"}},[t("strong",[s._v("performance_schema")])]),s._v("åº“ä¸­çš„"),t("font",{staticStyle:{background:"rgb(240, 240, 236)"},attrs:{color:"#d94a33"}},[t("strong",[s._v("file_summary_by_event_name")])]),s._v("è¡¨ç»Ÿè®¡äº†æ¯æ¬¡IOè¯·æ±‚çš„æ—¶é—´ï¼Œ"),t("strong",[s._v("é€šè¿‡å†…éƒ¨æ¯æ¬¡IOè¯·æ±‚çš„æ—¶é—´(æ¯”å¦‚å•æ¬¡IOè€—æ—¶è¶…è¿‡é˜ˆå€¼)ï¼Œåˆ¤æ–­å‡ºå½“å‰æ•°æ®åº“æ˜¯å¦å› ä¸ºç£ç›˜åˆ©ç”¨ç‡å¯¼è‡´ç³»ç»Ÿä¸å¯ç”¨")]),s._v("ã€‚")],1),s._v(" "),t("p",[s._v("å› ä¸ºæ¯æ¬¡æ“ä½œæ•°æ®åº“ï¼Œ"),t("font",{staticStyle:{background:"rgb(240, 240, 236)"},attrs:{color:"#d94a33"}},[t("strong",[s._v("performance_schema")])]),s._v("éƒ½ä¼šç»Ÿè®¡IOçš„æ—¶é—´æˆ³ä¿¡æ¯ï¼Œæ˜¯æœ‰æŸçš„ã€‚å› æ­¤åªéœ€è¦æ‰“å¼€ç”¨åˆ°çš„ç»Ÿè®¡åŠŸèƒ½ã€‚")],1),s._v(" "),t("ul",[t("li",[t("p",[s._v('binlogå¯¹åº”çš„è¡Œæ•°æ®æ˜¯event_name="wait/io/file/sql/binlog"')])]),s._v(" "),t("li",[t("p",[s._v("æ‰§è¡Œä»¥ä¸‹è¯­å¥æ‰“å¼€redo logçš„æ—¶é—´ç›‘æ§")]),s._v(" "),t("div",{staticClass:"language-sql line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("update")]),s._v(" setup_instruments "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("set")]),s._v(" ENABLED"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'YES'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" Timed"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'YES'")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("where")]),s._v(" name "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("like")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'%wait/io/file/innodb/innodb_log_file%'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])])]),s._v(" "),t("li",[t("p",[s._v("æ ¹æ®IOç»Ÿè®¡ä¿¡æ¯çš„MAX_TIMERçš„å€¼æ¥åˆ¤æ–­ï¼Œå¦‚æœå•æ¬¡IOè¯·æ±‚æ—¶é—´è¶…è¿‡æŸä¸ªé˜ˆå€¼ï¼Œåˆ™åˆ¤æ–­ç³»ç»Ÿå¼‚å¸¸ã€‚")]),s._v(" "),t("div",{staticClass:"language-sql line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),s._v(" event_name"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("MAX_TIMER_WAIT  "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("FROM")]),s._v(" performance_schema"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("file_summary_by_event_name "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("where")]),s._v(" event_name "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("in")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'wait/io/file/innodb/innodb_log_file'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'wait/io/file/sql/binlog'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("and")]),s._v(" MAX_TIMER_WAIT"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("200")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1000000000")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])])]),s._v(" "),t("li",[t("p",[s._v("æŠŠå…ˆå‰çš„ç»Ÿè®¡ä¿¡æ¯æ¸…ç©ºï¼Œæ–¹ä¾¿åç»­çš„ç›‘æ§")]),s._v(" "),t("div",{staticClass:"language-sql line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("truncate")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("table")]),s._v(" performance_schema"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("file_summary_by_event_name"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])])])]),s._v(" "),t("h2",{attrs:{id:"å…¶å®ƒç›‘æ§æŒ‡æ ‡"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#å…¶å®ƒç›‘æ§æŒ‡æ ‡"}},[s._v("#")]),s._v(" å…¶å®ƒç›‘æ§æŒ‡æ ‡")]),s._v(" "),t("p",[s._v("æœåŠ¡çŠ¶æ€ç›‘æ§ï¼šå¤–éƒ¨ç³»ç»Ÿå’Œç¬¬ä¸‰æ–¹ä¸­é—´ä»¶ã€‚")]),s._v(" "),t("p",[s._v("æœåŠ¡è´¨é‡ç›‘æ§ï¼šæ¥å£å“åº”æ—¶é—´æ¥åˆ¤æ–­ã€‚")]),s._v(" "),t("p",[s._v("åŸºç¡€ç›‘æ§ï¼šç¡¬ç›˜ã€CPUã€ç½‘ç»œã€å†…å­˜")])])}),[],!1,null,null,null);t.default=n.exports}}]);