(window.webpackJsonp=window.webpackJsonp||[]).push([[380],{698:function(s,t,a){"use strict";a.r(t);var r=a(4),_=Object(r.a)({},(function(){var s=this,t=s._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h1",{attrs:{id:"mysqlä¸€è‡´æ€§ä¸Žé«˜å¯ç”¨æ€§"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#mysqlä¸€è‡´æ€§ä¸Žé«˜å¯ç”¨æ€§"}},[s._v("#")]),s._v(" MySQLä¸€è‡´æ€§ä¸Žé«˜å¯ç”¨æ€§")]),s._v(" "),t("h2",{attrs:{id:"_1-mysqlä¸€è‡´æ€§"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-mysqlä¸€è‡´æ€§"}},[s._v("#")]),s._v(" 1.MySQLä¸€è‡´æ€§")]),s._v(" "),t("h3",{attrs:{id:"_1-1å¤‡åº“è®¾ç½®readonly"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-1å¤‡åº“è®¾ç½®readonly"}},[s._v("#")]),s._v(" 1.1å¤‡åº“è®¾ç½®Readonly")]),s._v(" "),t("p",[s._v("å®¢æˆ·ç«¯å’Œä¸»åº“è¿›è¡Œè¿žæŽ¥ï¼Œå¹¶åœ¨ä¸»åº“ä¸Šæ‰§è¡Œæ›´æ–°æ“ä½œåŽï¼Œä¸»åº“ä¼šå°†æ‰€æœ‰æ›´æ–°éƒ½åŒæ­¥åˆ°å¤‡åº“ä¸­ã€‚")]),s._v(" "),t("p",[s._v("ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œå¤‡åº“éœ€è¦è¿›è¡Œè®¾ç½®æˆreadonlyåªè¯»æ¨¡å¼ï¼Œå¥½å¤„å¦‚ä¸‹ï¼š")]),s._v(" "),t("ul",[t("li",[s._v("ä¸ºäº†å‡å°‘ä¸»åº“çš„åŽ‹åŠ›ï¼Œä¸€äº›è¿è¥ç±»æŸ¥è¯¢è¯­å¥ä¼š"),t("strong",[s._v("æ”¾åˆ°å¤‡åº“ä¸ŠæŸ¥")]),s._v("ï¼Œè®¾ç½®åªè¯»å¯ä»¥è®¾ç½®é˜²æ­¢è¯¯æ“ä½œã€‚")]),s._v(" "),t("li",[s._v("é˜²æ­¢ä¸»å¤‡åˆ‡æ¢æ—¶å‡ºçŽ°"),t("strong",[s._v("åŒå†™")]),s._v("bugï¼Œå¯¼è‡´ä¸»å¤‡ä¸ä¸€è‡´ã€‚")]),s._v(" "),t("li",[s._v("é€šè¿‡readonlyå¯ä»¥åŒºåˆ†èŠ‚ç‚¹æ˜¯ä¸»åº“è¿˜æ˜¯å­˜åº“ã€‚")])]),s._v(" "),t("p",[s._v("åªè¯»æ¨¡å¼å¯¹äºŽæ‹¥æœ‰superç”¨æˆ·æƒé™çš„ç”¨æˆ·æ˜¯æ— æ•ˆçš„ï¼Œ"),t("strong",[s._v("ç”¨äºŽå¤‡åº“çš„åŒæ­¥æ›´æ–°çš„çº¿ç¨‹å°±æ‹¥æœ‰è¶…çº§æƒé™")]),s._v("ã€‚å› æ­¤å¤‡åº“çš„æ›´æ–°ä¸ä¼šå—é™äºŽåªè¯»æ¨¡å¼ã€‚")]),s._v(" "),t("h3",{attrs:{id:"_1-2ä¸»å¤‡æ—¥å¿—åŒæ­¥æµç¨‹"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-2ä¸»å¤‡æ—¥å¿—åŒæ­¥æµç¨‹"}},[s._v("#")]),s._v(" 1.2ä¸»å¤‡æ—¥å¿—åŒæ­¥æµç¨‹")]),s._v(" "),t("p",[s._v("ä¸»åº“(AèŠ‚ç‚¹)æ‰§è¡Œäº‹åŠ¡å¹¶æ›´æ–°æ—¥å¿—åŽï¼Œ"),t("font",{attrs:{color:"red"}},[t("strong",[s._v("é€šè¿‡dump_threadçº¿ç¨‹ä¸“é—¨ç”¨äºŽç»´æŠ¤ä¸»åº“å’Œå¤‡åº“çš„é•¿è¿žæŽ¥")])]),s._v("ã€‚")],1),s._v(" "),t("p",[t("img",{attrs:{src:"https://jsd.cdn.zzko.cn/gh/blage-coding/picx-images-hosting@master/20230703/image.1ws6tgq9wuf4.webp",alt:""}})]),s._v(" "),t("ol",[t("li",[s._v("å¤‡åº“Bé€šè¿‡change masterå‘½ä»¤è®¾ç½®ä¸»åº“Açš„IPã€ç”¨æˆ·åã€å¯†ç ï¼Œ"),t("strong",[s._v("è¦è¯»å–çš„ä¸»åº“çš„binlogæ–‡ä»¶åå’Œä½ç½®åç§»")]),s._v("ã€‚")]),s._v(" "),t("li",[s._v("å¤‡åº“ä¸Šæ‰§è¡Œstart slaveå‘½ä»¤åŽï¼Œå¤‡åº“ä¸Šä¼šå¯åŠ¨ä¸¤ä¸ªçº¿ç¨‹ï¼š\n"),t("ul",[t("li",[t("strong",[s._v("io-threadï¼šè´Ÿè´£ä¸Žä¸»åº“è¿›è¡Œè¿žæŽ¥")]),s._v("ã€‚æ‹¿åˆ°ä¸»åº“çš„binlogæ—¥å¿—åŽä¼šå†™åˆ°æœ¬åœ°æ–‡ä»¶ï¼Œä¹Ÿå°±æ˜¯ä¸­è½¬æ—¥å¿—(relaylog)")]),s._v(" "),t("li",[t("strong",[s._v("sql-threadï¼šè¯»å–ä¸­è½¬æ—¥å¿—ï¼Œå¹¶è§£æžå‡ºæ—¥å¿—çš„SQLå‘½ä»¤ç„¶åŽæ‰§è¡Œ")]),s._v("ã€‚")])])])]),s._v(" "),t("h3",{attrs:{id:"_1-3binlogçš„ä¸‰ç§æ ¼å¼"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-3binlogçš„ä¸‰ç§æ ¼å¼"}},[s._v("#")]),s._v(" 1.3binlogçš„ä¸‰ç§æ ¼å¼")]),s._v(" "),t("p",[t("font",{staticStyle:{background:"rgb(240, 240, 236)"},attrs:{color:"#d94a33"}},[t("strong",[s._v("binlog_format")])]),s._v("ï¼šè®¾ç½®binlogçš„æ ¼å¼ã€‚å¯é€‰å‚æ•°åŒ…å«ä»¥ä¸‹ä¸‰ç§æ ¼å¼ã€‚")],1),s._v(" "),t("h4",{attrs:{id:"statement"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#statement"}},[s._v("#")]),s._v(" statement")]),s._v(" "),t("p",[s._v("ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤æŸ¥çœ‹binlogæ—¥å¿—æ–‡ä»¶ï¼š")]),s._v(" "),t("div",{staticClass:"language-sql line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("/*æŸ¥çœ‹å½“å‰binlogçš„è®°å½•ä½ç½®*/")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("show")]),s._v(" master "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("status")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("/*æ ¹æ®æ—¥å¿—åç§°æŸ¥çœ‹æŒ‡å®šæ—¥å¿—æ–‡ä»¶*/")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("show")]),s._v(" binlog events "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("in")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'master.000001'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br")])]),t("p",[s._v("å¾—åˆ°çš„binlogå†…å®¹å¦‚ä¸‹ï¼Œå…¶ä¸­"),t("font",{attrs:{color:"red"}},[t("strong",[s._v("beginå’Œcommitä¹‹é—´è®°å½•çš„æ˜¯SQLè¯­å¥åŽŸæ–‡")])]),s._v("ã€‚")],1),s._v(" "),t("p",[t("img",{attrs:{src:"https://jsd.cdn.zzko.cn/gh/blage-coding/picx-images-hosting@master/20230703/image.6sx67yjma200.webp",alt:""}})]),s._v(" "),t("ul",[t("li",[s._v("ç¬¬ä¸‰è¡Œï¼šé¦–å…ˆuse 'test'è¡¨ç¤ºå…ˆé”å®šåˆ é™¤æ•°æ®è¡¨tæ‰€åœ¨çš„æ•°æ®åº“testï¼Œç„¶åŽæŽ¥ç€æ‰§è¡Œåˆ é™¤å‘½ä»¤ã€‚")]),s._v(" "),t("li",[s._v("ç¬¬å››è¡Œï¼šXIDç”¨äºŽredologä¸Žbinlogä¸¤è€…ä¹‹é—´çš„å®šä½å’Œæ ‡è¯†ã€‚")])]),s._v(" "),t("div",{staticClass:"language-sql line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("delete")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" t "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("where")]),s._v(" a"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("and")]),s._v(" t_modified"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'2018-11-10'")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("limit")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("ðŸ’£"),t("strong",[s._v("statementæ ¼å¼å­˜åœ¨çš„é—®é¢˜")]),s._v("ï¼šè€ƒè™‘å¦‚æžœå®¢æˆ·ç«¯è¦æ‰§è¡Œä»¥ä¸Šè¯­å¥ï¼Œå…¶ä¸­t_modifiedå’Œaå­—æ®µéƒ½æœ‰ç´¢å¼•ï¼Œå› ä¸ºlimit 1çš„ç¼˜æ•…ï¼Œè¯¥æ¡åˆ é™¤è¯­å¥åˆ†åˆ«ä½¿ç”¨aç´¢å¼•å’Œt_modifiedç´¢å¼•ï¼Œ"),t("strong",[s._v("å®šä½åˆ°çš„å¯èƒ½ä¸æ˜¯ä¸€æ¡è¡Œè®°å½•")]),s._v("ã€‚")]),s._v(" "),t("p",[s._v("ä¹Ÿå°±æ˜¯è¯´åœ¨statementæ ¼å¼ä¸‹ï¼Œä»…ä»…æ ¹æ®SQLè¯­å¥è¿›è¡Œå¤‡ä»½ï¼Œ"),t("strong",[s._v("å¦‚æžœä¸»åº“æ‰§è¡Œæ—¶ä½¿ç”¨äº†ç´¢å¼•aï¼Œè€Œå¤‡åº“æ‰§è¡Œæ—¶ä½¿ç”¨äº†t_modifiedï¼Œé‚£ä¹ˆå°±ä¼šå¯¼è‡´ä¸»å¤‡ä¸ä¸€è‡´çš„æƒ…å†µ")]),s._v("ã€‚MySQLè®¤ä¸ºè¿™æ˜¯ä¸å®‰å…¨çš„ã€‚")]),s._v(" "),t("h4",{attrs:{id:"row"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#row"}},[s._v("#")]),s._v(" row")]),s._v(" "),t("p",[s._v("å€ŸåŠ©mysqlbinlogå·¥å…·è§£æžæŸ¥çœ‹binlogå…·ä½“å†…å®¹ã€‚å…¶ä¸­-vvè¡¨ç¤ºå°†å†…å®¹éƒ½è§£æžå‡ºæ¥ï¼Œå¯ä»¥çœ‹åˆ°å„ä¸ªå­—æ®µçš„å€¼ã€‚")]),s._v(" "),t("div",{staticClass:"language-sql line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[s._v("mysqlbinlog  "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("vv "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("data")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("master"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("000001")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("--start-position=8900;")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[t("img",{attrs:{src:"https://jsd.cdn.zzko.cn/gh/blage-coding/picx-images-hosting@master/20230703/image.3qswvxwezt40.webp",alt:""}})]),s._v(" "),t("p",[s._v("rowæ ¼å¼ä¸‹ï¼Œbeginä¸Žcommitä¹‹é—´è®°å½•çš„æ˜¯ä¸¤ä¸ªeventäº‹ä»¶ï¼š")]),s._v(" "),t("ul",[t("li",[t("p",[t("font",{staticStyle:{background:"rgb(240, 240, 236)"},attrs:{color:"#d94a33"}},[t("strong",[s._v("Table_map")])]),s._v(" ï¼šç”¨äºŽè¯´æ˜ŽSQLè¯­å¥æ“ä½œçš„æ˜¯å“ªä¸ªåº“å“ªä¸ªè¡¨")],1)]),s._v(" "),t("li",[t("p",[t("font",{staticStyle:{background:"rgb(240, 240, 236)"},attrs:{color:"#d94a33"}},[t("strong",[s._v("Delete_rows")])]),s._v("ï¼šç”¨äºŽå®šä¹‰åˆ é™¤è¡Œä¸ºã€‚å…¶ä¸­æ ¹æ®binlog_row_imagesä¸åŒï¼Œè®°å½•çš„ä¿¡æ¯ä¹Ÿå­˜åœ¨äº›è®¸å·®åˆ«ï¼š")],1),s._v(" "),t("ul",[t("li",[t("p",[t("font",{staticStyle:{background:"rgb(240, 240, 236)"},attrs:{color:"#d94a33"}},[t("strong",[s._v("binlog_row_image")])]),s._v(" = FULLï¼šè®°å½•æ›´æ–°ä¹‹å‰çš„è®°å½•ï¼Œä»¥åŠæ›´æ–°ä¹‹åŽçš„è®°å½•ã€‚"),t("strong",[s._v("å¢žåŠ binlogæ–‡ä»¶å¤§å°ï¼Œå¢žåŠ ç£ç›˜IOï¼Œä½†ä»Žæ•°æ®æ¢å¤è§’åº¦æ¥è¯´æ›´åŠ å®‰å…¨")]),s._v("ã€‚")],1),s._v(" "),t("div",{staticClass:"language-sql line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("### UPDATE `test`.`t2`")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("### WHERE")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("###   @1=1 /* INT meta=0 nullable=0 is_null=0 */")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("###   @2='gz' /* STRING(20) meta=65044 nullable=1 is_null=0 */")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("###   @4=3 /* INT meta=0 nullable=1 is_null=0 */")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("### SET")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("###   @1=1 /* INT meta=0 nullable=0 is_null=0 */")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("###   @2='gz' /* STRING(20) meta=65044 nullable=1 is_null=0 */")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("###   @3=99 /* INT meta=0 nullable=1 is_null=0 */")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br")])])]),s._v(" "),t("li",[t("p",[t("font",{staticStyle:{background:"rgb(240, 240, 236)"},attrs:{color:"#d94a33"}},[t("strong",[s._v("binlog_row_image")])]),s._v(" = MINIMALï¼šä»…è®°å½•è¯¥è¡Œæ›´æ–°çš„åˆ—å­—æ®µå€¼ä¿¡æ¯ã€‚"),t("strong",[s._v("ç›¸æ¯”FULLæ–¹å¼binlogæ–‡ä»¶æ›´å°ï¼Œä½†ä¸å¤Ÿå®‰å…¨")]),s._v("ã€‚")],1),s._v(" "),t("div",{staticClass:"language-sql line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("### UPDATE `test`.`t2`")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("### WHERE")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("###   @1=1 /* INT meta=0 nullable=0 is_null=0 */")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("### SET")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("###   @3=100 /* INT meta=0 nullable=1 is_null=0 */")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br")])])])])])]),s._v(" "),t("p",[s._v("ç»¼ä¸Šï¼Œåœ¨rowæ ¼å¼ä¸‹ï¼Œ"),t("font",{attrs:{color:"red"}},[t("strong",[s._v("binlogè®°å½•äº†å…·ä½“æ›´æ–°æ“ä½œè¡Œçš„ä¸»é”®idå€¼")])]),s._v("ï¼Œä»Žè€Œä¿è¯æ— è®ºæ˜¯ä¸»åº“è¿˜æ˜¯å¤‡åº“ï¼Œéƒ½èƒ½å¤Ÿæ ¹æ®ä¸»é”®id"),t("strong",[s._v("å®šä½åˆ°åŒä¸€è¡Œæ•°æ®")]),s._v("ã€‚")],1),s._v(" "),t("h4",{attrs:{id:"mixed"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#mixed"}},[s._v("#")]),s._v(" mixed")]),s._v(" "),t("p",[s._v("å¯¹æ¯”ä¸Šé¢ä¸¤ç§æ ¼å¼çš„binlogï¼Œä¸éš¾åˆ†æžå‡ºå­˜åœ¨ä»¥ä¸‹ä¼˜ç¼ºç‚¹ï¼š")]),s._v(" "),t("ul",[t("li",[s._v("statementæ ¼å¼çš„"),t("strong",[s._v("binlogæ–‡ä»¶æ›´å°")]),s._v("ï¼Œå› ä¸ºåªéœ€è¦èŠ±è´¹å‡ åä¸ªå­—èŠ‚å­˜å‚¨ä¸€ä¸ªSQLè¯­å¥ã€‚ä½†æ˜¯åœ¨å¤‡ä»½åŒæ­¥æ—¶ï¼Œå¯èƒ½ä¼šå‡ºçŽ°"),t("strong",[s._v("ä¸»å¤‡ä¸ä¸€è‡´")]),s._v("çš„æƒ…å†µã€‚")]),s._v(" "),t("li",[s._v("rowæ ¼å¼çš„binlogè™½ç„¶è§£å†³äº†ä¸»å¤‡ä¸ä¸€è‡´çš„é—®é¢˜ï¼Œä½†binlog"),t("strong",[s._v("æ–‡ä»¶è¾ƒå¤§æµªè´¹ç©ºé—´ï¼Œè€—è´¹IOèµ„æº")]),s._v("ã€‚å‡è®¾ä¸€ä¸ªdeleteè¯­å¥åˆ é™¤åä¸‡è¡Œæ•°æ®ï¼Œé‚£ä¹ˆbinlogæ–‡ä»¶ä¸­å°±éœ€è¦è®°è½½åä¸‡ä¸ªè¡Œè®°å½•çš„ä¿¡æ¯(è‡³å°‘åŒ…å«ä¸»é”®id)ã€‚")])]),s._v(" "),t("p",[s._v("mixedï¼šè¿™ç§æ ¼å¼ç›¸å½“äºŽä»¥ä¸Šä¸¤ç§æ–¹æ¡ˆçš„æŠ˜ä¸­ã€‚"),t("font",{attrs:{color:"red"}},[t("strong",[s._v("å¯¹äºŽä¸€æ¡SQLè¯­å¥ï¼Œå¦‚æžœä¸ä¼šé€ æˆä¸»å¤‡ä¸ä¸€è‡´ï¼Œé‚£ä¹ˆå°±ä¼šè½¬åŒ–ä¸ºstatementæ ¼å¼ï¼›å¦åˆ™å°±ç”¨rowæ ¼å¼")])]),s._v("ã€‚")],1),s._v(" "),t("h4",{attrs:{id:"å¢žåˆ æ”¹åœºæ™¯ä¸‹binlogæ ¼å¼é€‰æ‹©"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#å¢žåˆ æ”¹åœºæ™¯ä¸‹binlogæ ¼å¼é€‰æ‹©"}},[s._v("#")]),s._v(" å¢žåˆ æ”¹åœºæ™¯ä¸‹binlogæ ¼å¼é€‰æ‹©")]),s._v(" "),t("p",[s._v("ç»“è®ºï¼šä¸€èˆ¬æ¥è¯´"),t("strong",[s._v("ä¸»è¦ä½¿ç”¨rowæ ¼å¼")]),s._v("ã€‚å› ä¸ºrowæ ¼å¼æœ‰ä¸€ä¸ªå¾ˆå¤§çš„å¥½å¤„ï¼š"),t("font",{attrs:{color:"red"}},[t("strong",[s._v("æ¢å¤æ•°æ®")])]),s._v("ã€‚")],1),s._v(" "),t("p",[s._v("rowæ ¼å¼ä¸­è®°è½½äº†æ›´æ–°å‰å’Œæ›´æ–°åŽè¡Œè®°å½•çš„æ‰€æœ‰ä¿¡æ¯ï¼Œå› æ­¤"),t("strong",[s._v("åˆ é”™äº†å°±åœ¨æ—¥å¿—ä¸­æ”¹ä¸ºæ’å…¥ï¼›æ’é”™äº†å°±åœ¨æ—¥å¿—ä¸­æ”¹ä¸ºåˆ é™¤ï¼›å¯¹äºŽæ›´æ–°æ“ä½œåªéœ€è¦å°†eventäº‹ä»¶æ›´æ–°å‰åŽçš„è®°å½•ä¿¡æ¯å¯¹è°ƒ")]),s._v("å³å¯ã€‚")]),s._v(" "),t("div",{staticClass:"language-sql line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("insert")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("into")]),s._v(" t "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("values")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("now")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("è¿™æ¡SQLè¯­å¥éœ€è¦æ’å…¥å½“å‰æ—¶é—´ï¼Œå› æ­¤å¤‡åº“æ ¹æ®binlogçš„SQLè¯­å¥åŒæ­¥æ•°æ®æ—¶ï¼Œè‚¯å®šä¼šç”±äºŽå­˜åœ¨"),t("strong",[s._v("æ—¶é—´é—´éš”")]),s._v("è€Œå¯¼è‡´ä¸»ä»Žä¸ä¸€è‡´çš„æƒ…å†µã€‚å› æ­¤è¿™ç§æƒ…å†µä¸‹æœ‰ä¸¤ç§è§£å†³æ–¹æ¡ˆï¼š")]),s._v(" "),t("ul",[t("li",[t("p",[s._v("ä½¿ç”¨rowæ ¼å¼ä¸ä¼šå‡ºçŽ°ä¸»å¤‡ä¸ä¸€è‡´çš„æƒ…å†µï¼Œç›´æŽ¥æ ¹æ®è¯¥æ¡è¡Œè®°å½•çš„åˆ—ä¿¡æ¯è¿›è¡ŒåŒæ­¥å’Œå¤‡ä»½ã€‚")])]),s._v(" "),t("li",[t("p",[s._v("ä½¿ç”¨mixedæ ¼å¼çš„æƒ…å†µä¸‹ï¼Œ"),t("strong",[s._v("MySQLè™½ç„¶ä¼šé€‰æ‹©statenmentæ ¼å¼ï¼Œä½†æ˜¯ä¼šåŠ ä¸Šæ—¶é—´æˆ³ä¿¡æ¯ï¼Œä¿è¯now()è¿”å›žçš„æ˜¯ä¸€ä¸ªè®¾å®šå¥½çš„æ—¶é—´")]),s._v("ã€‚")]),s._v(" "),t("div",{staticClass:"language-sql line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("set")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("TIMESTAMP")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1546103491")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("insert")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("into")]),s._v(" t "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("values")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("now")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])])])]),s._v(" "),t("h4",{attrs:{id:"å¦‚ä½•æ ¹æ®binlogæ¥æ¢å¤æ•°æ®"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#å¦‚ä½•æ ¹æ®binlogæ¥æ¢å¤æ•°æ®"}},[s._v("#")]),s._v(" å¦‚ä½•æ ¹æ®binlogæ¥æ¢å¤æ•°æ®")]),s._v(" "),t("p",[s._v("statementæ ¼å¼çš„SQLè¯­å¥åœ¨æ‰§è¡Œæ—¶ï¼Œæœ‰æ—¶å€™"),t("strong",[s._v("ä¾èµ–äºŽbinlogçš„ä¸Šä¸‹æ–‡å‘½ä»¤")]),s._v("ã€‚å› æ­¤ä½¿ç”¨binlogæ¢å¤æ•°æ®æ—¶ï¼Œéœ€è¦å°†è§£æžç»“æžœæ•´è¡Œæ•´æ®µä¸€èµ·æ‰§è¡Œã€‚")]),s._v(" "),t("div",{staticClass:"language-sql line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[s._v("mysqlbinlog master"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("000001")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("--start-position=2738 --stop-position=2973 | mysql -h127.0.0.1 -P13000 -u$user -p$pwd;")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("ä¸Šè¿°å‘½ä»¤æ˜¯æŒ‡å°†master.000001æ–‡ä»¶2738å­—èŠ‚åˆ°2973å­—èŠ‚ä¸­é—´è¿™æ®µå†…å®¹è¿›è¡Œ"),t("strong",[s._v("è§£æžå’Œé‡æ”¾")]),s._v("ï¼Œç„¶åŽæ”¾åˆ°MySQLæ‰§è¡Œã€‚")]),s._v(" "),t("h3",{attrs:{id:"_1-4å¾ªçŽ¯å¤åˆ¶é—®é¢˜"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-4å¾ªçŽ¯å¤åˆ¶é—®é¢˜"}},[s._v("#")]),s._v(" 1.4å¾ªçŽ¯å¤åˆ¶é—®é¢˜")]),s._v(" "),t("p",[s._v("å®žé™…ç”Ÿäº§è¿‡ç¨‹ä¸­ï¼Œé‡‡ç”¨çš„æ˜¯"),t("strong",[s._v("åŒMç»“æž„")]),s._v("(åŒä¸»èŠ‚ç‚¹)ã€‚")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://jsd.cdn.zzko.cn/gh/blage-coding/picx-images-hosting@master/20230703/image.7gksd814k0o0.webp",alt:""}})]),s._v(" "),t("ul",[t("li",[s._v("ä¸å­˜åœ¨ç»å¯¹çš„ä¸»èŠ‚ç‚¹æˆ–è€…ä»ŽèŠ‚ç‚¹ã€‚"),t("strong",[s._v("èŠ‚ç‚¹ä¹‹é—´äº’ä¸ºä¸»å¤‡å…³ç³»")]),s._v("ã€‚")]),s._v(" "),t("li",[s._v("å¦‚æžœå®¢æˆ·ç«¯åœ¨AèŠ‚ç‚¹è¿›è¡Œæ›´æ–°æ“ä½œï¼Œé‚£ä¹ˆBèŠ‚ç‚¹å°±ä½œä¸ºä»ŽèŠ‚ç‚¹å°†AèŠ‚ç‚¹å†…å®¹åŒæ­¥åˆ°è‡ªå·±èŠ‚ç‚¹ä¸Šã€‚åä¹‹åœ¨BèŠ‚ç‚¹ä¸Šè¿›è¡Œæ›´æ–°ï¼Œé‚£ä¹ˆAèŠ‚ç‚¹å°±éœ€è¦åŒæ­¥æ›´æ–°ã€‚")])]),s._v(" "),t("p",[t("font",{staticStyle:{background:"rgb(240, 240, 236)"},attrs:{color:"#d94a33"}},[t("strong",[s._v("log_slave_updates")])]),s._v(" ï¼šè®¾ç½®ä¸ºonï¼Œè¡¨ç¤ºå¤‡åº“æ‰§è¡Œrelaylogä¹‹åŽä¼šç”Ÿæˆbinlogã€‚")],1),s._v(" "),t("div",{staticClass:"custom-block tip"},[t("p",{staticClass:"custom-block-title"},[s._v("å¾ªçŽ¯å¤åˆ¶é—®é¢˜")]),s._v(" "),t("p",[s._v("AèŠ‚ç‚¹æ‰§è¡Œå®Œæ›´æ–°è¯­å¥å°†binlogä¼ ç»™å¤‡åº“Bï¼ŒBèŠ‚ç‚¹æ‰§è¡Œæ›´æ–°è¯­å¥çš„åŒæ—¶è‡ªèº«ä¹Ÿä¼šç”Ÿæˆæ–°çš„binlogæ–‡ä»¶ï¼Œå› æ­¤è¿™æ—¶å€™AèŠ‚ç‚¹ç›¸å½“äºŽâ€å¤‡åº“â€œï¼Œåˆè½®åˆ°AèŠ‚ç‚¹åŒæ­¥...è¿™æ ·å°±ä¼šä¸æ–­å¾ªçŽ¯æ‰§è¡ŒåŒä¸€æ¡æ›´æ–°è¯­å¥ã€‚")])]),s._v(" "),t("p",[t("font",{attrs:{color:"red"}},[t("strong",[s._v("MySQLå¯¹äºŽæ¯æ¡å‘½ä»¤ï¼Œç¬¬ä¸€æ¬¡æ‰§è¡Œæ—¶éƒ½ä¼šåœ¨binlogä¸­è®°ä¸‹æ‰€åœ¨çš„server idï¼Œå¹¶ä¸”å°†è¿™æ¡æ—¥å¿—åœ¨ä¼ ç»™å¤‡åº“æ—¶ï¼Œå¤‡åº“å¹¶ä¸ä¼šä¿®æ”¹")])]),s._v("ã€‚è€Œæ¯"),t("strong",[s._v("ä¸ªåº“çš„server idéƒ½æ˜¯ä¸åŒçš„")]),s._v("ï¼Œæ‰€ä»¥å¯ä»¥æ ¹æ®server idæ¥ä¸­æ­¢æ¶è¡Œå¾ªçŽ¯ã€‚å¤‡åº“åœ¨æ‰§è¡Œrelaylogæ—¶ï¼Œ"),t("strong",[s._v("ç”Ÿæˆçš„binlogçš„server idéœ€è¦ä¸Žrelaylogçš„idä¿æŒä¸€è‡´")]),s._v("ã€‚")],1),s._v(" "),t("p",[s._v("æ•´ä¸ªè¿‡ç¨‹å¦‚ä¸‹ï¼š")]),s._v(" "),t("ol",[t("li",[s._v("AèŠ‚ç‚¹æ‰§è¡Œæ›´æ–°æ“ä½œï¼Œå¹¶ç”Ÿæˆbinlogï¼Œé€šè¿‡åŽå°çº¿ç¨‹ä¼ ç»™BèŠ‚ç‚¹")]),s._v(" "),t("li",[s._v("BèŠ‚ç‚¹æ”¶åˆ°åŽï¼Œæ‰§è¡Œrelaylogï¼Œå¹¶ç”Ÿæˆæ–°çš„binlogï¼Œæ­¤æ—¶è¯¥binlogä¸­çš„æ›´æ–°æ“ä½œçš„server idä»ç„¶ä¸ºAèŠ‚ç‚¹çš„id")]),s._v(" "),t("li",[s._v("AèŠ‚ç‚¹ä½œä¸ºBçš„â€ä»ŽèŠ‚ç‚¹â€œï¼Œæ‹¿åˆ°Bä¼ è¿‡æ¥çš„binlogï¼Œ"),t("strong",[s._v("å‘çŽ°é‡Œé¢çš„server idå°±æ˜¯è‡ªå·±çš„server idã€‚å› æ­¤ä¸å†æ‰§è¡Œè¯¥æ—¥å¿—çš„æ›´æ–°æ“ä½œ")]),s._v("ã€‚")])]),s._v(" "),t("p",[s._v("ç„¶è€Œè¿™ä¸ªæ–¹æ³•ä¹Ÿè¿˜æ˜¯å­˜åœ¨ä¸€å®šçš„ç¼ºç‚¹ï¼Œå½“èŠ‚ç‚¹æ•°å¤§äºŽ2æ—¶ï¼Œå¤‡åº“ä¹‹é—´å‘é€çš„binlogæ—¥å¿—åŒæ ·ä¼šé€ æˆæ­»å¾ªçŽ¯ã€‚ä¹Ÿå°±æ˜¯è¯´"),t("strong",[s._v("å‘é€binlogè¿›è¡ŒåŒæ­¥çš„èŠ‚ç‚¹åªèƒ½ç”±ä¸»åº“å‘èµ·")]),s._v("ï¼Œâ€å¤‡åº“â€œä¸Žâ€å¤‡åº“â€œä¹‹é—´ä¸èƒ½å‘èµ·åŒæ­¥ã€‚")]),s._v(" "),t("div",{staticClass:"language-sql line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[s._v("stop slaveï¼›\nCHANGE MASTER "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("TO")]),s._v(" IGNORE_SERVER_IDS"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("server_id_of_B"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("start")]),s._v(" slave"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("p",[s._v("ä»ŽèŠ‚ç‚¹å¯ä»¥æ‰§è¡Œä»¥ä¸Šè¯­å¥ï¼Œå½“å‰ä»ŽèŠ‚ç‚¹å—åˆ°æ—¥å¿—æ›´æ–°åŽï¼Œä¸»èŠ‚ç‚¹è¿˜æ˜¯ä¸€å¼€å§‹çš„ä¸»èŠ‚ç‚¹ï¼Œä»Žè€Œä¸­æ­¢æ—¥å¿—ä¼ æ’­ã€‚")]),s._v(" "),t("h2",{attrs:{id:"_2-mysqlé«˜å¯ç”¨æ€§"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-mysqlé«˜å¯ç”¨æ€§"}},[s._v("#")]),s._v(" 2.MySQLé«˜å¯ç”¨æ€§")]),s._v(" "),t("div",{staticClass:"custom-block tip"},[t("p",{staticClass:"custom-block-title"},[s._v("ä¸»å¤‡å»¶è¿Ÿ")]),s._v(" "),t("p",[s._v("ä¸»åº“Aæ‰§è¡Œå®Œä¸€ä¸ªäº‹åŠ¡å†™å…¥binlogï¼Œè®¡ä¸ºæ—¶åˆ»T1ï¼›å¤‡åº“Bæ”¶åˆ°æ›´æ–°binlogå¹¶æ‰§è¡Œå®Œè¿™ä¸ªæ›´æ–°äº‹åŠ¡ï¼Œè®¡ä¸ºæ—¶åˆ»T2ï¼›")]),s._v(" "),t("p",[s._v("ä¸»å¤‡å»¶è¿Ÿå°±æ˜¯ä¸»åº“æ‰§è¡Œå®Œæˆçš„æ—¶é—´ä¸Žå¤‡åº“å®ŒæˆåŒæ­¥çš„æ—¶é—´ä¹‹å·®ï¼Œä¹Ÿå°±æ˜¯T2-T1ã€‚")])]),s._v(" "),t("p",[s._v("åœ¨å¤‡åº“æ‰§è¡Œä»¥ä¸‹SQLè¯­å¥æŸ¥çœ‹å¤‡åº“å»¶è¿Ÿ"),t("font",{staticStyle:{background:"rgb(240, 240, 236)"},attrs:{color:"#d94a33"}},[t("strong",[s._v("seconds_behind_master")])]),s._v(" çš„å€¼ã€‚å¿½ç•¥ç½‘ç»œå› ç´ ï¼Œä¸»å¤‡å»¶è¿Ÿçš„æ¥æºä¸»è¦æ˜¯"),t("strong",[s._v("å¤‡åº“æ¶ˆè´¹relaylogçš„è¿™æ®µæ—¶é—´")]),s._v("ã€‚")],1),s._v(" "),t("div",{staticClass:"language-sql line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("show")]),s._v(" slave "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("status")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h3",{attrs:{id:"_2-1ä¸»å¤‡å»¶è¿Ÿçš„æ¥æº"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-1ä¸»å¤‡å»¶è¿Ÿçš„æ¥æº"}},[s._v("#")]),s._v(" 2.1ä¸»å¤‡å»¶è¿Ÿçš„æ¥æº")]),s._v(" "),t("ul",[t("li",[t("strong",[s._v("å¤‡åº“æ‰€åœ¨çš„æœºå™¨æ€§èƒ½è¾ƒå·®")])])]),s._v(" "),t("p",[s._v("å¤‡åº“è®¾ç½®â€éžåŒ1â€œçš„æ¨¡å¼ä¸‹ï¼Œæ›´æ–°æ“ä½œå¯¼è‡´çš„å¤§é‡IOPSï¼Œå› æ­¤å¤‡åº“åœ¨â€çƒ‚æœºå™¨â€œä¸ŠæŠ¢å CPUå’Œå†…å­˜èµ„æºæ‰§è¡ŒåŒæ­¥æ›´æ–°äº‹åŠ¡ï¼Œå¯¼è‡´æ›´å¤§çš„ä¸»å¤‡å»¶è¿Ÿã€‚")]),s._v(" "),t("ul",[t("li",[t("strong",[s._v("å¤‡åº“åŽ‹åŠ›å¤§")])])]),s._v(" "),t("p",[s._v("ä¸ºäº†ä¸ç›´æŽ¥å½±å“ä¸šåŠ¡ï¼Œä¸ªåˆ«æŸ¥è¯¢è¯­å¥å¾€å¾€åœ¨å¤‡åº“ä¸Šæ‰§è¡Œï¼Œè€Œ"),t("strong",[s._v("è¿™äº›æŸ¥è¯¢è¯­å¥ä¹Ÿä¼šè€—è´¹å¤§é‡CPUèµ„æº")]),s._v("ï¼Œä»Žè€Œå½±å“æ–°è¿›æ¥çš„åŒæ­¥æ›´æ–°é€Ÿåº¦ã€‚")]),s._v(" "),t("p",[s._v("è§£å†³æ–¹æ¡ˆï¼šâ‘ "),t("strong",[s._v("ä¸€ä¸»å¤šä»Ž")]),s._v("ï¼šä¸€ä¸ªå¤‡åº“ä¸è¡Œé‚£å°±æžå¤šå‡ ä¸ªå¤‡åº“ï¼Œè®©å¤šä¸ªå¤‡åº“åˆ†æ‹…æŸ¥è¯¢åŽ‹åŠ›ã€‚")]),s._v(" "),t("ul",[t("li",[t("strong",[s._v("å¤§äº‹åŠ¡")])])]),s._v(" "),t("p",[s._v("ä¸€ä¸ªå¤§äº‹åŠ¡å¦‚æžœä¸»åº“æ‰§è¡Œéœ€è¦ååˆ†é’Ÿï¼Œé‚£ä¹ˆä»Žåº“æ‰§è¡Œæ—¶ä¹Ÿè‡³å°‘éœ€è¦ååˆ†é’Ÿã€‚ä»Žè€Œé€ æˆè¾ƒå¤§çš„ä¸»å¤‡å»¶è¿Ÿã€‚")]),s._v(" "),t("p",[s._v("å› æ­¤éœ€è¦å°½å¯èƒ½é¿å…å¤§äº‹åŠ¡æ“ä½œï¼Œå¯ä»¥å°†æ•°æ®åˆ†æ‰¹å¤„ç†ã€‚")]),s._v(" "),t("h3",{attrs:{id:"_2-2å¯é æ€§ä¼˜å…ˆç­–ç•¥"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-2å¯é æ€§ä¼˜å…ˆç­–ç•¥"}},[s._v("#")]),s._v(" 2.2å¯é æ€§ä¼˜å…ˆç­–ç•¥")]),s._v(" "),t("p",[s._v("å½“æœ‰æ–°çš„æ›´æ–°æ“ä½œåˆ°æ¥åŽï¼Œæ•´ä¸ªä¸»å¤‡åˆ‡æ¢æµç¨‹å¦‚ä¸‹ï¼š")]),s._v(" "),t("ol",[t("li",[s._v("é¦–å…ˆåˆ¤æ–­å¤‡åº“Bçš„ä¸»å¤‡å»¶è¿Ÿ"),t("font",{staticStyle:{background:"rgb(240, 240, 236)"},attrs:{color:"#d94a33"}},[t("strong",[s._v("seconds_behind_master")])]),s._v("æ˜¯å¦å°äºŽè®¾å®šçš„é˜ˆå€¼ï¼Œå¦‚æžœä¸å°äºŽåˆ™è½®è¯¢é‡è¯•è¿™ä¸€æ­¥ã€‚")],1),s._v(" "),t("li",[s._v("å°†ä¸»åº“Aè®¾ç½®ä¸º"),t("strong",[s._v("åªè¯»æ¨¡å¼")]),s._v("ã€‚â€”â€”æ­¤æ—¶"),t("strong",[s._v("æ•´ä¸ªæ•°æ®åº“ç›´åˆ°æ­¥éª¤5å¤„äºŽçŸ­æš‚çš„ä¸å¯ç”¨çŠ¶æ€")]),s._v("ã€‚")]),s._v(" "),t("li",[s._v("åˆ¤æ–­å¤‡åº“Bçš„"),t("font",{staticStyle:{background:"rgb(240, 240, 236)"},attrs:{color:"#d94a33"}},[t("strong",[s._v("seconds_behind_master")])]),s._v("æ˜¯å¦ç­‰äºŽ0ï¼Œå¦‚æžœä¸ç­‰äºŽ0åˆ™æŒç»­è½®è¯¢ã€‚")],1),s._v(" "),t("li",[s._v("å°†å¤‡åº“Bè®¾ç½®ä¸º"),t("strong",[s._v("å¯è¯»å†™æ¨¡å¼")]),s._v("ã€‚")]),s._v(" "),t("li",[s._v("æŠŠä¸šåŠ¡è¯·æ±‚åˆ‡åˆ°å¤‡åº“B,å®Œæˆ"),t("strong",[s._v("ä¸»ä»Žåˆ‡æ¢")]),s._v("ã€‚")])]),s._v(" "),t("p",[s._v("æ•´ä¸ªè¿‡ç¨‹æœ€è€—æ—¶çš„åœ°æ–¹æ˜¯æ­¥éª¤3ï¼Œå› æ­¤è¿™å°±æ˜¯ä¸ºä»€ä¹ˆå­˜åœ¨ä¸»å¤‡å»¶è¿Ÿdouble checkçš„åŽŸå› ï¼š")]),s._v(" "),t("ul",[t("li",[s._v("ç¬¬ä¸€éè½®è¯¢ä¸»å¤‡å»¶è¿ŸåŽŸå› åœ¨äºŽï¼Œæ­¥éª¤ä¸‰è€—æ—¶æ¯”è¾ƒæ…¢ï¼Œå¦‚æžœè¿›æ¥æ—¶çš„ä¸»å¤‡å»¶è¿Ÿå°±å¾ˆå¤§ï¼Œé‚£ä¹ˆå¾ˆæ—©å°±å…³é—­ä¸»åº“Açš„æƒé™ä¼š"),t("strong",[s._v("å¯¼è‡´æ•´ä¸ªç³»ç»Ÿä¸å¯ç”¨çš„æ—¶é—´å¤§å¤§å»¶é•¿")]),s._v("ã€‚")]),s._v(" "),t("li",[s._v("ç¬¬äºŒéè½®è¯¢çš„ç›®çš„åœ¨äºŽä¿è¯å¯é æ€§ï¼Œç­‰å¾…"),t("strong",[s._v("æ•´ä¸ªå¤‡åº“Bæ‰§è¡Œå®Œæ‰€æœ‰çš„äº‹åŠ¡ï¼Œå®ŒæˆåŒæ­¥")]),s._v("ã€‚")])]),s._v(" "),t("p",[s._v("æ˜¾ç„¶"),t("font",{attrs:{color:"red"}},[t("strong",[s._v("å¯é æ€§ç­–ç•¥èƒ½å¤Ÿä¿è¯ä¸»å¤‡åº“æ•°æ®çš„ä¸€è‡´æ€§ï¼Œä½†æ˜¯éœ€è¦èŠ±è´¹è¾ƒå¤§æ—¶é—´ç­‰å¾…å¤‡åº“å®ŒæˆåŒæ­¥")])]),s._v("ã€‚")],1),s._v(" "),t("h3",{attrs:{id:"_2-3å¯ç”¨æ€§ä¼˜å…ˆç­–ç•¥"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-3å¯ç”¨æ€§ä¼˜å…ˆç­–ç•¥"}},[s._v("#")]),s._v(" 2.3å¯ç”¨æ€§ä¼˜å…ˆç­–ç•¥")]),s._v(" "),t("p",[s._v("åœ¨å¯ç”¨æ€§ä¼˜å…ˆç­–ç•¥ä¸­ï¼Œå°†ä¸Šè¿°æ­¥éª¤4ã€5æå‰æ‰§è¡Œã€‚å³å…ˆåˆ‡æ¢ï¼ŒåŽè¡¥æ•°æ®å®žçŽ°åŒæ­¥ï¼š")]),s._v(" "),t("ol",[t("li",[s._v("å°†å¤‡åº“Bè®¾ç½®ä¸ºå¯è¯»å†™æ¨¡å¼")]),s._v(" "),t("li",[s._v("æŠŠæ‰€æœ‰ä¸šåŠ¡è¯·æ±‚åˆ‡åˆ°å¤‡åº“Bä¸Šï¼Œå®Œæˆä¸»ä»Žåˆ‡æ¢ã€‚")]),s._v(" "),t("li",[s._v("åŒä¸Šæ­¥éª¤ä¸€åˆ°ä¸‰ï¼Œå¤‡åº“Bæ‰§è¡Œä¸»åº“Aä¼ è¿‡æ¥çš„æ›´æ–°æ—¥å¿—ï¼Œå®žçŽ°åŒæ­¥ã€‚")])]),s._v(" "),t("p",[s._v("å¯ç”¨æ€§ç­–ç•¥èƒ½å¤Ÿä¿è¯ç³»ç»Ÿ"),t("font",{attrs:{color:"red"}},[t("strong",[s._v("ä»¥è¾ƒä½Žçš„æ—¶å»¶å®žçŽ°ä¸»å¤‡åˆ‡æ¢ï¼Œé€Ÿåº¦å¿«ï¼Œä½†ç¼ºç‚¹åœ¨äºŽå®¹æ˜“å‡ºçŽ°ä¸»å¤‡æ•°æ®ä¸ä¸€è‡´")])]),s._v("ã€‚")],1),s._v(" "),t("h3",{attrs:{id:"_2-4ä¸»åº“æ–­ç”µåœºæ™¯"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-4ä¸»åº“æ–­ç”µåœºæ™¯"}},[s._v("#")]),s._v(" 2.4ä¸»åº“æ–­ç”µåœºæ™¯")]),s._v(" "),t("p",[s._v("åœºæ™¯ï¼šä¸»åº“çªç„¶æ–­ç”µæˆ–è€…å®•æœºï¼Œå¹¶ä¸”å½“å‰ä¸»å¤‡å»¶è¿Ÿæ˜¯30åˆ†é’Ÿã€‚")]),s._v(" "),t("p",[s._v("è¿™ç§æƒ…å†µä¸‹æ˜¾ç„¶åªèƒ½é‡‡ç”¨å¯ç”¨æ€§ä¼˜å…ˆç­–ç•¥ï¼Œå› ä¸ºå¦‚æžœä¸ç«‹é©¬å°†å½“å‰å¤‡åº“åˆ‡æ¢åˆ°ä¸»åº“ï¼Œå°±ä¼šå¯¼è‡´æ•´ä¸ªç³»ç»Ÿä¸å¯ç”¨ï¼›å¯å³ä½¿æ˜¯åˆ‡æ¢åˆ°äº†å¤‡åº“Bï¼Œä¸»å¤‡å»¶è¿Ÿæœ‰30åˆ†é’Ÿé‚£ä¹ˆå¤§ï¼Œè¿™æ„å‘³ç€"),t("strong",[s._v("30åˆ†é’Ÿå†…æ›´æ–°çš„æ•°æ®ç”¨æˆ·æ˜¯æŸ¥è¯¢ä¸åˆ°çš„")]),s._v("ï¼Œå¯¹ä¸ªåˆ«ä¸šåŠ¡åœºæ™¯è€Œè¨€ï¼Œè¿™ç§çŠ¶æ€ä¹Ÿæ˜¯ä¸èƒ½æŽ¥å—çš„ã€‚")]),s._v(" "),t("p",[s._v("æ€»è€Œè¨€ä¹‹ï¼Œåœ¨ä¿è¯"),t("strong",[s._v("æ•°æ®å¯é æ€§ä¼˜å…ˆ")]),s._v("çš„æ¡ä»¶ä¸‹ï¼ŒMySQLçš„å¯ç”¨æ€§ä¾èµ–äºŽ"),t("strong",[s._v("ä¸»å¤‡å»¶è¿Ÿ")]),s._v("ã€‚"),t("font",{attrs:{color:"red"}},[t("strong",[s._v("å»¶è¿Ÿè¶Šå°ï¼Œä¸»åº“å‡ºæ•…éšœåŽæ¢å¤æœåŠ¡æ‰€éœ€è¦çš„æ—¶é—´è¶ŠçŸ­ï¼Œå¯ç”¨æ€§è¶Šé«˜")])]),s._v("ã€‚")],1),s._v(" "),t("h2",{attrs:{id:"_3-mysqlå¹¶è¡Œå¤åˆ¶"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-mysqlå¹¶è¡Œå¤åˆ¶"}},[s._v("#")]),s._v(" 3.MySQLå¹¶è¡Œå¤åˆ¶")]),s._v(" "),t("p",[s._v("é—®é¢˜ï¼šåœ¨é«˜å¹¶å‘åœºæ™¯ä¸‹ï¼Œå¤§é‡ç”¨æˆ·è¯·æ±‚ä¼šåˆ†åˆ«æ‰“åˆ°ä¸»åº“å’Œå¤‡åº“ã€‚å¯¹ä¸»åº“æ¥è¯´å› ä¸º"),t("strong",[s._v("InnoDBæ”¯æŒæ›´ç»†ç²’åº¦çš„è¡Œé”")]),s._v("ï¼Œå› æ­¤ä¸»åº“å¯¹ä¸šåŠ¡å¹¶å‘åº¦çš„æ”¯æŒè¿˜æ˜¯æ¯”è¾ƒå‹å¥½çš„ï¼›è€Œå¯¹äºŽä»Žåº“ï¼Œå°¤å…¶æ˜¯sqlçº¿ç¨‹æ‰§è¡Œä¸­è½¬æ—¥å¿—æ›´æ–°DATAæ—¶ï¼Œå¦‚æžœä½¿ç”¨"),t("strong",[s._v("å•çº¿ç¨‹")]),s._v("ï¼Œå°±ä¼šäº§ç”Ÿè¾ƒå¤§çš„ä¸»å¤‡å»¶è¿Ÿï¼Œå¤‡åº“æ°¸è¿œè¿½ä¸ä¸Šä¸»åº“ã€‚")]),s._v(" "),t("p",[s._v("è§£å†³é—®é¢˜çš„æ ¸å¿ƒåœ¨äºŽï¼Œå°†"),t("font",{attrs:{color:"red"}},[t("strong",[s._v("å•çº¿ç¨‹sql_threadæ‹†æˆå¤šçº¿ç¨‹è¿›è¡Œå¤åˆ¶")])]),s._v("ã€‚å…·ä½“æ¥è¯´åŽŸæ¥çš„sql_threadä¼šè¢«æ‹†æŽ‰åˆ†æˆ"),t("strong",[s._v("å•ä¸ªcoordinatorçº¿ç¨‹å’Œå¤šä¸ªworkerçº¿ç¨‹")]),s._v("ã€‚å…¶ä¸­coordinatorè´Ÿè´£è¯»å–ä¸­è½¬æ—¥å¿—å’Œåˆ†å‘äº‹åŠ¡ï¼Œè€Œä¸åŒworkerçš„æ‰§è¡Œé¡ºåºä¸èƒ½æŽ§åˆ¶ï¼Œæ‰€ä»¥åˆ†å‘æ—¶éœ€è¦éµå¾ªä»¥ä¸‹åŽŸåˆ™ï¼š")],1),s._v(" "),t("ul",[t("li",[s._v("åŒä¸€ä¸ªå®Œæ•´çš„äº‹åŠ¡ä¸èƒ½è¢«æ‹†å¼€ï¼Œå¿…é¡»æ”¾åˆ°åŒä¸€ä¸ªworkerä¸­ã€‚")]),s._v(" "),t("li",[t("strong",[s._v("åŒä¸€è¡Œçš„ä¸åŒäº‹åŠ¡å¿…é¡»åˆ†å‘åˆ°åŒä¸€ä¸ªworker")]),s._v("ï¼Œä»Žè€Œ"),t("strong",[s._v("æŽ§åˆ¶æ‰§è¡Œé¡ºåº")]),s._v("ï¼Œä¿è¯ä¸»å¤‡ä¸€è‡´ã€‚")])]),s._v(" "),t("p",[s._v("è¦æƒ³è¿…é€Ÿæ ‡è¯†å‡ºè¡¨åå’Œè¡Œåï¼Œæ˜¾ç„¶"),t("font",{attrs:{color:"red"}},[t("strong",[s._v("å“ˆå¸Œè¡¨")])]),s._v("æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„é€‰æ‹©ï¼Œå› ä¸ºå®ƒçš„keyå…·æœ‰å”¯ä¸€æ€§ã€‚ä¸‹é¢ä»‹ç»ä»¥ä¸‹ä¸¤ç§ç­–ç•¥ï¼š")],1),s._v(" "),t("h3",{attrs:{id:"_3-1æŒ‰è¡¨åˆ†å‘è§„åˆ™"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-1æŒ‰è¡¨åˆ†å‘è§„åˆ™"}},[s._v("#")]),s._v(" 3.1æŒ‰è¡¨åˆ†å‘è§„åˆ™")]),s._v(" "),t("p",[s._v("æ ¸å¿ƒæ€æƒ³ï¼š"),t("font",{attrs:{color:"red"}},[t("strong",[s._v("ä¸åŒçš„äº‹åŠ¡å¦‚æžœæ“ä½œåŒä¸€ä¸ªæ•°æ®åº“çš„è¡¨ï¼Œé‚£ä¹ˆå°†è¿™äº›äº‹åŠ¡éƒ½æ”¾åˆ°åŒä¸€ä¸ªworkerè¿›è¡Œ")])]),s._v("ã€‚")],1),s._v(" "),t("p",[s._v("æ¯ä¸€ä¸ªworkerå¯¹åº”ä¸€ä¸ªå“ˆå¸Œè¡¨ï¼Œç”¨äºŽä¿å­˜å½“å‰workerçš„"),t("strong",[s._v("æ‰§è¡Œé˜Ÿåˆ—")]),s._v("ã€‚å“ˆå¸Œè¡¨çš„"),t("strong",[s._v("keyä¸ºæ•°æ®åº“å+è¡¨å")]),s._v("ï¼Œ"),t("strong",[s._v("valueä»£è¡¨è¿™ä¸ªè¡¨çš„æ‰§è¡Œé˜Ÿåˆ—ï¼Œæœ‰å¤šå°‘ä¸ªäº‹åŠ¡åŒæ—¶è¦åœ¨è¿™ä¸ªè¡¨ä¸Šè¿›è¡Œæ“ä½œ")]),s._v("ã€‚")]),s._v(" "),t("div",{staticClass:"custom-block tip"},[t("p",{staticClass:"custom-block-title"},[s._v("workerå†²çª")]),s._v(" "),t("p",[s._v("å¦‚æžœå½“å‰workerçš„äº‹åŠ¡æ‰§è¡Œé˜Ÿåˆ—ä¸­å­˜åœ¨ä¸€ä¸ªäº‹åŠ¡Aï¼Œå®ƒä¸Žå½“å‰äº‹åŠ¡Bæ“ä½œçš„éƒ½æ˜¯åŒä¸€å¼ è¡¨ï¼Œé‚£ä¹ˆåˆ™è¯´å½“å‰äº‹åŠ¡ä¸Žè¯¥workerå†²çªã€‚")])]),s._v(" "),t("p",[t("img",{attrs:{src:"https://jsd.cdn.zzko.cn/gh/blage-coding/picx-images-hosting@master/20230704/image.60umx7gpdt80.webp",alt:""}})]),s._v(" "),t("p",[s._v("è§„åˆ™å¦‚ä¸‹ï¼š")]),s._v(" "),t("ul",[t("li",[s._v("workerä¸­å¦‚æžœæŸä¸ªè¡¨éƒ½å·²ç»å¤åˆ¶æ›´æ–°å®Œæ¯•ï¼Œæ‰§è¡Œé˜Ÿåˆ—ä¸º0ï¼Œé‚£ä¹ˆåˆ™å°†è¯¥è¡¨ä»Žå“ˆå¸Œè¡¨ä¸­çš„keyåˆ é™¤ã€‚")]),s._v(" "),t("li",[s._v("å½“å‰äº‹åŠ¡å¦‚æžœä¸Žå¤šä¸ªworkerå­˜åœ¨å†²çªï¼Œé‚£ä¹ˆcoordinatorçº¿ç¨‹åˆ™è¿›å…¥ç­‰å¾…çŠ¶æ€ã€‚")]),s._v(" "),t("li",[s._v("ç›´åˆ°å½“å‰"),t("strong",[s._v("åªæœ‰ä¸€ä¸ª")]),s._v("workerä¸Žå½“å‰äº‹åŠ¡å­˜åœ¨å†²çªï¼Œé‚£ä¹ˆcoordinatorçº¿ç¨‹ä¼šå°†è¯¥äº‹åŠ¡åˆ†é…ç»™è¯¥workerï¼Œå¹¶åŠ å…¥å†²çªè¡¨çš„æ‰§è¡Œé˜Ÿåˆ—ã€‚")])]),s._v(" "),t("p",[s._v("ðŸ’£æŒ‰è¡¨åˆ†å‘å­˜åœ¨çš„é—®é¢˜ï¼šæŒ‰è¡¨è½¬å‘çš„ç²’åº¦æ¯”è¾ƒå¤§ï¼Œå¦‚æžœ"),t("strong",[s._v("å¤šä¸ªæ“ä½œåŒä¸ªè¡¨çš„é«˜å¹¶å‘")]),s._v("(çƒ­ç‚¹æ•°æ®)è¯·æ±‚æ‰“è¿›æ¥ï¼Œå°±ä¼šå¯¼è‡´æ‰€æœ‰çš„äº‹åŠ¡å †ç§¯è¿›åŒä¸€ä¸ªworkerä¸­ã€‚ä»Žè€Œé€€åŒ–ä¸ºâ€œå•çº¿ç¨‹å¤åˆ¶â€ã€‚")]),s._v(" "),t("h3",{attrs:{id:"_3-2æŒ‰è¡Œåˆ†å‘è§„åˆ™"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-2æŒ‰è¡Œåˆ†å‘è§„åˆ™"}},[s._v("#")]),s._v(" 3.2æŒ‰è¡Œåˆ†å‘è§„åˆ™")]),s._v(" "),t("p",[s._v("æ ¸å¿ƒæ€æƒ³ï¼š"),t("font",{attrs:{color:"red"}},[t("strong",[s._v("å¦‚æžœä¸¤ä¸ªäº‹åŠ¡æ²¡æœ‰æ“ä½œåŒä¸€è¡Œæ•°æ®ï¼Œé‚£ä¹ˆå®ƒä»¬å¯ä»¥åœ¨ä¸åŒçš„workerä¸‹å¹¶è¡Œæ‰§è¡Œ")])]),s._v("ã€‚")],1),s._v(" "),t("p",[s._v("æ³¨æ„ä»…ä½¿ç”¨ä¸»é”®IDä½œä¸ºkeyè™½ç„¶å¯ä»¥å°†ä¸åŒè¡Œçš„äº‹åŠ¡åˆ†å‘åˆ°å¯¹åº”çš„æ¡¶ï¼Œä½†åœ¨â€œ"),t("strong",[s._v("å”¯ä¸€ç´¢å¼•â€ä¸Šä¾ç„¶å­˜åœ¨æ—¶åºçº¦æŸ")]),s._v("ï¼Œä¸ªåˆ«æƒ…å†µä¸‹ä¸åŒçš„è¡Œæ•°æ®ä¹Ÿéœ€è¦æ”¾åœ¨åŒä¸€ä¸ªworkerä¸­é¡ºåºæ‰§è¡Œã€‚å› æ­¤å“ˆå¸Œè¡¨çš„keyéœ€è¦è®¾ç½®å¤šä¸ªé¡¹ï¼š")]),s._v(" "),t("ul",[t("li",[s._v("åº“å+è¡¨å+ä¸»é”®åç§°+ä¸»é”®å­—æ®µå€¼")]),s._v(" "),t("li",[s._v("åº“å+è¡¨å+å”¯ä¸€ç´¢å¼•å­—æ®µåç§°+å”¯ä¸€ç´¢å¼•å­—æ®µå€¼")]),s._v(" "),t("li",[s._v("...")])]),s._v(" "),t("p",[s._v("ä»¥ä¸Šå¤šä¸ªé¡¹éƒ½æ˜¯â€œä¸”â€çš„å…³ç³»ï¼Œä¹Ÿå°±æ˜¯è¯´åªè¦æœ‰ä¸€é¡¹å­˜åœ¨å†²çªï¼Œé‚£ä¹ˆå½“å‰äº‹åŠ¡å°±ä¸Žè¯¥workerå°±å­˜åœ¨å†²çªã€‚æ—¢ç„¶éœ€è¦ä»Žrelaylogä¸­è½¬æ—¥å¿—ä¸­è¯»å–åˆ—å­—æ®µçš„å€¼ï¼Œæ˜¾ç„¶binlogæ ¼å¼åªèƒ½ä½¿ç”¨"),t("strong",[s._v("rowæ ¼å¼")]),s._v("ã€‚")]),s._v(" "),t("p",[s._v("ðŸ’£æŒ‰è¡Œåˆ†å‘å­˜åœ¨çš„é—®é¢˜ï¼š"),t("strong",[s._v("æŒ‰è¡Œåˆ†å‘è™½ç„¶å¹¶å‘åº¦æ›´é«˜")]),s._v("ï¼Œä½†æ˜¯è§£æžbinlog+è®¡ç®—å’Œä¿å­˜å“ˆå¸Œè¿™ä¸¤ä¸ªæ­¥éª¤æˆæœ¬è¾ƒé«˜ï¼Œæ¶ˆè€—è¾ƒå¤šçš„èµ„æºã€‚")]),s._v(" "),t("h3",{attrs:{id:"_3-3å…¶å®ƒè§„åˆ™ç­–ç•¥"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-3å…¶å®ƒè§„åˆ™ç­–ç•¥"}},[s._v("#")]),s._v(" 3.3å…¶å®ƒè§„åˆ™ç­–ç•¥")]),s._v(" "),t("p",[s._v("MySQL5.6ï¼šæŒ‰"),t("strong",[s._v("åº“")]),s._v("åˆ†å‘ã€‚éœ€è¦å°†çƒ­åº¦ç›¸åŒçš„è¡¨å‡æ‘Šåˆ°ä¸åŒçš„æ•°æ®åº“å½“ä¸­ã€‚")]),s._v(" "),t("p",[s._v("MariaDBï¼šåˆ©ç”¨"),t("strong",[s._v("ç»„æäº¤é‡Œäº‹åŠ¡ä¹‹é—´æ“ä½œçš„è¡Œæ•°æ®è‚¯å®šä¸ä¼šäº§ç”Ÿå†²çª")]),s._v("çš„ç‰¹æ€§ï¼Œå¤‡åº“æ¯æ¬¡å°†â€œåŒç»„â€"),t("font",{staticStyle:{background:"rgb(240, 240, 236)"},attrs:{color:"#d94a33"}},[t("strong",[s._v("commit_id")])]),s._v("çš„æ‰€æœ‰äº‹åŠ¡ä¸€æ¬¡æ€§å–å‡ºæ¥ï¼Œå¹¶ç›´æŽ¥åˆ†å‘åˆ°ä¸åŒçš„worker(è‚¯å®šä¸ä¼šå†²çª)ã€‚ç¼ºç‚¹åœ¨äºŽä¸‹ä¸€ç»„çš„æ‰€æœ‰äº‹åŠ¡ï¼Œéœ€è¦ç­‰åˆ°æ‰€æœ‰workerä¸­å½“å‰è¿™ç»„äº‹åŠ¡éƒ½æ›´æ–°å®Œï¼Œæ‰ä¼šå¼€å§‹ä¸‹ä¸€ç»„äº‹åŠ¡çš„æ›´æ–°ã€‚")],1),s._v(" "),t("p",[s._v("MySQL5.7ï¼šä¸Šè¿°ä¸¤ç§ç­–ç•¥çš„èžåˆã€‚æ ¸å¿ƒæ€æƒ³æ˜¯æ—¢ç„¶"),t("strong",[s._v("å¤„äºŽprepareé˜¶æ®µçš„äº‹åŠ¡å°±å·²ç»é€šè¿‡é”å†²çªæ£€æµ‹äº†")]),s._v("ï¼Œå› æ­¤åŒæ—¶å¤„äºŽprepareé˜¶æ®µ(ä»¥åŠåˆ°commité˜¶æ®µ)çš„æ‰€æœ‰äº‹åŠ¡éƒ½æ˜¯å¯ä»¥å¹¶è¡Œçš„ã€‚æœ¬è´¨ä¸Šæ˜¯åœ¨ä¸¤é˜¶æ®µå†™binlogæ—¶ï¼ŒåŒæ—¶æ·»åŠ è®°å½•"),t("font",{staticStyle:{background:"rgb(240, 240, 236)"},attrs:{color:"#d94a33"}},[t("strong",[s._v("commit_id")])]),s._v("ï¼Œå¤‡åº“é€šè¿‡è¿™ä¸ªidæ¥åˆ¤æ–­æ˜¯å¦å¯ä»¥å¹¶è¡Œã€‚æ­¤å¤–å¯ä»¥é€šè¿‡è°ƒèŠ‚binlogä¸¤ä¸ªå‚æ•°ï¼Œåˆ©ç”¨å»¶è¿Ÿæœºåˆ¶ä½¿ç»„æäº¤çš„æ•ˆæžœæœ€å¥½ã€‚")],1),s._v(" "),t("p",[s._v("MySQL5.7.22ï¼šåŸºäºŽ"),t("strong",[s._v("WRITESET")]),s._v("è¿›è¡Œå¤åˆ¶ã€‚ä¸ŽæŒ‰è¡Œåˆ†å‘çš„åŒºåˆ«åœ¨äºŽï¼Œå®ƒæ˜¯åœ¨ä¸»åº“ç”ŸæˆbinlogåŽç›´æŽ¥å°†writesetå†™è¿›åŽ»ï¼Œå› æ­¤å¤‡åº“ä¸éœ€è¦æ‰«æbinlog(å–å‡ºæ¯ä¸ªè¡Œæ•°æ®)ä¹Ÿä¸éœ€è¦è®¡ç®—ã€‚åˆ¤æ–­å†²çªæ—¶ï¼Œ"),t("strong",[s._v("åªè¦ä¸¤ä¸ªäº‹åŠ¡ä¹‹é—´çš„writesetæ²¡æœ‰äº¤é›†ï¼Œé‚£ä¹ˆè¿™ä¸¤ä¸ªäº‹åŠ¡å°±å¯ä»¥åˆ†åˆ«æ”¾å…¥ä¸åŒçš„workerå¹¶è¡Œæ‰§è¡Œ")]),s._v("ã€‚")]),s._v(" "),t("p",[s._v("5.7.22æ ¹æ®å‚æ•°"),t("font",{staticStyle:{background:"rgb(240, 240, 236)"},attrs:{color:"#d94a33"}},[t("strong",[s._v("binlog-transaction-dependency-tracking")])]),s._v("è®¾ç½®ä¸åŒçš„ç­–ç•¥ï¼š")],1),s._v(" "),t("ul",[t("li",[s._v("COMMIT_ORDERï¼šæ ¹æ®åŒæ—¶è¿›å…¥prepareçš„äº‹åŠ¡æ¥åˆ¤æ–­æ˜¯å¦å¯ä»¥å¹¶è¡Œã€‚")]),s._v(" "),t("li",[s._v("WRITESETï¼šè®¡ç®—å‡ºè¿™è¡Œæ•°æ®çš„æ‰€æœ‰å“ˆå¸Œå€¼ï¼Œå¹¶ç»„æˆé›†åˆã€‚")]),s._v(" "),t("li",[s._v("WRITESET_SESSIONï¼šåœ¨ä¸Šé¢åŸºç¡€ä¸Šå¤šäº†ä¸€ä¸ªçº¦æŸï¼Œåœ¨ä¸»åº“ä¸­åŒä¸€ä¸ªçº¿ç¨‹"),t("strong",[s._v("å…ˆåŽæ‰§è¡Œçš„ä¸¤ä¸ªäº‹åŠ¡")]),s._v("ï¼Œåœ¨å¤‡åº“æ‰§è¡ŒåŒæ­¥æ—¶ï¼Œéœ€è¦ä¿è¯ç›¸åŒçš„å…ˆåŽé¡ºåº(ç›¸å½“äºŽè¦æ”¾åœ¨åŒä¸€ä¸ªworker)ã€‚")])]),s._v(" "),t("h2",{attrs:{id:"_4-mysqlä¸€ä¸»å¤šä»Žä¸‹çš„ä¸»å¤‡åˆ‡æ¢"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_4-mysqlä¸€ä¸»å¤šä»Žä¸‹çš„ä¸»å¤‡åˆ‡æ¢"}},[s._v("#")]),s._v(" 4.MySQLä¸€ä¸»å¤šä»Žä¸‹çš„ä¸»å¤‡åˆ‡æ¢")]),s._v(" "),t("p",[s._v("Aä¸ŽA'äº’ä¸ºä¸»å¤‡åº“ï¼ŒBå’ŒCå‡ä¸ºä»Žåº“ã€‚å½“ä¸»åº“Aå‘ç”Ÿæ•…éšœæ—¶ï¼Œå¤‡åº“A'ä¼šæˆä¸ºæ–°çš„ä¸»åº“ï¼ŒåŒæ—¶æ‰€æœ‰ä»Žåº“æ”¹æŽ¥æ–°çš„ä¸»åº“ã€‚")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://jsd.cdn.zzko.cn/gh/blage-coding/picx-images-hosting@master/20230704/image.44h1bgyxzrc0.webp",alt:""}})]),s._v(" "),t("p",[s._v("å…¶ä¸­ä»Žåº“èŠ‚ç‚¹Bæ›´æ¢ä¸»èŠ‚ç‚¹æ—¶ï¼Œéœ€è¦æ‰§è¡Œå¦‚ä¸‹"),t("strong",[s._v("change master")]),s._v("å‘½ä»¤ï¼ŒåŒ…æ‹¬æŒ‡æ˜Žæ–°ä¸»èŠ‚ç‚¹A'çš„IPã€ç«¯å£ã€ç”¨æˆ·åã€å¯†ç ï¼ŒåŒæ—¶è¿˜éœ€è¦æŒ‡æ˜ŽåŒæ­¥ä½ç‚¹ï¼Œå³"),t("font",{attrs:{color:"red"}},[t("strong",[s._v("ä¸»åº“å¯¹åº”çš„æ–‡ä»¶åå’Œæ—¥å¿—åç§»é‡")])]),s._v("ã€‚")],1),s._v(" "),t("div",{staticClass:"language-sql line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[s._v("CHANGE MASTER "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("TO")]),s._v(" \nMASTER_HOST"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("$host_name \nMASTER_PORT"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("$port \nMASTER_USER"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("$user_name \nMASTER_PASSWORD"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("$password \nMASTER_LOG_FILE"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("$master_log_name \nMASTER_LOG_POS"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("$master_log_pos  \n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br")])]),t("h3",{attrs:{id:"_4-1åŸºäºŽåŒæ­¥ä½ç‚¹çš„ä¸»å¤‡åˆ‡æ¢"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_4-1åŸºäºŽåŒæ­¥ä½ç‚¹çš„ä¸»å¤‡åˆ‡æ¢"}},[s._v("#")]),s._v(" 4.1åŸºäºŽåŒæ­¥ä½ç‚¹çš„ä¸»å¤‡åˆ‡æ¢")]),s._v(" "),t("div",{staticClass:"custom-block tip"},[t("p",{staticClass:"custom-block-title"},[s._v("åŒæ­¥ä½ç‚¹")]),s._v(" "),t("p",[s._v("ä»Žåº“æ‰€éœ€è¦åŒæ­¥çš„ä¸»åº“å¯¹åº”æ–‡ä»¶åå’Œæ—¥å¿—åç§»é‡")])]),s._v(" "),t("p",[s._v("é—®é¢˜ï¼šä¸»åº“Aå‘ç”Ÿæ•…éšœæ—¶ï¼Œå–æ•…éšœæ—¶åˆ»Tï¼Œç„¶åŽç”¨å·¥å…·æ‰«æå¤‡åº“A' çš„æ–‡ä»¶ï¼Œæœ€åŽå¾—åˆ°åœ¨Tæ—¶åˆ»çš„ä½ç‚¹ã€‚ç„¶åŽå¾—åˆ°çš„ç»“æžœå¹¶ä¸ç²¾å‡†ï¼Œå› ä¸ºä¸»åº“Aå‘ç”Ÿæ•…éšœåŽï¼Œæ‰€æœ‰"),t("strong",[s._v("ä»Žåº“å’Œå¤‡åº“å¹¶ä¸æ˜¯ç»å¯¹é™æ­¢")]),s._v("ï¼Œå¯èƒ½ä¼šå­˜åœ¨"),t("strong",[s._v("é‡å¤æ‰§è¡Œäº‹åŠ¡")]),s._v("çš„æƒ…å†µã€‚")]),s._v(" "),t("p",[s._v("å¸¸ç”¨ä¸¤ç§è§£å†³æ–¹æ¡ˆå¦‚ä¸‹ï¼š")]),s._v(" "),t("ul",[t("li",[t("p",[s._v("æ¯æ¬¡ä»Žåº“Bå¦‚æžœå› æ‰§è¡Œé‡å¤äº‹åŠ¡å‡ºçŽ°æŠ¥é”™ï¼Œåˆ™"),t("strong",[s._v("æ‰§è¡Œä»¥ä¸‹SQLè¯­å¥ä¸»åŠ¨è·³è¿‡ä¸€ä¸ªäº‹åŠ¡ï¼Œç›´åˆ°ä¸å†å‡ºçŽ°æŠ¥é”™ä¸ºæ­¢")]),s._v("ã€‚")]),s._v(" "),t("div",{staticClass:"language-sql line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("set")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("global")]),s._v(" sql_slave_skip_counter"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("start")]),s._v(" slave"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])])]),s._v(" "),t("li",[t("p",[s._v("è®¾ç½®"),t("font",{staticStyle:{background:"rgb(240, 240, 236)"},attrs:{color:"#d94a33"}},[t("strong",[s._v("slave_skip_errors")])]),s._v("å‚æ•°ï¼Œ"),t("strong",[s._v("ç›´æŽ¥è·³è¿‡æŒ‡å®šçš„é”™è¯¯ç ")]),s._v("ã€‚å½“æ–°çš„ä¸»å¤‡å…³ç³»ç¡®ç«‹åŽï¼Œç¨³å®šä¸€æ®µæ—¶é—´ç¡®è®¤æ–°çš„ä¸»ä»Žå…³ç³»åŽï¼Œå†å¼€å¯é”™è¯¯æ‹¦æˆªã€‚")],1)])]),s._v(" "),t("h3",{attrs:{id:"_4-2åŸºäºŽå…¨å±€äº‹åŠ¡idçš„ä¸»å¤‡åˆ‡æ¢"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_4-2åŸºäºŽå…¨å±€äº‹åŠ¡idçš„ä¸»å¤‡åˆ‡æ¢"}},[s._v("#")]),s._v(" 4.2åŸºäºŽå…¨å±€äº‹åŠ¡IDçš„ä¸»å¤‡åˆ‡æ¢")]),s._v(" "),t("p",[s._v("GTIDï¼šå…¨å±€äº‹åŠ¡IDï¼Œç”¨äºŽæ¯ä¸ªäº‹åŠ¡çš„å”¯ä¸€æ ‡è¯†ã€‚æ ¼å¼ä¸ºGTID="),t("font",{staticStyle:{background:"rgb(240, 240, 236)"},attrs:{color:"#d94a33"}},[t("strong",[s._v("server_uuid ï¼šgno")])])],1),s._v(" "),t("p",[t("font",{staticStyle:{background:"rgb(240, 240, 236)"},attrs:{color:"#d94a33"}},[t("strong",[s._v("gno")])]),s._v("ï¼šæ¯æ¬¡"),t("strong",[s._v("æäº¤äº‹åŠ¡")]),s._v("æ—¶æ‰ä¼šåˆ†é…ç»™è¿™ä¸ªäº‹åŠ¡ï¼Œå¹¶åŠ ä¸€ã€‚å› æ­¤GTIDå¾€å¾€æ˜¯è¿žç»­çš„ã€‚")],1),s._v(" "),t("p",[t("font",{staticStyle:{background:"rgb(240, 240, 236)"},attrs:{color:"#d94a33"}},[t("strong",[s._v("transaction_id")])]),s._v("ï¼šä¹Ÿå«äº‹åŠ¡IDï¼Œåªè¦"),t("strong",[s._v("äº‹åŠ¡æ‰§è¡Œäº†å°±ä¼šåˆ†é…")]),s._v("ã€‚å³ä½¿è¿™ä¸ªäº‹åŠ¡å›žæ»šäº†ï¼Œä¸‹ä¸€ä¸ªäº‹åŠ¡IDä¹Ÿä¼šç»§ç»­é€’å¢žã€‚")],1),s._v(" "),t("p",[s._v("æ¯ä¸€ä¸ªMySQLæ•°æ®åº“å®žä¾‹éƒ½ä¼šç»´æŠ¤ä¸€ä¸ª"),t("font",{attrs:{color:"red"}},[t("strong",[s._v("GTIDé›†åˆï¼Œé‡Œé¢åŒ…å«è¯¥èŠ‚ç‚¹æ‰§è¡Œè¿‡çš„æ‰€æœ‰äº‹åŠ¡IDæ ‡è¯†")])]),s._v("ã€‚")],1),s._v(" "),t("p",[s._v("ä»ŽèŠ‚ç‚¹è¦ä½¿ç”¨GTIDæ¨¡å¼å®Œæˆä¸»å¤‡åˆ‡æ¢ï¼Œä¸éœ€è¦æŒ‡å®šæ–‡ä»¶å+åç½®è¿™ä¸¤ä¸ªä½ç‚¹ä¿¡æ¯ï¼Œåªéœ€è¦æŒ‡å®šä½¿ç”¨GTIDåè®®ï¼Œå…·ä½“æµç¨‹å¦‚ä¸‹ï¼š")]),s._v(" "),t("div",{staticClass:"language-sql line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[s._v("master_auto_position"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("ol",[t("li",[s._v("ä»ŽèŠ‚ç‚¹BæŒ‡å®šA' ä½œä¸ºä¸»åº“ï¼Œå¼€å§‹è¿›è¡Œä¸»å¤‡åˆ‡æ¢ã€‚")]),s._v(" "),t("li",[s._v("BèŠ‚ç‚¹å°†è‡ªå·±èŠ‚ç‚¹ä¸Šæ‰§è¡Œè¿‡çš„æ‰€æœ‰äº‹åŠ¡é›†åˆset_bå‘é€ç»™ä¸»åº“Aâ€™ ã€‚")]),s._v(" "),t("li",[s._v("ä¸»åº“A' è®¡ç®—å‡ºAâ€˜èŠ‚ç‚¹ä¸ŽBèŠ‚ç‚¹çš„äº‹åŠ¡IDé›†åˆçš„å·®é›†ï¼ˆå³åœ¨Aâ€™é›†åˆä½†ä¸åœ¨Bé›†åˆçš„äº‹åŠ¡IDï¼‰ï¼Œå¹¶æ£€æŸ¥A'æœ¬åœ°binlogæ–‡ä»¶çš„äº‹åŠ¡æ˜¯å¦åŒ…å«è¿™ä¸ªå·®é›†ï¼š\n"),t("ul",[t("li",[s._v("å¦‚æžœä¸åŒ…å«ï¼Œåˆ™è¯´æ˜ŽA' å°†Béœ€è¦åŒæ­¥çš„äº‹åŠ¡æ—¥å¿—ç»™åˆ æŽ‰äº†ï¼Œè¿”å›žé”™è¯¯(èŽ·å–ä¸»åº“å·²åˆ é™¤gtid_purgedï¼Œå¹¶åœ¨ä»Žåº“æŒ‡å®šæ–°çš„GTIDåŒæ­¥èµ·ç‚¹)ã€‚")]),s._v(" "),t("li",[s._v("å¦‚æžœå…¨éƒ¨åŒ…å«ï¼Œåˆ™ä»Žbinlogæ–‡ä»¶ä¸­"),t("font",{attrs:{color:"red"}},[t("strong",[s._v("æ‰¾å‡ºç¬¬ä¸€ä¸ªä¸åœ¨set_bçš„äº‹åŠ¡ï¼Œä½œä¸ºBèŠ‚ç‚¹çš„åŒæ­¥ä½ç‚¹")])]),s._v("ã€‚")],1)])]),s._v(" "),t("li",[s._v("A' èŠ‚ç‚¹ä»Žè¿™ä¸ªäº‹åŠ¡å¼€å§‹ï¼Œåœ¨binlogä¸­è¯»å–åŽç»­çš„æ–‡æ¡£å†…å®¹ï¼Œå¹¶å‘é€ç»™ä»Žåº“Bè¿›è¡ŒåŒæ­¥ã€‚")])]),s._v(" "),t("p",[s._v("ðŸ’¡"),t("strong",[s._v("GTIDæ¨¡å¼çš„å¥½å¤„")]),s._v("ï¼šå·®é›†è®¡ç®—ä¿è¯äº†"),t("font",{attrs:{color:"red"}},[t("strong",[s._v("ä»Žåº“æ²¡æœ‰æ‰§è¡Œè¿‡çš„äº‹åŠ¡æ—¥å¿—ï¼Œä¸»åº“ä¸€å®šæœ‰å¹¶ä¸”æ˜¯å®Œæ•´çš„")])]),s._v("ã€‚å¦åˆ™è¿™ä¸¤ä¸ªåº“ä¹‹é—´å°±ä¸èƒ½å»ºç«‹ä¸»å¤‡å…³ç³»ã€‚")],1),s._v(" "),t("h3",{attrs:{id:"_4-3gtidä¸Žåœ¨çº¿ddl"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_4-3gtidä¸Žåœ¨çº¿ddl"}},[s._v("#")]),s._v(" 4.3GTIDä¸Žåœ¨çº¿DDL")]),s._v(" "),t("p",[s._v("åœºæ™¯ï¼šå› ä¸ºç´¢å¼•ç¼ºå¤±å¯¼è‡´çš„æ€§èƒ½é—®é¢˜ï¼Œåœ¨ä¸šåŠ¡é«˜å³°æœŸæ—¶å¯¹"),t("strong",[s._v("ä¸»åº“")]),s._v("é€šè¿‡online DDLæ·»åŠ ç´¢å¼•ï¼Œå¯èƒ½ä¼šå¯¹ä¸»åº“é€ æˆå½±å“ã€‚æ‰€ä»¥æœ€ä¼˜å®žè·µæ˜¯"),t("strong",[s._v("åœ¨å¤‡åº“æ·»åŠ ç´¢å¼•åŽï¼Œå†è¿›è¡Œä¸»å¤‡åˆ‡æ¢")]),s._v("ã€‚")]),s._v(" "),t("p",[s._v("åœ¨äº’ä¸ºä¸»å¤‡çš„åŒMç»“æž„ä¸‹ï¼Œå½“å‰ä¸»åº“Aï¼Œå¤‡åº“ä¸ºBï¼›")]),s._v(" "),t("ol",[t("li",[t("p",[s._v("é¦–å…ˆä¸»åº“Aæ‰§è¡Œstop slaveï¼Œåœæ­¢å†™å…¥ä¸­è½¬æ—¥å¿—ï¼Œæš‚åœåŒæ­¥çº¿ç¨‹ã€‚")])]),s._v(" "),t("li",[t("p",[s._v("ç„¶åŽåœ¨å¤‡åº“Bæ‰§è¡ŒDDLè¯­å¥ï¼Œæ­¤æ—¶å¹¶ä¸éœ€è¦å…³é—­binlog(è®¾ç½® set_log_bin=off)ï¼Œä¾æ—§å°†DDLè¯­å¥å†™åˆ°binlogã€‚")])]),s._v(" "),t("li",[t("p",[s._v("è®°å½•ä¸‹å¤‡åº“Bè¯¥æ¡DDLè¯­å¥å¯¹åº”çš„GTIDã€‚")])]),s._v(" "),t("li",[t("p",[s._v("æ‰§è¡Œä»¥ä¸‹è¯­å¥åºåˆ—ï¼Œä½¿ä¸»åº“Açš„GTIDé›†åˆä¸­å†™å…¥DDLå¯¹åº”çš„GTIDï¼Œä¿è¯ä¸»åº“Aæ­¤æ—¶ä¸ä¼šæ‰§è¡ŒDDLå½±å“çº¿ä¸Šï¼š")]),s._v(" "),t("div",{staticClass:"language-sql line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("set")]),s._v(" GTID_NEXT"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"server_uuid_of_Y:gno"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("begin")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("commit")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("set")]),s._v(" gtid_next"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("automatic"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("start")]),s._v(" slave"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br")])])]),s._v(" "),t("li",[t("p",[s._v("æ‰§è¡Œä¸»å¤‡åˆ‡æ¢ã€‚å› ä¸ºDDLè¯­å¥å¯¹åº”äº‹åŠ¡å·²ç»è¢«è·³è¿‡äº†ï¼Œå› æ­¤Aåº“è¦æƒ³æ·»åŠ ç´¢å¼•åŒæ­¥ï¼Œåªèƒ½å†æ‰§è¡Œä¸€éä¸Šè¿°1-5æ­¥éª¤ï¼Œ"),t("strong",[s._v("æ‰‹åŠ¨")]),s._v("åœ¨å¤‡åº“(å…ˆå‰çš„ä¸»åº“)ä¸­æ·»åŠ å¯¹åº”çš„ç´¢å¼•ã€‚")])])]),s._v(" "),t("p",[s._v("âœ¨é€šè¿‡æäº¤"),t("font",{attrs:{color:"red"}},[t("strong",[s._v("æŒ‡å®šGTIDçš„ç©ºäº‹åŠ¡")])]),s._v("ï¼Œå¯ä»¥å°†"),t("strong",[s._v("å…¶å®ƒå…¨å±€äº‹åŠ¡IDå†™å…¥å½“å‰åº“çš„GTIDé›†åˆå½“ä¸­")]),s._v("ï¼Œä»Žè€Œé¿å…æ‰§è¡Œæˆ–è€…è·³è¿‡æŸäº›äº‹åŠ¡ã€‚")],1),s._v(" "),t("h2",{attrs:{id:"_5-mysqlè¯»å†™åˆ†ç¦»"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_5-mysqlè¯»å†™åˆ†ç¦»"}},[s._v("#")]),s._v(" 5.MySQLè¯»å†™åˆ†ç¦»")]),s._v(" "),t("div",{staticClass:"custom-block tip"},[t("p",{staticClass:"custom-block-title"},[s._v("è¿‡æœŸè¯»")]),s._v(" "),t("p",[s._v("å®¢æˆ·ç«¯æ‰§è¡Œå®Œä¸€ä¸ªæ›´æ–°äº‹åŠ¡åŽï¼Œç«‹åˆ»å‘èµ·ä¸€ä¸ªæŸ¥è¯¢(æ‰“åˆ°ä»Žåº“)ï¼Œå› ä¸ºå­˜åœ¨ä¸»å¤‡å»¶è¿Ÿä»Žåº“è¿˜æ²¡æœ‰å®Œæˆæ›´æ–°ï¼Œå¯¼è‡´å®¢æˆ·ç«¯è¯»åˆ°çš„æ˜¯æ›´æ–°å‰çš„æ—§æ•°æ®ã€‚")])]),s._v(" "),t("p",[s._v("ä¸‹é¢ç®€è¦ä»‹ç»å’Œåˆ†æžå‡ ç§å¤„ç†â€œè¿‡æœŸè¯»â€çš„æ–¹æ¡ˆã€‚")]),s._v(" "),t("h3",{attrs:{id:"æ–¹æ¡ˆä¸€ã€å¼ºåˆ¶èµ°ä¸»åº“"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#æ–¹æ¡ˆä¸€ã€å¼ºåˆ¶èµ°ä¸»åº“"}},[s._v("#")]),s._v(" æ–¹æ¡ˆä¸€ã€å¼ºåˆ¶èµ°ä¸»åº“")]),s._v(" "),t("p",[s._v("æ–¹æ¡ˆï¼šæ ¹æ®ä¸åŒä¸šåŠ¡çš„æŸ¥è¯¢è¯·æ±‚æ¥åˆ’åˆ†ï¼Œ"),t("font",{attrs:{color:"red"}},[t("strong",[s._v("å¯¹äºŽå¼ºä¸€è‡´æ€§è¦æ±‚çš„ç»“æžœï¼Œåˆ™å¿…é¡»ç›´æŽ¥èµ°ä¸»åº“")])]),s._v("ï¼›è€Œå¯¹äºŽå¼±ä¸€è‡´æ€§è¦æ±‚çš„æŸ¥è¯¢ç»“æžœï¼Œåˆ™å¯ä»¥èµ°ä»Žåº“ã€‚")],1),s._v(" "),t("p",[s._v("å¼ºåˆ¶èµ°ä¸»åº“æ”¾å¼ƒäº†æ•°æ®åº“çš„å¯æ‰©å±•æ€§ï¼Œå¯¼è‡´è¯»å†™åŽ‹åŠ›å…¨éƒ¨æ‰“åˆ°ä¸»åº“ã€‚ä½†è¿™ç§æ–¹æ³•ä¹Ÿæ˜¯"),t("strong",[s._v("ç”¨çš„æœ€å¤š")]),s._v("çš„ã€‚")]),s._v(" "),t("h3",{attrs:{id:"æ–¹æ¡ˆäºŒã€sleepæ–¹æ¡ˆ"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#æ–¹æ¡ˆäºŒã€sleepæ–¹æ¡ˆ"}},[s._v("#")]),s._v(" æ–¹æ¡ˆäºŒã€sleepæ–¹æ¡ˆ")]),s._v(" "),t("p",[s._v("æ–¹æ¡ˆï¼šè®¾å®šä¸€ä¸ªä¼‘çœ æ—¶é•¿ï¼Œè¯»ä»Žåº“ä¹‹å‰sleepä¸€ä¸‹(æˆ–è€…å‰ç«¯è®¾ç½®ä¸€ä¸ªäº¤äº’ç•Œé¢å’ŒæŒ‰é’®)ï¼Œå¤§å¤šæ•°æƒ…å†µä¸‹ç»è¿‡è¿™ä¸ªæ—¶é—´é—´éš”åŽï¼Œå¯ä»¥æ‹¿åˆ°æœ€æ–°çš„æ•°æ®ã€‚")]),s._v(" "),t("p",[s._v("è¿™ç§æ–¹æ³•å­˜åœ¨çš„é—®é¢˜åœ¨äºŽï¼ŒæŸ¥è¯¢å‰äººä¸ºè®¾å®šçš„å»¶è¿Ÿæ—¶é—´ä¸å¥½ç²¾å‡†ç¡®å®šä¸‹æ¥ã€‚")]),s._v(" "),t("h3",{attrs:{id:"æ–¹æ¡ˆä¸‰ã€åˆ¤æ–­ä¸»å¤‡æ— å»¶è¿Ÿçš„æ–¹æ¡ˆ"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#æ–¹æ¡ˆä¸‰ã€åˆ¤æ–­ä¸»å¤‡æ— å»¶è¿Ÿçš„æ–¹æ¡ˆ"}},[s._v("#")]),s._v(" æ–¹æ¡ˆä¸‰ã€åˆ¤æ–­ä¸»å¤‡æ— å»¶è¿Ÿçš„æ–¹æ¡ˆ")]),s._v(" "),t("ul",[t("li",[s._v("æ ¹æ®"),t("font",{staticStyle:{background:"rgb(240, 240, 236)"},attrs:{color:"#d94a33"}},[t("strong",[s._v("seconds_behind_master")])]),s._v("åˆ¤æ–­")],1)]),s._v(" "),t("p",[s._v("æ¯æ¬¡æ‰§è¡ŒæŸ¥è¯¢ä¹‹å‰å…ˆé€šè¿‡show slave statusæŸ¥çœ‹ä»Žåº“çš„ä¸»å¤‡å»¶è¿Ÿï¼Œå¦‚æžœä¸ç­‰äºŽ0ï¼Œé‚£ä¹ˆä¸€ç›´ç­‰ç›´åˆ°ä¸»å¤‡å»¶è¿Ÿä¸º0æ‰åœ¨ä»Žåº“ä¸Šæ‰§è¡ŒæŸ¥è¯¢æ“ä½œã€‚")]),s._v(" "),t("ul",[t("li",[s._v("å¯¹æ¯”ä½ç‚¹")])]),s._v(" "),t("p",[s._v("å¦‚æžœä¸»åº“å’Œä»Žåº“çš„"),t("strong",[s._v("æ–‡ä»¶å")]),s._v("å’Œ"),t("strong",[s._v("æ›´æ–°åç½®")]),s._v("ä¸¤ç»„ä½ç‚¹å€¼å®Œå…¨ç›¸åŒï¼Œé‚£ä¹ˆè¡¨ç¤ºä»Žåº“å·²ç»å®Œå…¨åŒæ­¥å®Œæˆã€‚")]),s._v(" "),t("ul",[t("li",[s._v("å¯¹æ¯”GTID")])]),s._v(" "),t("p",[s._v("åˆ¤æ–­ä¸»åº“å’Œä»Žåº“çš„GTIDé›†åˆã€ä»¥åŠæ‰§è¡Œå®Œæˆçš„GTIDé›†åˆã€‚å¦‚æžœä¸»ä»Žåº“ä¸¤ä¸ªé›†åˆç›¸åŒï¼Œåˆ™è¡¨ç¤ºå¤‡åº“å·²ç»åŒæ­¥å®Œæˆã€‚")]),s._v(" "),t("p",[s._v("å­˜åœ¨çš„é—®é¢˜ï¼šä¸»åº“å·²ç»æ‰§è¡Œå®Œæ¯•ï¼Œå¹¶å·²ç»å‘å®¢æˆ·ç«¯å‘é€äº†æäº¤ç¡®è®¤(è¿˜æ²¡æœ‰ç”ŸæˆGTID)ï¼Œä½†æ˜¯æ­¤æ—¶â€œ"),t("strong",[s._v("å¤‡åº“è¿˜æ²¡æœ‰æ”¶åˆ°æ—¥å¿—")]),s._v("â€ï¼Œæ­¤æ—¶è™½ç„¶å¤‡åº“æŸ¥è¯¢ä¸»å¤‡å»¶è¿Ÿå‘çŽ°æ˜¯0ï¼Œä½†æ˜¯å¤‡åº“è¿˜æ²¡æœ‰æ‰§è¡Œæ›´æ–°åŒæ­¥ã€‚è€Œè¿™ç§æƒ…å†µä¸‹å¯¼è‡´çš„è¿‡æœŸè¯»ç”¨ä¸Šé¢ä¸‰ç§æ–¹æ³•å‡å¤±æ•ˆã€‚")]),s._v(" "),t("h3",{attrs:{id:"æ–¹æ¡ˆå››ã€semi-sync"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#æ–¹æ¡ˆå››ã€semi-sync"}},[s._v("#")]),s._v(" æ–¹æ¡ˆå››ã€semi-sync")]),s._v(" "),t("p",[s._v("å¯ç”¨åŠåŒæ­¥å¤åˆ¶åŽï¼Œèƒ½å¤Ÿä¿è¯"),t("font",{attrs:{color:"red"}},[t("strong",[s._v("æ‰€æœ‰å‘å®¢æˆ·ç«¯å‘é€ç¡®è®¤çš„äº‹åŠ¡ï¼Œå¤‡åº“éƒ½å·²ç»æ”¶åˆ°è¯¥äº‹åŠ¡çš„æ—¥å¿—")])]),s._v("ã€‚")],1),s._v(" "),t("p",[s._v("â‘ è§£å†³ä¸»åº“çªç„¶æ–­ç”µé—®é¢˜ï¼šè¦ä¹ˆä¸»å¤‡éƒ½å·²ç»æ”¶åˆ°åŒæ­¥æ—¥å¿—ï¼Œè¦ä¹ˆå®¢æˆ·ç«¯æ²¡æ”¶åˆ°ç›´æŽ¥å›žæ»šã€‚ä¿è¯ä¸»ä»Žæ•°æ®ä¸€è‡´æ€§ã€‚")]),s._v(" "),t("p",[s._v("â‘¡è§£å†³ä¸Šè¿°è¿‡æœŸè¯»çŠ¶æ€ï¼šé€šè¿‡semi-syncå®¢æˆ·ç«¯ackå’Œä½ç‚¹å¯¹æ¯”åˆ¤æ–­åŒé‡æ¡ä»¶ï¼Œå¯ä»¥ä¿è¯ä»Žåº“ä¸æ˜¯è¿‡æœŸè¯»ã€‚")]),s._v(" "),t("p",[s._v("ä½†æ˜¯åŠåŒæ­¥ä¸èƒ½è§£å†³ä»¥ä¸‹é—®é¢˜ï¼š")]),s._v(" "),t("p",[s._v("â‘ ä¸€ä¸»å¤šä»Žçš„æƒ…å†µä¸‹ï¼Œä¸»åº“åªè¦æ”¶åˆ°ä¸€ä¸ªä»Žåº“çš„ackç«‹åˆ»ä¼šå‘å®¢æˆ·ç«¯å‘é€ç¡®è®¤ã€‚å› æ­¤"),t("strong",[s._v("åŠåŒæ­¥æ–¹å¼ä¸èƒ½ä¿è¯æ‰€æœ‰ä»Žåº“éƒ½å¤„äºŽæœ€æ–°çš„çŠ¶æ€")]),s._v("ã€‚")]),s._v(" "),t("p",[s._v("â‘¡â“åœ¨æŒç»­å»¶è¿Ÿçš„æƒ…å†µï¼Œå¯èƒ½å‡ºçŽ°è¿‡åº¦ç­‰å¾…ã€‚")]),s._v(" "),t("h3",{attrs:{id:"æ–¹æ¡ˆäº”ã€ç­‰ä¸»åº“ä½ç‚¹"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#æ–¹æ¡ˆäº”ã€ç­‰ä¸»åº“ä½ç‚¹"}},[s._v("#")]),s._v(" æ–¹æ¡ˆäº”ã€ç­‰ä¸»åº“ä½ç‚¹")]),s._v(" "),t("p",[s._v("å€ŸåŠ©SQLè¯­å¥ï¼ŒèŽ·å–"),t("strong",[s._v("ä»Žåº“åŒæ­¥åˆ°æŒ‡å®šçš„ä¸»åº“ä½ç‚¹")]),s._v("æ‰€éœ€è¦çš„æ—¶é—´ã€‚è¯¥æ–¹æ³•æ˜¯ä¸€ä¸ªé˜»å¡žæ–¹æ³•ï¼Œå¯ä»¥è®¾ç½®è¶…æ—¶æ—¶é—´ã€‚")]),s._v(" "),t("p",[s._v("ä¸‹åˆ—è¯­å¥è¡¨ç¤º"),t("strong",[s._v("ä»Žåº“åº”ç”¨åŒæ­¥å®ŒæŒ‡å®šçš„fileå’Œposçš„binlogä½ç½®")]),s._v("ï¼Œä¸€å…±æ‰§è¡Œäº†å¤šå°‘äº‹åŠ¡ã€‚å› æ­¤"),t("font",{attrs:{color:"red"}},[t("strong",[s._v("æ–¹æ¡ˆçš„æ ¸å¿ƒå°±æ˜¯åˆ©ç”¨è¯¥è¯­å¥çš„è¿”å›žç»“æžœåˆ¤æ–­å½“å‰ä»Žåº“æ˜¯å¦åŒæ­¥å®Œæ¯•")])]),s._v("ã€‚")],1),s._v(" "),t("div",{staticClass:"language-sql line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),s._v(" master_pos_wait"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("file")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" pos"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" timeout"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("ol",[t("li",[s._v("ä¸»åº“æ‰§è¡Œæ›´æ–°æ“ä½œï¼Œå¹¶ç«‹åˆ»æ‰§è¡Œshow master statusèŽ·å–å½“å‰ä¸»åº“æ‰§è¡Œåˆ°çš„fileå’Œpositionã€‚")]),s._v(" "),t("li",[s._v("é€‰å®šä¸€ä¸ªä»Žåº“æ‰§è¡Œä¸Šè¿°SQLæŸ¥è¯¢è¯­å¥ï¼šselect master_pos_wait(File, Position, 1)ï¼›\n"),t("ul",[t("li",[s._v("å¦‚æžœè¿”å›žå€¼æ˜¯æ­£æ•´æ•°ï¼Œé‚£ä¹ˆè¯´æ˜Žè¯¥ä»Žåº“å·²ç»å®ŒæˆåŒæ­¥ï¼Œç›´æŽ¥åœ¨è¯¥ä»Žåº“ä¸Šæ‰§è¡ŒæŸ¥è¯¢è¯­å¥ã€‚")]),s._v(" "),t("li",[s._v("å¦åˆ™åˆ°ä¸»åº“æ‰§è¡ŒæŸ¥è¯¢è¯­å¥ã€‚")])])])]),s._v(" "),t("p",[s._v("å¦‚æžœSELECTæŸ¥è¯¢ç­‰å¾…è¶…è¿‡1sï¼Œåˆ™é€€åŒ–ä¸ºæ–¹æ¡ˆä¸€åˆ°ä¸»åº“ä¸ŠæŸ¥è¯¢ã€‚")]),s._v(" "),t("h3",{attrs:{id:"æ–¹æ¡ˆå…­ã€gtidæ–¹æ¡ˆ"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#æ–¹æ¡ˆå…­ã€gtidæ–¹æ¡ˆ"}},[s._v("#")]),s._v(" æ–¹æ¡ˆå…­ã€GTIDæ–¹æ¡ˆ")]),s._v(" "),t("p",[s._v("å€ŸåŠ©SQLè¯­å¥ï¼Œ"),t("font",{attrs:{color:"red"}},[t("strong",[s._v("ç­‰å¾…ä»Žåº“æ‰§è¡Œçš„äº‹åŠ¡ä¸­åŒ…å«ä¼ å…¥æŒ‡å®šgtid_set")])]),s._v("ï¼Œå¦‚æžœå­˜åœ¨gtidåˆ™è¿”å›ž0ï¼Œè¶…æ—¶è¿”å›ž1ã€‚æ ¹æ®è¿™ä¸ªå€¼åˆ¤æ–­å½“å‰ä»Žåº“æ˜¯å¦å®ŒæˆåŒæ­¥ã€‚")],1),s._v(" "),t("p",[s._v("ä¸åŒäºŽæ–¹æ¡ˆäº”ï¼Œè¿™é‡ŒèŽ·å–ä¸»åº“gtidä¿¡æ¯å¯ä»¥ç›´æŽ¥"),t("strong",[s._v("ä»Žè¿”å›žåŒ…æ‹¿åˆ°")]),s._v("ã€‚é€šè¿‡å‚æ•°è®¾ç½®+ç¨‹åºAPIæŽ¥å£ã€‚")]),s._v(" "),t("p",[s._v("åœ¨å¤§äº‹åŠ¡+DDLåœºæ™¯ä¸‹ï¼Œå¦‚æžœä¾ç„¶é€‰æ‹©ç­‰GTIDæ–¹æ¡ˆï¼Œä¼šå¯¼è‡´è¦å¾ˆé•¿æ—¶é—´å¤‡åº“æ‰ä¼šåŒæ­¥å®Œæˆã€‚è¿™ç§åœºæ™¯ä¸‹ï¼Œå¯ä»¥é‡‡ç”¨ä»¥ä¸‹è¯»å†™åˆ†ç¦»æ–¹æ¡ˆï¼š")]),s._v(" "),t("ul",[t("li",[s._v("ä¸šåŠ¡ä½Žå³°æœŸå°†"),t("strong",[s._v("æ‰€æœ‰æŸ¥è¯¢è¯·æ±‚éƒ½åˆ‡åˆ°ä¸»åº“")]),s._v("ã€‚")]),s._v(" "),t("li",[s._v("åœ¨ä»Žåº“æ‰§è¡ŒDDLï¼ˆå¯ä»¥å…³é—­set_log_binï¼‰")]),s._v(" "),t("li",[s._v("ä¸»ä»Žåˆ‡æ¢ï¼Œæ‰€æœ‰è¯·æ±‚æ‰“åˆ°æ–°çš„ä¸»åº“ï¼›ç„¶åŽå¤‡åº“è¿›è¡ŒDDL")]),s._v(" "),t("li",[s._v("å½“å¤‡åº“çš„ä¸»å¤‡å»¶è¿Ÿé™ä½Žè¿½ä¸Šä¸»åº“åŽï¼Œå†å°†è¯»è¯·æ±‚åˆ‡åˆ°å¤‡åº“ã€‚")])])])}),[],!1,null,null,null);t.default=_.exports}}]);