(window.webpackJsonp=window.webpackJsonp||[]).push([[324],{643:function(s,t,e){"use strict";e.r(t);var n=e(4),a=Object(n.a)({},(function(){var s=this,t=s._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h1",{attrs:{id:"session会话"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#session会话"}},[s._v("#")]),s._v(" session会话")]),s._v(" "),t("ol",[t("li",[t("p",[s._v("会话跟踪技术")]),s._v(" "),t("p",[s._v("解决HTTP无状态不能识别用户的问题。")]),s._v(" "),t("ul",[t("li",[t("p",[s._v("API")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("HttpSession session=request.getSession();\n //服务器端获取会话，如果是首次发送请求获取不到，则会创建新的并相应给客户端；客户端第二次请求会把sessionId带给服务器，服务器根据sessionId判断会话。\n session.isNew();//判断当前会话是否是新的\n session.getId();//获取sessionId\n session.getMaxInactiveInterval();//session允许不操作的最大时长，默认30min，\n session.invalidate();//强制性让会话立即失效\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br")])])]),s._v(" "),t("li",[t("p",[s._v("向session保存作用域存储数据(账号密码)。同一个浏览器使用一个session，不同浏览器属于不同session。")]),s._v(" "),t("div",{staticClass:"language-java line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("HttpSession")]),s._v(" session"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("request"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("getSession")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\nsession"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("setAttribute")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"uname"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"john"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Object")]),s._v(" res"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("session"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("getAttrbute")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"uname"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//注意结果是Object类型")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])])]),s._v(" "),t("li",[t("p",[t("font",{attrs:{color:"red"}},[t("strong",[s._v("页面转发：表示在容器内部servlet把请求转发给另一个servlet进行处理响应，客户端总共只发送一个Http请求")]),s._v("。")])],1),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v('request.getRequestDispatcher("demo7").forward(request,response);\n')])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[t("font",{attrs:{color:"red"}},[t("strong",[s._v("客户端重定向：servlet响应给客户端，并告诉他去请求另一个servlet。客户端总共发送两个Http请求，地址栏发生变化")]),s._v("。")])],1),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v('response.sendRedirect("demo7");\n')])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])])])])]),s._v(" "),t("li",[t("p",[t("font",{attrs:{color:"red",size:"5"}},[s._v("保存作用域")])],1),s._v(" "),t("ul",[t("li",[t("p",[t("strong",[s._v("request：保存的数据仅在一次请求响应有效")]),s._v("。")]),s._v(" "),t("p",[s._v("response.sendRedirect无效，而request.getRequestDispatcher有效")])]),s._v(" "),t("li",[t("p",[s._v("session：保存的数据在一个会话作用域内有效。")]),s._v(" "),t("p",[s._v("不同客户端访问无效，因为它们的session是不同的。")])]),s._v(" "),t("li",[t("p",[s._v("application：保存的数据在整个应用程序开启内有效")]),s._v(" "),t("p",[s._v("只要Tomcat服务器开启期间，所有客户都能访问到相同数据。")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v('ServletContext application=request.getServletContext();\napplication.setAttribute("name",uname);\n')])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])])]),s._v(" "),t("li",[t("p",[t("strong",[t("font",{attrs:{color:"red"}},[s._v("通过html传过来的值用request.getParameter()获取")])],1)]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v('String fid=request.getParameter("fid");\n')])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])])])])])])])}),[],!1,null,null,null);t.default=a.exports}}]);