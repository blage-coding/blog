(window.webpackJsonp=window.webpackJsonp||[]).push([[375],{693:function(t,s,r){"use strict";r.r(s);var _=r(4),a=Object(_.a)({},(function(){var t=this,s=t._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"order-by"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#order-by"}},[t._v("#")]),t._v(" order by")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://jsd.cdn.zzko.cn/gh/blage-coding/picx-images-hosting@master/20230625/image.4z8k5f9sdgw0.webp",alt:""}})]),t._v(" "),s("h2",{attrs:{id:"_1-å…¨å­—æ®µæ’åº"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-å…¨å­—æ®µæ’åº"}},[t._v("#")]),t._v(" 1.å…¨å­—æ®µæ’åº")]),t._v(" "),s("p",[t._v("åˆ†æä»¥ä¸‹SQLè¯­å¥æ‰§è¡Œæµç¨‹ï¼Œcityå­—æ®µå»ºç«‹äº†ç´¢å¼•ã€‚")]),t._v(" "),s("div",{staticClass:"language-sql line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-sql"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("select")]),t._v(" city"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("name"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("age "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" t "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("where")]),t._v(" city"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'æ­å·'")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("order")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("by")]),t._v(" name "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("limit")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1000")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br")])]),s("ul",[s("li",[t._v("é¦–å…ˆä»cityçš„ç´¢å¼•B+æ ‘å¶å­èŠ‚ç‚¹ï¼Œè·å–æ¯è¡Œè®°å½•çš„ä¸»é”®IDï¼Œç„¶åä»ä¸»é”®ç´¢å¼•æ ‘çš„æ¯ä¸€è¡Œè®°å½•ä¸­ï¼Œå–å‡ºæŸ¥è¯¢çš„ä¸‰ä¸ªå­—æ®µã€‚")]),t._v(" "),s("li",[s("font",{attrs:{color:"red"}},[s("strong",[t._v("åœ¨å†…å­˜å¼€è¾Ÿä¸€ä¸ªç”¨äºæ’åºçš„ç©ºé—´sort_buffer")])]),t._v("ï¼Œå¹¶æŒ‡å®šç©ºé—´å¤§å°ã€‚")],1),t._v(" "),s("li",[s("strong",[t._v("å°†æ¯è¡Œè®°å½•çš„city,name,ageä¸‰ä¸ªå­—æ®µéƒ½æ”¾å…¥sort_buffer")]),t._v("ï¼Œç„¶åæ ¹æ®nameå­—æ®µè¿›è¡Œå¿«æ’(å†…éƒ¨æ’åº)ã€‚æ”¾å…¥å†…å­˜æ’åºå¯èƒ½å­˜åœ¨ä¸¤ç§æƒ…å†µï¼š\n"),s("ul",[s("li",[t._v("sort_bufferç©ºé—´å¤§å° > æ‰€æœ‰è¦æ’åºçš„æ•°æ®é‡ï¼šæ­¤æ—¶éœ€è¦è¿›è¡Œ"),s("strong",[t._v("å¤–éƒ¨æ’åº")]),t._v("ï¼Œå°†æ‰€æœ‰æ•°æ®åˆ†å—å¹¶ä¾æ¬¡æ”¾å…¥sort_bufferè¿›è¡Œæ’åºï¼Œæ¯ä¸ªæœ‰åºçš„å—æ’åºå¥½åä¼šå­˜æ”¾åœ¨â€œ"),s("strong",[t._v("ä¸´æ—¶æ–‡ä»¶")]),t._v("â€ä¸­ï¼Œæœ€åå°†æ¯å—æœ‰åºçš„ä¸´æ—¶æ–‡ä»¶é€šè¿‡"),s("strong",[t._v("å½’å¹¶æ’åº")]),t._v("åˆå¹¶æˆä¸€ä¸ªå¤§çš„æœ‰åºçš„æ–‡ä»¶ã€‚")]),t._v(" "),s("li",[t._v("sort_bufferç©ºé—´å¤§å° ï¼œ æ‰€æœ‰è¦æ’åºçš„æ•°æ®é‡ï¼šç›´æ¥åœ¨"),s("strong",[t._v("å†…å­˜")]),t._v("è¿›è¡Œæ’åºã€‚")])])]),t._v(" "),s("li",[t._v("æŠŠæ’åºåå‰1000æ¡ç»“æœè¿”å›ç»™å®¢æˆ·ç«¯ã€‚")])]),t._v(" "),s("p",[t._v("SQLè¯­å¥æ’åºæ—¶å¯ä»¥é€šè¿‡æŸ¥çœ‹"),s("strong",[t._v("OPTIMIZER_TRACE")]),t._v("ç»“æœï¼Œå¯¹æ‰§è¡Œæ’åºçš„SQLè¯­å¥è¿›è¡Œåˆ†æï¼Œå…¶ä¸­ä»‹ç»å‡ ä¸ªå­—æ®µçš„å«ä¹‰ï¼š")]),t._v(" "),s("p",[t._v("â€œnumber_of_tmp_filesâ€ï¼šè¡¨ç¤ºä½¿ç”¨åˆ°äº†ä¸´æ—¶æ–‡ä»¶çš„æ•°é‡ï¼Œ"),s("strong",[t._v("å†…å­˜å¼€è¾Ÿçš„æ’åºç©ºé—´è¶Šå°ï¼Œä½¿ç”¨åˆ°çš„ä¸´æ—¶æ–‡ä»¶è¶Šå¤š")]),t._v("ã€‚")]),t._v(" "),s("p",[t._v("â€œexamined_rowsâ€ï¼šå‚ä¸æ’åºçš„è¡Œæ•°ã€‚")]),t._v(" "),s("p",[t._v("â€œsort_mode â€é‡Œé¢çš„packed_additional_fieldsï¼šè¡¨ç¤ºå¯¹å­—ç¬¦ä¸²è¿›è¡Œäº†ç´§å‡‘å¤„ç†ï¼ŒæŒ‰ç…§"),s("strong",[t._v("å®é™…å­—ç¬¦ä¸²é•¿åº¦åˆ†é…ç©ºé—´")]),t._v("ã€‚Varcharå®šä¹‰çš„é•¿åº¦æ— æ•ˆã€‚")]),t._v(" "),s("p",[t._v("ç¼ºç‚¹ï¼š"),s("font",{attrs:{color:"red"}},[s("strong",[t._v("å•è¡Œæ•°æ®å¤§æˆ–è€…sort_bufferåˆ†é…å†…å­˜ç©ºé—´å°çš„æƒ…å†µä¸‹ï¼Œæ•ˆç‡æ¯”è¾ƒä½")])]),t._v("ï¼Œä¸èƒ½å……åˆ†åˆ©ç”¨å†…å­˜è¿›è¡Œæ’åºã€‚")],1),t._v(" "),s("h2",{attrs:{id:"_2-rowidæ’åº"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-rowidæ’åº"}},[t._v("#")]),t._v(" 2.rowIdæ’åº")]),t._v(" "),s("p",[s("strong",[t._v("max_length_for_sort_dataï¼šå•è¡Œæ•°æ®çš„é•¿åº¦è¶…è¿‡è®¾å®šé˜ˆå€¼ï¼Œåˆ™æ›´æ¢rowIdæ’åºæ³•")]),t._v("ã€‚")]),t._v(" "),s("p",[s("font",{attrs:{color:"red"}},[s("strong",[t._v("rowIdæ’åºæ–¹æ³•ç”¨äºè§£å†³å•è¡Œæ•°æ®é•¿åº¦è¿‡å¤§,æ’åºæ•ˆç‡ä½çš„é—®é¢˜")])]),t._v("ï¼Œä¸å…¨å­—æ®µæ’åºç›¸æ¯”ï¼ŒåŒºåˆ«å¦‚ä¸‹ï¼š")],1),t._v(" "),s("ul",[s("li",[s("font",{attrs:{color:"red"}},[s("strong",[t._v("sort_bufferå†…æ”¾å…¥çš„å­—æ®µï¼Œåªæœ‰order byéœ€è¦æ’åºçš„å­—æ®µnameï¼Œä»¥åŠä¸»é”®ID")])]),t._v("ã€‚")],1),t._v(" "),s("li",[t._v("æœ€åæ ¹æ®æ’åºç»“æœçš„ä¸»é”®IDï¼Œ"),s("strong",[t._v("å†è¿›è¡Œä¸€æ¬¡å›è¡¨")]),t._v("ï¼Œä»ç£ç›˜ä¸­å–å‡ºæŸ¥è¯¢çš„æ‰€æœ‰å­—æ®µå¹¶è¿”å›ã€‚")])]),t._v(" "),s("h2",{attrs:{id:"_3-ä¼˜åŒ–"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-ä¼˜åŒ–"}},[t._v("#")]),t._v(" 3.ä¼˜åŒ–")]),t._v(" "),s("p",[s("strong",[t._v("MySQLè®¾è®¡æ€æƒ³ï¼šå†…å­˜å¤Ÿå°±å¤šç”¨å†…å­˜ï¼Œå‡å°‘ç£ç›˜è®¿é—®ã€‚å› æ­¤ä¼˜å…ˆè€ƒè™‘å…¨å­—æ®µæ’åºï¼Œç„¶åæ‰è€ƒè™‘rowIdæ’åºä¼˜åŒ–")]),t._v("ã€‚")]),t._v(" "),s("h3",{attrs:{id:"_3-1å»ºç«‹-whereå­—æ®µ-æ’åºå­—æ®µ-è”åˆç´¢å¼•"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-1å»ºç«‹-whereå­—æ®µ-æ’åºå­—æ®µ-è”åˆç´¢å¼•"}},[t._v("#")]),t._v(" 3.1å»ºç«‹<whereå­—æ®µï¼Œæ’åºå­—æ®µ>è”åˆç´¢å¼•")]),t._v(" "),s("p",[t._v("å»ºç«‹è”åˆç´¢å¼•ä¹‹åï¼Œ"),s("strong",[t._v("åœ¨è”åˆç´¢å¼•æ ‘æ ¹æ®whereå­—æ®µï¼ŒæŸ¥è¯¢åˆ°çš„æ¯ä¸€æ¡è®°å½•ä¸»é”®IDéƒ½æ˜¯æœ‰åºçš„")]),t._v("ã€‚å› æ­¤ç›´æ¥æ ¹æ®IDå›è¡¨è¯»æ•°æ®è¿”å›å³å¯ï¼Œç›´åˆ°ä¸æ»¡è¶³æŸ¥è¯¢æ¡ä»¶ï¼Œæˆ–è€…æ˜¯è¶…è¿‡limitè®°å½•æ•°ã€‚")]),t._v(" "),s("p",[t._v("explainç»“æœå¯ä»¥å‘ç°extraå­—æ®µæ²¡æœ‰using filesortï¼Œæ•´ä¸ªè¿‡ç¨‹ä¸éœ€è¦æ’åºã€‚")]),t._v(" "),s("h3",{attrs:{id:"_3-2å»ºç«‹-whereå­—æ®µ-æ’åºå­—æ®µ-selectå­—æ®µ-è¦†ç›–ç´¢å¼•"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-2å»ºç«‹-whereå­—æ®µ-æ’åºå­—æ®µ-selectå­—æ®µ-è¦†ç›–ç´¢å¼•"}},[t._v("#")]),t._v(" 3.2å»ºç«‹<whereå­—æ®µï¼Œæ’åºå­—æ®µï¼Œselectå­—æ®µ>è¦†ç›–ç´¢å¼•")]),t._v(" "),s("p",[t._v("åªè¦å½“å‰è”åˆç´¢å¼•å·²ç»è¦†ç›–äº†æ‰€æœ‰æŸ¥è¯¢æ‰€éœ€è¦çš„å­—æ®µï¼Œé‚£ä¹ˆå°±"),s("strong",[t._v("ä¸éœ€è¦è¿›è¡Œå›è¡¨")]),t._v("ã€‚explainç»“æœå¯ä»¥å‘ç°extraå­—æ®µå‡ºç°using indexï¼Œè¡¨ç¤ºä½¿ç”¨äº†è¦†ç›–ç´¢å¼•ã€‚")]),t._v(" "),s("p",[t._v("æ³¨æ„ï¼šå¦‚æœwhereä½¿ç”¨äº†inæ¡ä»¶ï¼Œå¯èƒ½ä¼šç ´åæœ‰åºæ€§ï¼Œå¯¼è‡´è™½ç„¶ä½¿ç”¨äº†è”åˆç´¢å¼•ï¼Œä½†ä¾æ—§éœ€è¦é‡æ–°æ’åºã€‚"),s("font",{attrs:{color:"red"}},[s("strong",[t._v("ä¼˜åŒ–ç­–ç•¥æ˜¯åˆ†åˆ«å•ç‹¬è¯»å–æ¯ä¸€ä¸ªinå­—æ®µçš„è®°å½•åˆ°å†…å­˜ï¼Œç„¶åä¸šåŠ¡ç«¯å†ç»§ç»­å½’å¹¶æ’åºã€‚è¿™æ ·å¯ä»¥é¿å…MySQLçš„ä¸´æ—¶æ–‡ä»¶æˆ–è€…æ˜¯rowIdå¤šä¸€æ¬¡å›è¡¨")])]),t._v("ã€‚")],1),t._v(" "),s("h3",{attrs:{id:"_3-3å…¶å®ƒ"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-3å…¶å®ƒ"}},[t._v("#")]),t._v(" 3.3å…¶å®ƒ")]),t._v(" "),s("p",[t._v("å‡å°‘selectå­—æ®µï¼šä¸ºé˜²æ­¢å•è¡Œæ•°æ®é•¿åº¦è¿‡å¤§ï¼Œå¯¼è‡´åˆ›å»ºè¿‡å¤šçš„ä¸´æ—¶æ–‡ä»¶ï¼Œ"),s("strong",[t._v("selectæŸ¥è¯¢æ—¶å¯ä»¥å‡å°‘æŸ¥è¯¢çš„å­—æ®µ")]),t._v("ã€‚")]),t._v(" "),s("p",[t._v("limitè¡Œæ•°å°äºè¡¨è®°å½•æ•°ï¼šæ­¤æ—¶ä¼˜åŒ–å™¨ä¼šè®¤ä¸ºå…¨è¡¨æ‰«ææ¯”ç”¨ç´¢å¼•æ–¹å¼å¿«ã€‚")]),t._v(" "),s("h2",{attrs:{id:"_4-ä¸´æ—¶è¡¨"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_4-ä¸´æ—¶è¡¨"}},[t._v("#")]),t._v(" 4.ä¸´æ—¶è¡¨")]),t._v(" "),s("p",[s("strong",[t._v("ä»€ä¹ˆæƒ…å†µä¸‹æ’åºæ—¶ä¼šä½¿ç”¨ä¸´æ—¶è¡¨")]),t._v("ï¼Ÿ")]),t._v(" "),s("p",[t._v("SQLè¯­å¥â€æ‰€è¦æ“ä½œæ’åºçš„è¡¨â€œä¸æ˜¯ç£ç›˜ä¸­çš„è¡¨ï¼Œè€Œæ˜¯"),s("strong",[t._v("è¿›ä¸€æ­¥ç»è¿‡å‡½æ•°å¤„ç†ã€è¡¨æ‹¼æ¥ç­‰å¤„ç†è¿‡åçš„è¡¨")]),t._v("ã€‚è¿™äº›è¡¨ç§°ä¹‹ä¸ºä¸´æ—¶è¡¨ã€‚")]),t._v(" "),s("p",[t._v("P.Så­æŸ¥è¯¢ä¸ä¸€å®šä¼šäº§ç”Ÿä¸´æ—¶è¡¨ã€‚")]),t._v(" "),s("h3",{attrs:{id:"_4-1å†…å­˜ä¸´æ—¶è¡¨"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_4-1å†…å­˜ä¸´æ—¶è¡¨"}},[t._v("#")]),t._v(" 4.1å†…å­˜ä¸´æ—¶è¡¨")]),t._v(" "),s("p",[t._v("å†…å­˜ä¸´æ—¶è¡¨ï¼šæ•´ä¸ªä¸´æ—¶è¡¨çš„æ‰€æœ‰è¡Œæ•°æ®å­˜å‚¨åœ¨å†…å­˜ä¸­ã€‚"),s("strong",[t._v("ä½¿ç”¨çš„å¼•æ“é»˜è®¤æ˜¯MEMORY")]),t._v("ã€‚")]),t._v(" "),s("p",[s("strong",[t._v("å¯¹äºå†…å­˜è¡¨çš„æ’åºï¼Œä¼˜åŒ–å™¨ä¼šé€‰æ‹©rowIdæ’åº")]),t._v("ã€‚å› ä¸ºå›è¡¨æ—¶åªéœ€è¦åœ¨å†…å­˜ä¸­è¯»å–æ•°æ®ï¼Œè€Œä¸éœ€è¦ä»ç£ç›˜è¯»ã€‚")]),t._v(" "),s("div",{staticClass:"language-java line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[t._v("select word from t order by "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("rand")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" limit "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br")])]),s("p",[t._v("åˆ†æä¸Šè¿°SQLè¯­å¥çš„æ’åºè¿‡ç¨‹ï¼š")]),t._v(" "),s("ul",[s("li",[t._v("é¦–å…ˆåœ¨ç£ç›˜ä¸­å¯¹tè¡¨è¿›è¡Œå…¨è¡¨æ‰«æï¼Œè°ƒç”¨rand()è®¡ç®—å¾—åˆ°ç»“æœ(ç§°ä¸ºå­—æ®µA)ï¼Œç„¶åå°†selectéœ€è¦æŸ¥è¯¢çš„å­—æ®µword+å­—æ®µAéƒ½å­˜å…¥å†…å­˜çš„ä¸€ä¸ªä¸´æ—¶è¡¨ä¸­ã€‚æ‰«æè¡Œæ•°ä¸º10000ã€‚")]),t._v(" "),s("li",[t._v("é‡‡ç”¨rowIdæ’åºï¼Œä»å†…å­˜ä¸´æ—¶è¡¨ä¸­ï¼ŒæŠŠæ’åºå­—æ®µAä¸â€ä½ç½®ä¿¡æ¯â€œå­—æ®µå­˜å…¥sort_bufferå½“ä¸­ã€‚æ‰«æè¡Œæ•°å˜ä¸º20000")]),t._v(" "),s("li",[t._v("å¯¹"),s("strong",[t._v("sort_bufferè¿›è¡Œæ’åº")])]),t._v(" "),s("li",[t._v("å¾—åˆ°æœ‰åºsort_bufferåï¼Œæ ¹æ®â€ä½ç½®ä¿¡æ¯â€œè¿›è¡Œ"),s("font",{attrs:{color:"red"}},[s("strong",[t._v("åœ¨å†…å­˜ä¸­å›è¡¨")])]),t._v("ï¼Œå–å‡ºå‰ä¸‰æ¡è®°å½•ã€‚æœ€åè¿”å›ç»“æœé›†ã€‚")],1)]),t._v(" "),s("p",[t._v("å…¶ä¸­â€ä½ç½®ä¿¡æ¯â€œç”¨äºå®šä½æ ‡è¯†æ¯ä¸€è¡Œæ•°æ®ã€‚MEMORYå¼•æ“ä¸­ä¸ºæ•°ç»„çš„ç´¢å¼•ï¼›è€ŒInnoDBå¼•æ“ä¸­ä¸ºä¸»é”®IDã€‚")]),t._v(" "),s("h3",{attrs:{id:"_4-2ç£ç›˜ä¸´æ—¶è¡¨"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_4-2ç£ç›˜ä¸´æ—¶è¡¨"}},[t._v("#")]),t._v(" 4.2ç£ç›˜ä¸´æ—¶è¡¨")]),t._v(" "),s("p",[s("strong",[t._v("tmp_table_sizeï¼šå½“å†…å­˜ä¸´æ—¶è¡¨å¤§å°è¶…è¿‡è®¾å®šé˜ˆå€¼æ—¶ï¼Œå°±ä¼šè½¬åŒ–ä¸ºç£ç›˜ä¸´æ—¶è¡¨")]),t._v("ã€‚é»˜è®¤ä½¿ç”¨InnoDBå¼•æ“ã€‚")]),t._v(" "),s("p",[s("strong",[t._v("filesort_priority_queue_optimizationä¸­chosen=trueï¼šè¡¨ç¤ºä½¿ç”¨äº†ä¼˜å…ˆé˜Ÿåˆ—æ’åºç®—æ³•")]),t._v("ã€‚")]),t._v(" "),s("h4",{attrs:{id:"ğŸ”¥å½’å¹¶æ’åºvsä¼˜å…ˆé˜Ÿåˆ—ç®—æ³•-å †æ’åº"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ”¥å½’å¹¶æ’åºvsä¼˜å…ˆé˜Ÿåˆ—ç®—æ³•-å †æ’åº"}},[t._v("#")]),t._v(" ğŸ”¥"),s("strong",[t._v("å½’å¹¶æ’åºVSä¼˜å…ˆé˜Ÿåˆ—ç®—æ³•(å †æ’åº")]),t._v(")")]),t._v(" "),s("p",[t._v("ä¸Šè¿°SQLè¯­å¥åŒ…å«limitå­—æ®µï¼Œåªéœ€è¦æŸ¥å‡ºå‰3æ¡è®°å½•ï¼Œå¦‚æœä¾æ—§ä½¿ç”¨å½’å¹¶æ’åºï¼Œé‚£ä¹ˆ9997æ¡è®°å½•ä¹Ÿæ˜¯æœ‰åºçš„ï¼Œè€Œæœ€åéœ€è¦è¿”å›ç»™ç”¨æˆ·çš„åªæœ‰ä¸‰æ¡ï¼Œå› æ­¤å°±"),s("strong",[t._v("æµªè´¹äº†éå¸¸å¤šçš„è®¡ç®—é‡")]),t._v("ã€‚")]),t._v(" "),s("p",[t._v("è€Œä½¿ç”¨å †æ’åºï¼Œç»´æŠ¤ä¸€ä¸ªå¤§å°ä¸º3çš„å †ï¼Œæœ€ååªéœ€è¦è¿”å›è¿™ä¸ªå †é‡Œçš„å…ƒç´ å³å¯ã€‚å‰©ä½™æ•°æ®æœ‰åºä¸å¦ä¸éœ€è¦å…³å¿ƒã€‚")]),t._v(" "),s("p",[t._v("å¦‚æœSQLè¯­å¥æ’åºæ—¶"),s("font",{attrs:{color:"red"}},[s("strong",[t._v("ä½¿ç”¨äº†ä¼˜å…ˆé˜Ÿåˆ—ç®—æ³•ï¼Œé‚£ä¹ˆä½¿ç”¨åˆ°çš„ä¸´æ—¶æ–‡ä»¶number_of_tmp_filesä¸º0")])]),t._v("ã€‚å› ä¸ºåªæœ‰å½’å¹¶æ’åºæ‰ä¼šç”¨åˆ°ä¸´æ—¶æ–‡ä»¶ä¿å­˜æœ‰åºå—ã€‚")],1),t._v(" "),s("p",[t._v("æœ€ç»ˆå…·ä½“é‡‡ç”¨å“ªç§æ’åºç®—æ³•ï¼Œå–å†³äºä»¥ä¸‹å‡ ç‚¹ï¼š")]),t._v(" "),s("ul",[s("li",[t._v("å¦‚æœä¸å­˜åœ¨limitï¼Œåˆ™å¯¹æ•´ä¸ªä¸´æ—¶è¡¨è¿›è¡Œå½’å¹¶æ’åº")]),t._v(" "),s("li",[t._v("å¦‚æœå­˜åœ¨limit mï¼Œéœ€è¦æ ¹æ®mçš„å¤§å°è¿›ä¸€æ­¥ç¡®å®šï¼š\n"),s("ul",[s("li",[s("strong",[t._v("å¦‚æœmæ¡è®°å½•çš„é•¿åº¦(å­—èŠ‚æ•°)å¤§äºsort_buffer_sizeå¤§å°ï¼Œé‚£ä¹ˆè¯´æ˜å†…å­˜ä¸èƒ½ç»´æŠ¤è¿™ä¹ˆå¤§çš„å †")]),t._v("ã€‚åªèƒ½é‡‡ç”¨å½’å¹¶æ’åºã€‚")]),t._v(" "),s("li",[t._v("å¦‚æœå†…å­˜èƒ½å¤Ÿç»´æŠ¤å¤§å°ä¸ºmçš„å †ï¼Œé‚£ä¹ˆæ­¤æ—¶å¯ä»¥é‡‡ç”¨ä¼˜å…ˆé˜Ÿåˆ—å †æ’åºã€‚")])])])]),t._v(" "),s("h2",{attrs:{id:"_5-å–éšæœºnæ¡è®°å½•"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_5-å–éšæœºnæ¡è®°å½•"}},[t._v("#")]),t._v(" 5.å–éšæœºnæ¡è®°å½•")]),t._v(" "),s("ul",[s("li",[s("strong",[t._v("order by rand() limit 3")])])]),t._v(" "),s("p",[t._v("ä¸Šé¢çš„è¿™ç§æ–¹æ³•å­˜åœ¨çš„é—®é¢˜åœ¨äºï¼Œ"),s("strong",[t._v("ä¼šä½¿ç”¨ä¸´æ—¶è¡¨ä»¥åŠæ–‡ä»¶æ’åº")]),t._v("ï¼Œå› æ­¤æŸ¥è¯¢çš„ä»£ä»·æ¯”è¾ƒå¤§ã€‚")]),t._v(" "),s("ul",[s("li",[s("strong",[t._v("limit Y,1")])])]),t._v(" "),s("p",[t._v("å‰é¢çš„ç®—æ³•ä¹‹æ‰€ä»¥æŸ¥è¯¢ä»£ä»·æ¯”è¾ƒå¤§ï¼Œæ˜¯å› ä¸º"),s("strong",[t._v("è¡¨ä¸­æ¯è¡Œè®°å½•éƒ½å‚ä¸è®¡ç®—äº†rand()æ„å»ºä¸´æ—¶è¡¨")]),t._v("ï¼Œå¹¶ä¸”åªéœ€è¦å–å‡ºéšæœºnä¸ªå€¼ï¼Œ"),s("strong",[t._v("æ’åºè¿‡ç¨‹")]),t._v("å®é™…ä¸Šä¹Ÿæ˜¯å¤šä½™çš„ã€‚")]),t._v(" "),s("p",[s("font",{attrs:{color:"red"}},[s("strong",[t._v("å¦‚æœæŸ¥è¯¢æ—¶åªä½¿ç”¨limitï¼Œåˆ™æ˜¯ç›´æ¥ä»ä¸»é”®æ ‘å–å‡ºå¯¹åº”çš„è¡Œè®°å½•ï¼Œç›¸æ¯”äºç¬¬ä¸€ç§æ–¹æ³•å°‘äº†æ’åº(å…ˆorderæ’åºå†å–å‡ºlimitä¸ªè¡Œè®°å½•)ï¼Œæ•´ä¸ªè¿‡ç¨‹ä¼šå¿«å¾ˆå¤š")])]),t._v("ã€‚å…·ä½“ç®—æ³•ï¼š")],1),t._v(" "),s("p",[t._v("â‘ "),s("strong",[t._v("å…¨è¡¨æ‰«æï¼Œå¾—åˆ°å…¨è¡¨è¡Œæ•°C")]),t._v("ã€‚è®¡ç®—éšæœºè¡Œæ•°Y=floor(C*rand())ï¼Œæˆ–è€…"),s("strong",[t._v("å®¢æˆ·ç«¯æ ¹æ®è¡¨è¡Œæ•°ç”Ÿæˆéšæœºæ•°å†å¯¹Cå–æ¨¡")]),t._v("ã€‚")]),t._v(" "),s("p",[t._v("â‘¡ç›´æ¥select * fron t limit Y,1å–å‡ºä¸€æ¡éšæœºè®°å½•ã€‚")]),t._v(" "),s("p",[t._v("â‘¢é‡å¤ä¸Šè¿°æ“ä½œä¸‰æ¬¡ï¼Œæœ€ç»ˆå–å‡ºä¸‰æ¡è®°å½•ã€‚")]),t._v(" "),s("p",[s("font",{attrs:{color:"red"}},[s("strong",[t._v("MySQLæ‰§è¡Œlimit Y,1æ—¶ä¼šä¸€è¡Œè¡Œæ‰«æï¼Œå¾—åˆ°Yè¡Œæ•°æ®åå…¨éƒ¨ä¸¢å¼ƒï¼Œæœ€ç»ˆè¿”å›ä¸‹ä¸€è¡Œæ‰«æåˆ°çš„æ•°æ®")])]),t._v("ã€‚å› æ­¤è¿™é‡Œè¦æ‰«æY+1è¡Œï¼Œç„¶åå†åŠ ä¸Šå‰é¢ç¬¬ä¸€æ­¥å…¨è¡¨æ‰«æCï¼Œæ‰€ä»¥"),s("strong",[t._v("æ€»æ‰«æè¡Œæ•°ä¸ºC+Y+1")]),t._v("ã€‚")],1),t._v(" "),s("p",[t._v("å…¶ä¸­éšæœºæ•°çš„è®¡ç®—å¯ä»¥åœ¨å®¢æˆ·ç«¯è¿›è¡Œï¼Œæœ€åå†åˆ°MySQLä¸­æŸ¥è¯¢æ‹¼æ¥è¯­å¥ã€‚")]),t._v(" "),s("ul",[s("li",[s("strong",[t._v("limit Ymin, Ymax-Ymin+1")])])]),t._v(" "),s("p",[t._v("å‰é¢ä»‹ç»æ–¹æ³•ä¸­ï¼ŒæŸ¥è¯¢ä¸‰æ¬¡æ•°æ®ï¼Œæ€»è¡Œæ•°ä¸ºC+(Y1+1)+(Y2+1)+(Y3+1)ã€‚è¿™é‡Œå¯ä»¥è¿›ä¸€æ­¥ä¼˜åŒ–ï¼š")]),t._v(" "),s("p",[t._v("é¦–å…ˆæ±‚å‡ºY1,Y2,Y3çš„æœ€å¤§å€¼å’Œæœ€å°å€¼ï¼Œç„¶åç›´æ¥æ‰§è¡Œä»¥ä¸‹è¯­å¥å³å¯ï¼Œæ­¤æ—¶"),s("strong",[t._v("æŸ¥è¯¢è¡Œæ•°ä¸ºC+Ymax+1")]),t._v("ã€‚")]),t._v(" "),s("p",[t._v("ğŸ’¡å®¢æˆ·ç«¯æ‹¿åˆ°è¡Œæ•°ä¸ºYmin,Ymin+1...Ymax+1çš„æ‰€æœ‰æ•°æ®åï¼Œ"),s("strong",[t._v("å†æ ¹æ®Y1,Y2,Y3ä¹‹é—´çš„offsetè®¡ç®—å³")]),t._v("å¯ã€‚")]),t._v(" "),s("div",{staticClass:"language-sql line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-sql"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("select")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" t "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("limit")]),t._v(" Ymin"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" Ymax"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("Ymin"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br")])]),s("p",[t._v("ğŸ’¡å¦ä¸€ç§æ–¹å¼æ˜¯å¯ä»¥åœ¨limitæŸ¥è¯¢è¯­å¥ä¸­ï¼Œæ’å…¥whereé™å®šå­—æ®µæ¡ä»¶ï¼Œæ­¤æ—¶"),s("strong",[t._v("limitè¡Œæ‰«æä¼šä»æ»¡è¶³whereæ¡ä»¶çš„ç¬¬ä¸€è¡Œå¼€å§‹è®¡ç®—")]),t._v("ï¼š")]),t._v(" "),s("div",{staticClass:"language-sql line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-sql"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("select")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" t "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("where")]),t._v(" id"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("id2 "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("limit")]),t._v(" Y3"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("Y2"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br")])])])}),[],!1,null,null,null);s.default=a.exports}}]);