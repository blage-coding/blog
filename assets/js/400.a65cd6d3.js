(window.webpackJsonp=window.webpackJsonp||[]).push([[400],{718:function(s,t,a){"use strict";a.r(t);var n=a(4),e=Object(n.a)({},(function(){var s=this,t=s._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h3",{attrs:{id:"spring整合dubbo"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#spring整合dubbo"}},[s._v("#")]),s._v(" Spring整合Dubbo")]),s._v(" "),t("ul",[t("li",[t("p",[s._v("导入pom依赖，并配置yml，包括扫描包scan.base-packages(包下所有的rpc接口都会注册到服务中)，指明服务提供方和消费者通信的端口protocal.port，消费者和提供方的连接方式registry.address。")])]),s._v(" "),t("li",[t("p",[s._v("spring整合dubbo注解：")]),s._v(" "),t("ul",[t("li",[t("strong",[s._v("@Service")]),s._v("/@DubboService："),t("strong",[s._v("提供方")]),s._v("通过该注解进行"),t("strong",[s._v("服务发现注册")]),s._v("，首先将扫描到的类对象"),t("font",{attrs:{color:"red"}},[t("strong",[s._v("作为Spring的Bean对象")])]),s._v("添加到容器中管理，"),t("font",{attrs:{color:"red"}},[t("strong",[s._v("同时生成dubbo服务接口的实现Bean注册到服务中心")])]),s._v("。")],1),s._v(" "),t("li",[t("strong",[s._v("@Reference")]),s._v("：消费者用来指定要调用dubbo中的哪个服务，包括"),t("font",{attrs:{color:"red"}},[t("strong",[s._v("指明url指明服务提供方的地址绕过注册中心发起调用（直接走直连），interfaceClass指明服务的接口类")])]),s._v("，然后dubbo会从注册中心/工厂找到并注入该服务。")],1),s._v(" "),t("li",[t("strong",[s._v("@EnableDubbo")]),s._v("：扫描所有@Service的服务实现类加载到Spring容器，并暴露出来。同时扫描所有dubbo配置类。")])])]),s._v(" "),t("li",[t("p",[s._v("dubbo三种连接方式：")]),s._v(" "),t("ul",[t("li",[t("p",[s._v("注册中心，提供者向注册中心注册自己提供的服务，然后消费者向注册中心订阅服务")]),s._v(" "),t("div",{staticClass:"language-yml line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-yml"}},[t("code",[t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("dubbo")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("application")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("name")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" Lottery\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("version")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" 1.0.0\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("registry")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("address")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" zookeeper"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("//192.168.200.200"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2181")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("protocol")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("name")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" dubbo\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("port")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("20880")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("scan")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("base-packages")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" com.Last.lottery.rpc\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br")])])]),s._v(" "),t("li",[t("p",[s._v('直连，@Reference(url="")指定提供方的协议+地址，'),t("strong",[s._v("消费者直接到指定需要的服务的 url 获取服务")]),s._v("。便于测试开发。")]),s._v(" "),t("div",{staticClass:"language-yml line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-yml"}},[t("code",[t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("dubbo")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("registry")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("address")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" N/A\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])])]),s._v(" "),t("li",[t("p",[s._v("广播")]),s._v(" "),t("div",{staticClass:"language-yml line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-yml"}},[t("code",[t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("dubbo")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("registry")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("address")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" multicast"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("//224.5.6.7"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1234")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])])])])]),s._v(" "),t("li",[t("p",[s._v("实践")])])]),s._v(" "),t("p",[s._v("服务提供方需要提供一个RPC模块，其中封装服务的请求对象和响应对象，以及"),t("strong",[s._v("服务接口")]),s._v("，服务接口不需要在模块里面实现，可以在SpringBoot其它模块实现("),t("strong",[s._v("门面模式")]),s._v(")，并发RPC模块打包。")]),s._v(" "),t("p",[s._v("服务调用方需要"),t("font",{attrs:{color:"red"}},[t("strong",[s._v("导入RPC模块jar包")])]),s._v("，并声明服务接口，使用注解指明服务地址。")],1)])}),[],!1,null,null,null);t.default=e.exports}}]);