(window.webpackJsonp=window.webpackJsonp||[]).push([[386],{702:function(t,s,a){"use strict";a.r(s);var n=a(4),e=Object(n.a)({},(function(){var t=this,s=t._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"insertæ“ä½œåŠ é”åœºæ™¯åˆ†æ"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#insertæ“ä½œåŠ é”åœºæ™¯åˆ†æ"}},[t._v("#")]),t._v(" insertæ“ä½œåŠ é”åœºæ™¯åˆ†æ")]),t._v(" "),s("p",[t._v("å®éªŒç¯å¢ƒï¼š")]),t._v(" "),s("div",{staticClass:"language-sql line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-sql"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("CREATE")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("TABLE")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token identifier"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("`")]),t._v("t"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("`")])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token identifier"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("`")]),t._v("id"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("`")])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("11")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("NOT")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("NULL")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("AUTO_INCREMENT")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token identifier"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("`")]),t._v("c"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("`")])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("11")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("DEFAULT")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("NULL")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token identifier"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("`")]),t._v("d"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("`")])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("11")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("DEFAULT")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("NULL")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("PRIMARY")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("KEY")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token identifier"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("`")]),t._v("id"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("`")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("UNIQUE")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("KEY")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token identifier"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("`")]),t._v("c"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("`")])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token identifier"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("`")]),t._v("c"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("`")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("ENGINE")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("InnoDB")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("insert")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("into")]),t._v(" t "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("values")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("null")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("insert")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("into")]),t._v(" t "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("values")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("null")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("insert")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("into")]),t._v(" t "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("values")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("null")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("insert")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("into")]),t._v(" t "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("values")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("null")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("4")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("4")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("create")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("table")]),t._v(" t2 "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("like")]),t._v(" t\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br")])]),s("h2",{attrs:{id:"insert-select"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#insert-select"}},[t._v("#")]),t._v(" insert...select")]),t._v(" "),s("p",[t._v("åœ¨RRéš”ç¦»çº§åˆ«ä¸‹ï¼Œbinlogä¸ºstatementã€‚æ‰§è¡Œä»¥ä¸‹æ‰¹é‡æ’å…¥è¯­å¥æ—¶éœ€è¦ç»™"),s("strong",[t._v("tè¡¨çš„æ‰€æœ‰è¡Œè®°å½•å’Œé—´éš™éƒ½ä¸Šé”")]),t._v("ã€‚")]),t._v(" "),s("div",{staticClass:"language-sql line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-sql"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("insert")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("into")]),t._v(" t2"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("c"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("d"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("select")]),t._v(" c"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("d "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" t"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" \n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br")])]),s("p",[t._v("å‡è®¾ä¸ç»™tè¡¨ä¸Šé”ï¼Œè€ƒè™‘è¿™æ ·ä¸€ä¸ªæ—¶åºï¼š")]),t._v(" "),s("ol",[s("li",[t._v("Açº¿ç¨‹å¼€å¯äº‹åŠ¡ï¼Œæ­¤æ—¶æ˜¯"),s("strong",[t._v("å¿«ç…§è¯»")]),t._v("ï¼Œå› æ­¤è§†å›¾ä¸ä¼šæ”¹å˜ã€‚")]),t._v(" "),s("li",[t._v("Bçº¿ç¨‹å¼€å¯äº‹åŠ¡ï¼Œå¾€tè¡¨æ’å…¥ä¸€æ¡æ•°æ®ï¼šinsert into t ()ã€‚å¹¶æäº¤äº‹åŠ¡ï¼Œè®°å½•binlog")]),t._v(" "),s("li",[t._v("Açº¿ç¨‹æ‰§è¡Œinsert into t2 select t ï¼Œå› ä¸ºæ˜¯RRéš”ç¦»çº§åˆ«ï¼Œå› æ­¤æ’å…¥æ—¶selectçœ‹ä¸åˆ°tè¡¨ä¸­Bçº¿ç¨‹æ–°æ’å…¥çš„æ•°æ®")]),t._v(" "),s("li",[t._v("Aäº‹åŠ¡æäº¤ï¼Œè®°å½•binlog")])]),t._v(" "),s("p",[t._v("å¤‡åº“ä¼šæ ¹æ®äº‹åŠ¡æäº¤è®°å½•çš„binlogé¡ºåºè¿›è¡Œæ¢å¤ï¼Œå…ˆæ‰§è¡ŒBäº‹åŠ¡å¾€tè¡¨æ’å…¥å½“è¡Œæ•°æ®ï¼Œç„¶åæ‰§è¡ŒAäº‹åŠ¡å‘t2æ‰¹é‡æ’å…¥ï¼Œ"),s("strong",[t._v("æ­¤æ—¶å› ä¸ºæ²¡æœ‰MVCCæ”¯æŒï¼Œå¯¹äºt2æ¥è¯´tè¡¨æ–°æ’å…¥çš„æ•°æ®ä¹Ÿæ˜¯å¯è§çš„")]),t._v("ï¼Œæ‰€ä»¥è¿™æ¡æ•°æ®ä¹Ÿä¼šè¢«æ’å…¥t2è¡¨ã€‚å¯¼è‡´ä¸»å¤‡ä¸ä¸€è‡´ã€")]),t._v(" "),s("p",[t._v("ğŸ’¡"),s("font",{attrs:{color:"red"}},[s("strong",[t._v("åŠ é”ä¿è¯äº†äº‹åŠ¡æäº¤çš„é¡ºåºï¼Œè€Œäº‹åŠ¡æäº¤é¡ºåºå†³å®šäº†binlogå†™å…¥é¡ºåº")])]),t._v("ã€‚ä¸»åº“åœ¨æ‰§è¡Œäº‹åŠ¡æ—¶å¯è§æ€§ä¼šå—åˆ°MVCCçš„åˆ¶çº¦ï¼›è€Œ"),s("strong",[t._v("å¤‡åº“åº”ç”¨binlogæ¢å¤æ—¶æ²¡æœ‰mvccï¼Œå› æ­¤å¯è§æ€§åªç”±äº‹åŠ¡çš„æäº¤é¡ºåºå†³å®š")]),t._v("ã€‚")],1),t._v(" "),s("h2",{attrs:{id:"insert-å¾ªç¯å†™å…¥"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#insert-å¾ªç¯å†™å…¥"}},[t._v("#")]),t._v(" insert å¾ªç¯å†™å…¥")]),t._v(" "),s("p",[t._v("éœ€æ±‚ï¼šéœ€è¦å¾€t2è¡¨ä¸­æ’å…¥ä¸€è¡Œæ•°æ®ï¼Œè¿™ä¸€è¡Œçš„cå€¼æ—¶è¡¨tä¸­cå€¼çš„æœ€å¤§å€¼åŠ 1ï¼š")]),t._v(" "),s("div",{staticClass:"language-sql line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-sql"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("insert")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("into")]),t._v(" t2"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("c"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("d"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("select")]),t._v(" c"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("d "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" t "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("force")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("index")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("c"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("order")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("by")]),t._v(" c "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("desc")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("limit")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br")])]),s("p",[t._v("è¿™æ¡è¯­å¥çš„åŠ é”èŒƒå›´å°±æ˜¯cç´¢å¼•ä¸Šnext-key lock(c=4ï¼Œc=supremum]å’Œä¸»é”®ä¸Šid=4çš„è¡Œé”ã€‚")]),t._v(" "),s("p",[t._v("è€Œå¦‚æœæ˜¯å¾ªç¯å†™å…¥é—®é¢˜ï¼Œä¹Ÿå°±æ˜¯è¯»tè¡¨çš„æ•°æ®ï¼Œå¹¶ä¸”æ’å…¥åˆ°tè¡¨ä¸­ï¼ŒSQLè¯­å¥å¦‚ä¸‹ï¼š")]),t._v(" "),s("div",{staticClass:"language-sql line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-sql"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("insert")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("into")]),t._v(" t"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("c"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("d"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("select")]),t._v(" c"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("d "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" t "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("force")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("index")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("c"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("order")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("by")]),t._v(" c "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("desc")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("limit")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br")])]),s("ol",[s("li",[t._v("é¦–å…ˆåˆ›å»ºä¸€ä¸ª"),s("font",{attrs:{color:"red"}},[s("strong",[t._v("ä¸´æ—¶è¡¨")])]),t._v("ï¼Œè¡¨ä¸­æœ‰å­—æ®µcå’Œd("),s("strong",[t._v("ä¸´æ—¶è¡¨æ˜¯ä¸ºäº†é˜²æ­¢insertæ’å…¥tè¡¨åä¼šå¹²æ‰°selectçš„æŸ¥è¯¢ç»“æœ")]),t._v(")")],1),t._v(" "),s("li",[t._v("ä»ç´¢å¼•Cé€†åºå–å‡º4ä¸ªidï¼Œç„¶åå›è¡¨å–å‡ºå››æ¡è®°å½•ï¼Œå°†æ¯æ¡è®°å½•çš„cå’Œdå†™å…¥ä¸´æ—¶è¡¨ã€‚æ­¤æ—¶Rows_examined=4")]),t._v(" "),s("li",[t._v("æ­¤æ—¶limit 1ï¼Œæ‰€ä»¥ä¼šä»ä¸´æ—¶è¡¨å–å‡ºç¬¬ä¸€è¡Œæ”¾åˆ°è¡¨tä¸­ã€‚æ­¤æ—¶Rows_examinedåŠ 1å˜æˆ5")])]),t._v(" "),s("p",[t._v("ä¹Ÿå°±æ˜¯è¯´å³ä½¿cå­—æ®µä¸Šå­˜åœ¨ç´¢å¼•ï¼Œä¹Ÿè¿˜æ˜¯éœ€è¦"),s("font",{attrs:{color:"red"}},[s("strong",[t._v("å¯¹tè¡¨è¿›è¡Œå…¨è¡¨æ‰«æ")])]),t._v("ã€‚æ­¤æ—¶Cå­—æ®µä¸Šæ‰€æœ‰é—´éš™éƒ½ä¼šåŠ ä¸Šnect-key-lock(ç›®çš„æ˜¯ä¸ºäº†é˜²æ­¢binlogé€ æˆçš„ä¸»å¤‡ä¸ä¸€è‡´)ã€‚")],1),t._v(" "),s("p",[t._v("âœ¨ä¼˜åŒ–æ–¹æ³•ï¼š"),s("font",{attrs:{color:"red"}},[s("strong",[t._v("å…ˆå°†selectçš„ç»“æœinsert intoåˆ°å†…å­˜ä¸´æ—¶è¡¨")])]),t._v("ï¼Œæ­¤æ—¶å› ä¸ºCå­—æ®µä¸Šå»ºç«‹äº†ç´¢å¼•ï¼Œå› æ­¤å–åˆ°cæœ€å¤§å€¼å¯¹åº”çš„idåï¼Œ"),s("strong",[t._v("åªéœ€è¦å›è¡¨æ‰«æä¸€è¡Œè®°å½•")]),t._v("ã€‚æœ€åå†æŠŠå†…å­˜ä¸´æ—¶è¡¨çš„æœ€ç»ˆç»“æœæ’å…¥åˆ°tè¡¨ã€‚")],1),t._v(" "),s("div",{staticClass:"language-sql line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-sql"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("create")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("temporary")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("table")]),t._v(" temp_t i"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("c "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("d "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("engine")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("memory"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("insert")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("into")]),t._v(" temp_t "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("select")]),t._v(" c"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("d "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" t "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("force")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("index")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("c"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("order")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("by")]),t._v(" c "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("desc")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("limit")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("insert")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("into")]),t._v(" t "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("select")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" temp_t"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("drop")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("table")]),t._v(" temp_t"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br")])]),s("h2",{attrs:{id:"insert-å”¯ä¸€é”®å†²çª"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#insert-å”¯ä¸€é”®å†²çª"}},[t._v("#")]),t._v(" insert å”¯ä¸€é”®å†²çª")]),t._v(" "),s("p",[s("strong",[t._v("å…±äº«é”")]),t._v("ï¼šåŒä¸€æ¡è®°å½•å…è®¸æŒæœ‰"),s("font",{attrs:{color:"red"}},[s("strong",[t._v("å¤šæŠŠå…±äº«è¯»é”")])]),t._v("ï¼Œè¯»æ“ä½œéœ€è¦è·å–å…±äº«é”ã€‚")],1),t._v(" "),s("p",[s("strong",[t._v("æ’ä»–é”")]),t._v("ï¼šåŒä¸€æ¡è®°å½•åªå…è®¸æŒæœ‰"),s("font",{attrs:{color:"red"}},[s("strong",[t._v("ä¸€æŠŠæ’ä»–å†™é”")])]),t._v("ï¼Œå†™æ“ä½œéœ€è¦è·å–æ’ä»–é”ã€‚æ’ä»–é”å’Œå…±äº«é”æ˜¯äº’æ–¥çš„ã€‚")],1),t._v(" "),s("p",[t._v("æ‰§è¡Œinsertè¯­å¥æ’å…¥çš„è¡¨å­˜åœ¨å”¯ä¸€æ€§çº¦æŸæ—¶ï¼Œé€»è¾‘å¦‚ä¸‹ï¼š")]),t._v(" "),s("ol",[s("li",[t._v("é¦–å…ˆInnoDBä¼šæŸ¥çœ‹å”¯ä¸€æ€§å­—æ®µæ˜¯å¦å­˜åœ¨"),s("strong",[t._v("é‡å¤keyå€¼")]),t._v("ï¼š\n"),s("ul",[s("li",[t._v("å¦‚æœå­˜åœ¨åˆ™"),s("font",{attrs:{color:"red"}},[s("strong",[t._v("åœ¨å”¯ä¸€ç´¢å¼•å­—æ®µä¸Šæ·»åŠ é‡å¤å€¼çš„next-key-lock(å…±äº«sé”ï¼Œè¯»é—´éš™é”)")])]),t._v("ï¼Œæ³¨æ„"),s("strong",[t._v("æŒæœ‰è¿™ä¸ªå…±äº«é”çš„æ˜¯æ•´ä¸ªè¡¨")]),t._v("(å¯ä»¥ç†è§£ä¸ºæ°¸ä¸ä¼šé‡Šæ”¾ï¼Œä»è€Œä¿éšœå”¯ä¸€é”®ä¸Šæ’å…¥é‡å¤å€¼å°±ä¼šæŠ¥é”™)ã€‚")],1),t._v(" "),s("li",[t._v("å¦‚æœä¸å­˜åœ¨ï¼Œåˆ™ä¸åŠ é”ã€‚")])])]),t._v(" "),s("li",[t._v("æ‰§è¡Œinsertæ’å…¥æ•°æ®çš„è¡¨æ›´æ–°æ“ä½œï¼š\n"),s("ul",[s("li",[t._v("å¦‚æœå­˜åœ¨å…±äº«Sé”ï¼Œåˆ™å‡ºç°è¯»å†™é”å†²çªè¢«é˜»å¡ã€‚")]),t._v(" "),s("li",[s("font",{attrs:{color:"red"}},[s("strong",[t._v("ä¸å­˜åœ¨å…±äº«è¯»é”ï¼Œåˆ™ç›´æ¥æ’å…¥è¯¥æ¡æ–°çš„è¡Œè®°å½•ï¼Œå¹¶æ·»åŠ æ’ä»–å†™é”")])]),t._v("ã€‚")],1)])])]),t._v(" "),s("p",[t._v("Cå­—æ®µä¸Šå­˜åœ¨å”¯ä¸€ç´¢å¼•çº¦æŸï¼Œä¸€ç§å‡ºç°æ­»é”çš„æƒ…å†µå¦‚ä¸‹ï¼š")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://jsd.cdn.zzko.cn/gh/blage-coding/picx-images-hosting@master/20230711/image.56c2npc4c6w0.webp",alt:""}})]),t._v(" "),s("ol",[s("li",[t._v("çº¿ç¨‹Aå…ˆæ‰§è¡Œinsertè¯­å¥ï¼Œåœ¨Cç´¢å¼•c=5ç›´æ¥æ·»åŠ "),s("strong",[t._v("æ’ä»–å†™é”")]),t._v("(å”¯ä¸€ç´¢å¼•next-key-lockä¼šé€€åŒ–)")]),t._v(" "),s("li",[t._v("çº¿ç¨‹Bæ‰§è¡Œæ—¶å‡ºç°å”¯ä¸€é”®å†²çª("),s("strong",[t._v("é€šè¿‡è¯¥æ¡è®°å½•çš„æœ€æ–°ç‰ˆæœ¬å·")]),t._v(")ï¼Œå› æ­¤åŠ ä¸Šè¯»é”ï¼›åŒæ ·çº¿ç¨‹Cä¹Ÿä¼šåŠ ä¸Šè¯»é”â“")]),t._v(" "),s("li",[t._v("çº¿ç¨‹Aå›æ»šé‡Šæ”¾å†™é”ã€‚"),s("strong",[t._v("çº¿ç¨‹Bå’Œçº¿ç¨‹Céƒ½ç­‰å¾…å¯¹æ–¹é‡Šæ”¾è¯»é”")]),t._v("ï¼Œå†æ‰§è¡Œæ’å…¥æ“ä½œã€‚å› æ­¤ä¼šé€ æˆæ­»é”ã€‚")])]),t._v(" "),s("p",[t._v("å¦å¤–nullå€¼ä¼šä½¿å”¯ä¸€æ€§çº¦æŸå¤±æ•ˆã€‚")]),t._v(" "),s("h2",{attrs:{id:"insert-into-on-duplicate-key-update"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#insert-into-on-duplicate-key-update"}},[t._v("#")]),t._v(" insert into ... on duplicate key update")]),t._v(" "),s("p",[t._v("å‡è®¾è¡¨tä¸­å­˜åœ¨è¡Œè®°å½•(10,10,10)ï¼Œ(11,11,11)Cå­—æ®µå»ºç«‹å”¯ä¸€ç´¢å¼•çº¦æŸï¼Œç„¶åæ‰§è¡Œä»¥ä¸‹è¯­å¥ï¼š")]),t._v(" "),s("div",{staticClass:"language-sql line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-sql"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("insert")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("into")]),t._v(" t "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("values")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("11")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("on")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("duplicate")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("key")]),t._v(" updaet d"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("100")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br")])]),s("p",[t._v("é¦–å…ˆç»™Cå­—æ®µçš„(5,10]æ·»åŠ æ’ä»–çš„next -key lockå†™é”ï¼Œç„¶åæ‰§è¡Œåé¢æ›´æ–°æ“ä½œã€‚"),s("font",{attrs:{color:"red"}},[s("strong",[t._v("on duplicate key æŒ‡æ’å…¥ä¸€è¡Œæ•°æ®åï¼Œå¦‚æœé‡ä¸Šå”¯ä¸€é”®çº¦æŸï¼Œé‚£ä¹ˆæ‰§è¡Œåé¢çš„æ›´æ–°è¯­å¥")])]),t._v("ã€‚")],1),t._v(" "),s("p",[t._v("ğŸ’¡å¦‚æœæ’å…¥çš„æ•°æ®å­˜åœ¨å¤šä¸ªåˆ—å­—æ®µçš„å”¯ä¸€æ€§å†²çªï¼Œé‚£ä¹ˆä¿®æ”¹çš„è¡Œè®°å½•åªä¼š"),s("strong",[t._v('ä¿®æ”¹"ç¬¬ä¸€ä¸ªç´¢å¼•"å†²çªçš„è¡Œ(æŒ‰ç…§ç´¢å¼•æ’åº')]),t._v(")ã€‚åœ¨ä¸Šé¢ä¾‹å­ä¸­ï¼Œæ’å…¥çš„è®°å½•åŒæ—¶å¯¼è‡´id=11å†²çªå’Œc=10å†²çªï¼Œå› æ­¤idçš„ç´¢å¼•ä½ç½®æ›´å‰é¢ï¼Œå› æ­¤åªä¼šä¿®æ”¹(11,11,11)å˜ä¸º(11,100,11)ã€‚")])])}),[],!1,null,null,null);s.default=e.exports}}]);