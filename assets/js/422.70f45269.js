(window.webpackJsonp=window.webpackJsonp||[]).push([[422],{741:function(a,t,s){"use strict";s.r(t);var r=s(4),n=Object(r.a)({},(function(){var a=this,t=a._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[t("h1",{attrs:{id:"æ•£åˆ—ä¸å“ˆå¸Œç®—æ³•"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#æ•£åˆ—ä¸å“ˆå¸Œç®—æ³•"}},[a._v("#")]),a._v(" æ•£åˆ—ä¸å“ˆå¸Œç®—æ³•")]),a._v(" "),t("h2",{attrs:{id:"_1-æ–æ³¢é‚£å¥‘æ•£åˆ—"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-æ–æ³¢é‚£å¥‘æ•£åˆ—"}},[a._v("#")]),a._v(" 1.æ–æ³¢é‚£å¥‘æ•£åˆ—")]),a._v(" "),t("h3",{attrs:{id:"threadlocalæ•£åˆ—ç®—æ³•"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#threadlocalæ•£åˆ—ç®—æ³•"}},[a._v("#")]),a._v(" ThreadLocalæ•£åˆ—ç®—æ³•")]),a._v(" "),t("ul",[t("li",[t("p",[a._v("ThreadLocalMapåº•å±‚é‡‡ç”¨"),t("strong",[a._v("æ•°ç»„")]),a._v("å­˜å‚¨æ¯ä¸ªå˜é‡å‰¯æœ¬ï¼Œå¹¶å¯¹"),t("strong",[a._v("ThreadLocal")]),a._v("é‡‡ç”¨æ–æ³¢é‚£å¥‘æ•£åˆ—è®¡ç®—å…ƒç´ å­˜å‚¨çš„æ•°ç»„åœ°å€ï¼Œ"),t("strong",[a._v("äº§ç”Ÿç¢°æ’æ—¶é‡‡ç”¨å¼€æ”¾å¯»å€æ³•+1å‘åå¯»å€")]),a._v("ã€‚")])]),a._v(" "),t("li",[t("p",[a._v("æ–æ³¢é‚£å¥‘æ•°åˆ—æ˜¯æè¿°é»„é‡‘åˆ†å‰²æ³•åˆ™çš„æœ€ç»å…¸è¡¨è¾¾å¼ï¼Œå› ä¸ºå½“nè¶‹äºæ— ç©·å¤§æ—¶ï¼Œå‰ä¸€é¡¹ä¸åä¸€é¡¹æ¯”å€¼çš„æé™å¦‚æœå­˜åœ¨ï¼Œé‚£ä¹ˆå®ƒå°±ç­‰äº(æ ¹å·5 - 1)/2ï¼Œçº¦ç­‰äº0.618")])]),a._v(" "),t("li",[t("p",[a._v("åœ¨"),t("strong",[a._v("å¹³æ–¹æ•£åˆ—")]),a._v("ä¸­ï¼Œä¸å†æ˜¯åˆ©ç”¨valueå¾…æ•£åˆ—å€¼ä½œä¸ºä¹˜æ•°ï¼Œè€Œæ˜¯åˆ©ç”¨é»„é‡‘åˆ†å‰²æ³•åˆ™ç”Ÿæˆï¼Œå°±å¾—åˆ°äº†æ–æ³¢é‚£å¥‘æ•£åˆ—ä¸­çš„"),t("strong",[a._v("å“ˆå¸Œé­”æ•°")]),a._v(":")]),a._v(" "),t("table",[t("thead",[t("tr",[t("th",[a._v("ä½æ•°")]),a._v(" "),t("th",[a._v("æ•£åˆ—ä¹˜æ–¹å€¼")])])]),a._v(" "),t("tbody",[t("tr",[t("td",[a._v("16")]),a._v(" "),t("td",[a._v("0.618*2^16=40503")])]),a._v(" "),t("tr",[t("td",[a._v("32")]),a._v(" "),t("td",[a._v("0.618*2^32=2654435769")])])])])]),a._v(" "),t("li",[t("p",[a._v("å¯¹äº32ä½æ•´æ•°ï¼Œæœ€ç»ˆå¾—åˆ°çš„æ–æ³¢é‚£å¥‘æ•£åˆ—å…¬å¼å¦‚ä¸‹ï¼š"),t("font",{attrs:{color:"red"}},[t("strong",[a._v("index = (value * 2654435769) >> 28")])]),a._v(" ã€‚å…¶ä¸­å³ç§»28ä½ç›¸å½“äºä¿ç•™é«˜4ä½ï¼Œæ— ç‰¹åˆ«æ„ä¹‰ã€‚å½“ç„¶è¿™é‡Œå³ç§»æ“ä½œä¹Ÿå¯ä»¥æ”¹æˆå–ä½™è®¡ç®—&(length-1)ï¼Œå…¶ä¸­lengthè¡¨ç¤ºThreadLocalçš„å®¹é‡å¤§å°ã€‚")],1)])]),a._v(" "),t("h3",{attrs:{id:"ğŸš€æŠ½å¥–åœºæ™¯åº”ç”¨"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#ğŸš€æŠ½å¥–åœºæ™¯åº”ç”¨"}},[a._v("#")]),a._v(" ğŸš€æŠ½å¥–åœºæ™¯åº”ç”¨")]),a._v(" "),t("p",[a._v("åœ¨æŠ½å¥–åœºæ™¯ä¸­ï¼Œä½¿ç”¨æ–æ³¢é‚£å¥‘æ•£åˆ—ç”Ÿæˆéšæœºæ•°ï¼š")]),a._v(" "),t("div",{staticClass:"language-java line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("int")]),a._v(" hashcode "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" val "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("*")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("0x61c88647")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("+")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("0x61c88647")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("return")]),a._v(" hashcode"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("&")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("128")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("1")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br"),t("span",{staticClass:"line-number"},[a._v("2")]),t("br")])]),t("ul",[t("li",[a._v("è¿™é‡Œè¿˜è¿›è¡Œä¸€è½®åŠ æ³•è¿ç®—ï¼Œç›®çš„æ˜¯å¢åŠ å¤šç§è¿ç®—æ³•åˆ™ï¼Œæ—¢æœ‰ä¹˜æ³•åˆæœ‰åŠ æ³•ï¼Œä»è€Œæ•£åˆ—æ›´å……åˆ†ã€‚")]),a._v(" "),t("li",[a._v("é€‰æ‹©å¤§äº100çš„æœ€è¿‘2çš„å¹‚æ¬¡æ–¹æ•°è¿›è¡Œ"),t("strong",[a._v("ä¸è¿ç®—")]),a._v("ï¼Œå®é™…ä¸Šä¸å–ä½™è¿ç®—ç­‰ä»·ï¼Œç›®çš„æ˜¯ä¸ºäº†æé«˜è¿ç®—æ•ˆç‡ã€‚")])]),a._v(" "),t("h2",{attrs:{id:"_2-hashmapæ•£åˆ—"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-hashmapæ•£åˆ—"}},[a._v("#")]),a._v(" 2.HashMapæ•£åˆ—")]),a._v(" "),t("h3",{attrs:{id:"æ‰°åŠ¨å‡½æ•°"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#æ‰°åŠ¨å‡½æ•°"}},[a._v("#")]),a._v(" æ‰°åŠ¨å‡½æ•°")]),a._v(" "),t("p",[a._v("å“ˆå¸Œç´¢å¼•ä¸‹æ ‡è®¡ç®—ï¼š")]),a._v(" "),t("p",[a._v("â‘ é¦–å…ˆæ ¹æ®key.hashCode()è®¡ç®—å¾—åˆ°ä¸€ä¸ªå“ˆå¸Œå€¼ã€‚")]),a._v(" "),t("p",[a._v("â‘¡ç»è¿‡æ‰°åŠ¨å‡½æ•°è¿›è¡Œå‡åŒ€æ•£åˆ—ï¼Œå‡å°‘ç¢°æ’ã€‚å…·ä½“æ¥è¯´ï¼Œå–å“ˆå¸Œå€¼çš„é«˜16ä½ä¸åŸå“ˆå¸Œå€¼è¿›è¡Œå¼‚æˆ–æ“ä½œã€‚"),t("strong",[a._v("ä»è€Œå¢åŠ ä½ä½çš„éšæœºæ€§")]),a._v("ï¼Œ")]),a._v(" "),t("p",[a._v("â‘¢å°†ä¸Šè¿°å¾—åˆ°çš„ç»“æœä¸å“ˆå¸Œè¡¨åˆå§‹å¤§å°(8)è¿›è¡Œä¸æ“ä½œã€‚")]),a._v(" "),t("p",[a._v("å…·ä½“è®¡ç®—å…¬å¼å¦‚ä¸‹ï¼š")]),a._v(" "),t("div",{staticClass:"language-java line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("static")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("final")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("int")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("hash")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("Object")]),a._v(" key"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("int")]),a._v(" h"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("return")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("key "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("==")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("null")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("?")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("0")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("h "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" key"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("hashCode")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("^")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("h "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">>>")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("16")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br"),t("span",{staticClass:"line-number"},[a._v("2")]),t("br"),t("span",{staticClass:"line-number"},[a._v("3")]),t("br"),t("span",{staticClass:"line-number"},[a._v("4")]),t("br")])]),t("h3",{attrs:{id:"æ‰©å®¹æ‹†åˆ†"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#æ‰©å®¹æ‹†åˆ†"}},[a._v("#")]),a._v(" æ‰©å®¹æ‹†åˆ†")]),a._v(" "),t("p",[a._v("åœ¨HashMapè¿›è¡Œæ‰©å®¹æ—¶ï¼Œæ‰€æœ‰å…ƒç´ ä¸éœ€è¦é‡æ–°è®¡ç®—å“ˆå¸Œå€¼å¡«å…¥åˆ°æ–°æ•°ç»„çš„ä½ç½®ã€‚åªéœ€è¦åˆ¤æ–­åŸå“ˆå¸Œå€¼åœ¨æ—§æ•°ç»„å¤§å°(2çš„å¹‚æ¬¡æ–¹æ•°)äºŒè¿›åˆ¶æ¯”ç‰¹ä½ä¸Šæ˜¯å¦ä¸º1ï¼Œé‚£ä¹ˆæ–°ç´¢å¼•ä½ç½®ä¸ºæ—§ç´¢å¼•åŠ ä¸Šæ—§æ•°ç»„å¤§å°ã€‚")]),a._v(" "),t("p",[a._v("ä¸¾ä¾‹ï¼šä»16æ‰©å®¹åˆ°32ï¼Œé‚£ä¹ˆåŸå“ˆå¸Œå€¼ä½5ä½çš„å¤§å°åœ¨16~31ä¹‹é—´çš„ï¼Œå…ƒç´ çš„ç´¢å¼•éƒ½éœ€è¦æ”¹å˜ã€‚")]),a._v(" "),t("div",{staticClass:"language-java line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("if")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("e"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("hash "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("&")]),a._v(" oldCap"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("==")]),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("0")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("//ä¸åŠ¨")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("else")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("//ç§»åŠ¨åˆ°æ–°çš„ä½ç½®;")]),a._v("\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br"),t("span",{staticClass:"line-number"},[a._v("2")]),t("br")])]),t("h3",{attrs:{id:"ğŸš€è·¯ç”±ç»„ä»¶è¿ç”¨"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#ğŸš€è·¯ç”±ç»„ä»¶è¿ç”¨"}},[a._v("#")]),a._v(" ğŸš€è·¯ç”±ç»„ä»¶è¿ç”¨")]),a._v(" "),t("div",{staticClass:"language-java line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("int")]),a._v(" idx "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("size "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("1")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("&")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("dbKeyAttr"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("hashCode")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("^")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("dbKeyAttr"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("hashCode")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">>>")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("16")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br")])]),t("ul",[t("li",[a._v("è¿™é‡Œè·¯ç”±åœºæ™¯ä¸­é€‰æ‹©HashMapæ‰°åŠ¨å‡½æ•°çš„æ•£åˆ—ç®—æ³•ï¼Œ"),t("strong",[a._v("æ ¹æ®è®¢å•uIDå€¼æ•£åˆ—åˆ°åˆ†åº“è¡¨çš„ç´¢å¼•ä¸­")]),a._v("ã€‚æ³¨æ„è¿™é‡Œåº“è¡¨è¦æ±‚å°½é‡æ˜¯2çš„å¹‚æ¬¡æ–¹æ•°ï¼Œå¦åˆ™è¿›è¡Œä¸è¿ç®—çš„æ•£åˆ—æ•ˆæœä¸å¥½ã€‚")]),a._v(" "),t("li",[a._v("å®é™…ä¸Šå¤§å‚çš„è·¯ç”±ç­–ç•¥åŸºæœ¬éƒ½æ˜¯é™¤æ³•æ•£åˆ—ã€‚å› ä¸ºåç»­å¦‚æœå¢åŠ æ•°æ®åº“ï¼Œæ‰©å®¹æ¯”è¾ƒç®€å•ã€‚ä½¿ç”¨æ‰°åŠ¨å‡½æ•°ä¸»è¦â‘ åœºæ™¯ä¸å¤§â‘¡å¯ä»¥ç»“åˆæºç å­¦ä¹ çŸ¥è¯†ã€‚")])]),a._v(" "),t("h2",{attrs:{id:"_3-æ¼«è°ˆthreadlocal"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-æ¼«è°ˆthreadlocal"}},[a._v("#")]),a._v(" 3.æ¼«è°ˆThreadLocal")]),a._v(" "),t("h3",{attrs:{id:"thread-threadlocal-threadlocalmapä¸‰è€…å…³ç³»"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#thread-threadlocal-threadlocalmapä¸‰è€…å…³ç³»"}},[a._v("#")]),a._v(" Thread,ThreadLocal,ThreadLocalMapä¸‰è€…å…³ç³»")]),a._v(" "),t("p",[t("img",{attrs:{src:"https://jsd.cdn.zzko.cn/gh/blage-coding/picx-images-hosting@master/20230902/image.48slyb5c0bi0.webp",alt:""}})]),a._v(" "),t("ul",[t("li",[a._v("ä¸€ä¸ªçº¿ç¨‹Threadå¯¹åº”ä¸€ä¸ªThreadLocalMapï¼Œå’Œå¤šä¸ªThreadLocalï¼Œ"),t("strong",[a._v("æ¯ä¸ªThreadLocalç›¸å½“äºä¸€ä¸ªå·¥å…·ç±»ï¼Œç”¨äºä¸€å¯¹ä¸€ç®¡ç†çº¿ç¨‹é‡Œçš„æ¯ä¸ªå˜é‡å‰¯æœ¬")]),a._v("ã€‚ä¸€ä¸ªçº¿ç¨‹è¦æƒ³ä¿å­˜å¤šä¸ªå˜é‡å‰¯æœ¬ï¼Œå°±éœ€è¦åˆ›å»ºå¤šä¸ªThreadLocalã€‚")]),a._v(" "),t("li",[a._v("ThreadLocalMapåº•å±‚æ˜¯ä¸€ä¸ªEntryæ•°ç»„ï¼Œ"),t("strong",[a._v("ä¿å­˜å¤šå¯¹K-Vé”®å€¼å¯¹")]),a._v("ï¼ŒKæ˜¯ThreadLocalå¯¹è±¡ï¼ŒVå€¼ä¸ºå‰¯æœ¬å˜é‡å€¼ã€‚å…¶ä¸­Kå€¼å¹¶æ²¡æœ‰é‡‡ç”¨ä¼ ç»ŸThreadLocalçš„hashcodeæ–¹æ³•ï¼Œè€Œæ˜¯é‡‡ç”¨æ–æ³¢é‚£å¥‘æ•£åˆ—ä»¤å“ˆå¸Œæ§½ä½åˆ†é…å¾—æ›´å‡åŒ€ã€‚")])]),a._v(" "),t("h3",{attrs:{id:"å¼±å¼•ç”¨ä¸å†…å­˜æ³„æ¼"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#å¼±å¼•ç”¨ä¸å†…å­˜æ³„æ¼"}},[a._v("#")]),a._v(" å¼±å¼•ç”¨ä¸å†…å­˜æ³„æ¼")]),a._v(" "),t("p",[a._v("å‰æï¼š"),t("strong",[a._v("ThreadLocalMap")]),a._v("é‡‡ç”¨"),t("font",{attrs:{color:"red"}},[t("strong",[a._v("å¼±å¼•ç”¨")])]),a._v("æ¥å¼•ç”¨key(ThreadLocalå¯¹è±¡)ã€‚"),t("strong",[a._v("å½“å‰ThreadLocalå¯¹è±¡è¢«å¤šä¸ªå¯¹è±¡å¼•ç”¨")]),a._v("ã€‚")],1),a._v(" "),t("p",[a._v("ä¸ºä»€ä¹ˆéœ€è¦è®¾ç½®ä¸ºå¼±å¼•ç”¨ï¼Ÿ")]),a._v(" "),t("ul",[t("li",[a._v("å‡è®¾å½“å‰é™¤äº†å½“å‰çº¿ç¨‹ThreadLocalMapä»¥å¤–ï¼Œå¼•ç”¨ThreadLocalçš„æ‰€æœ‰å¯¹è±¡éƒ½GCå›æ”¶äº†ï¼Œå³ä½¿æ²¡æœ‰æ‰‹åŠ¨åˆ é™¤ï¼Œå› ä¸ºThreadLocalæ˜¯å¼±å¼•ç”¨ï¼Œæœ€åä¹Ÿä¼šè¢«GCå›æ”¶ã€‚")]),a._v(" "),t("li",[a._v("åœ¨java8ä¸­ï¼Œå‰¯æœ¬å˜é‡valueåˆ™åœ¨ä¸‹ä¸€æ¬¡get,setæ–¹æ³•è°ƒç”¨æ—¶(æˆ–æ˜¯åœ¨"),t("strong",[a._v("çº¿ç¨‹ç»“æŸæ—¶")]),a._v(")ï¼Œä¼šè‡ªåŠ¨å°†Entryä¸­keyä¸ºnullçš„å¯¹è±¡è¿›è¡Œå›æ”¶ï¼Œé¿å…å†…å­˜æ³„éœ²çš„é—®é¢˜ã€‚å› æ­¤åªè¦ThreadLocalå¯¹è±¡è¢«å›æ”¶ï¼Œé‚£ä¹ˆå¯¹åº”çš„çº¿ç¨‹å˜é‡ä¹Ÿä¼šè¢«å›æ”¶ã€‚")]),a._v(" "),t("li",[a._v("åœºæ™¯ä¸¾ä¾‹ï¼šä¸€èˆ¬æ¥è¯´ThreadLocalMapç”Ÿå‘½å‘¨æœŸå’ŒThreadä¸€æ ·é•¿ï¼Œ"),t("strong",[a._v("çº¿ç¨‹ä½¿ç”¨ç»“æŸåä¼šå½’è¿˜ç»™çº¿ç¨‹æ± è¿›è¡Œé‡ç”¨")]),a._v("ï¼Œå¹¶ä¸ä¼šé”€æ¯ï¼Œå¦‚æœæ˜¯å¼ºå¼•ç”¨åœºæ™¯ä¸‹KVä¸å†è¢«ä½¿ç”¨ä½†ä¹Ÿä¸ä¼šGCå›æ”¶ï¼Œå‡ºç°å†…å­˜æ³„æ¼ã€‚è€Œå¦‚æœæ˜¯å¼±å¼•ç”¨åœºæ™¯ä¸‹ï¼Œå°±ä¼šè¢«GCå›æ”¶ã€‚")])]),a._v(" "),t("p",[a._v("ç„¶è€Œå³ä¾¿å¦‚æ­¤ï¼Œ"),t("strong",[a._v("ä¾ç„¶å­˜åœ¨å½“å‰çº¿ç¨‹ç»“æŸï¼Œä½†æ˜¯ThreadLocalå¯¹è±¡è¢«å¦ä¸€ä¸ªå¯¹è±¡å¼ºå¼•ç”¨æŒæœ‰ï¼Œä»è€Œå‘ç”Ÿå†…å­˜æ³„éœ²çš„æƒ…å†µ")]),a._v("ã€‚æ¯”å¦‚ï¼šâ‘ é™æ€å˜é‡æŒæœ‰ThreadLocalå¼ºå¼•ç”¨â‘¡å¼‚æ­¥ä»»åŠ¡å½“ä¸­ä½¿ç”¨äº†ThreadLocalå¯¹è±¡â‘¢çº¿ç¨‹æ± ä»»åŠ¡ä¸­ä½¿ç”¨ã€‚å› æ­¤ä¸ºäº†é¿å…å†…å­˜æ³„éœ²çš„æƒ…å†µï¼Œä½¿ç”¨å®Œåéƒ½éœ€è¦æ‰‹åŠ¨åˆ é™¤ã€‚")]),a._v(" "),t("h3",{attrs:{id:"ğŸš€é¡¹ç›®threadlocalæ‰‹åŠ¨åˆ é™¤çš„åœºæ™¯"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#ğŸš€é¡¹ç›®threadlocalæ‰‹åŠ¨åˆ é™¤çš„åœºæ™¯"}},[a._v("#")]),a._v(" ğŸš€é¡¹ç›®ThreadLocalæ‰‹åŠ¨åˆ é™¤çš„åœºæ™¯")]),a._v(" "),t("p",[t("font",{attrs:{color:"red"}},[t("strong",[a._v("â‘ è·¯ç”±é¡¹ç›®ä¸­ï¼Œæ‰§è¡Œåˆ‡é¢æ–¹æ³•ï¼Œæ‹¿åˆ°è¢«æ³¨è§£çš„çš„å±æ€§å€¼å¹¶ç”Ÿæˆåˆ†åº“ç´¢å¼•åï¼Œæœ€åå…³ç³»é”€æ¯ThreadLocal")])])],1),a._v(" "),t("p",[t("font",{attrs:{color:"red"}},[t("strong",[a._v("â‘¡æŠ½å¥–é¡¹ç›®ä¸­ï¼Œxxl-jobæ‰§è¡Œå®šæ—¶ä»»åŠ¡ï¼Œæ‰«æä¸ªäººæ´»åŠ¨è®°å½•è¿›è¡Œè¡¥å¿")])])],1),a._v(" "),t("div",{staticClass:"language-java line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("try")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n\t"),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("return")]),a._v(" userTakeActicityRepository"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("scanInboiceMqState")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v(" \n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("finally")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n\t"),t("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("ThreadLocal")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("remove")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br"),t("span",{staticClass:"line-number"},[a._v("2")]),t("br"),t("span",{staticClass:"line-number"},[a._v("3")]),t("br"),t("span",{staticClass:"line-number"},[a._v("4")]),t("br"),t("span",{staticClass:"line-number"},[a._v("5")]),t("br")])]),t("h2",{attrs:{id:"_4-é›ªå´©æ ‡å‡†æµ‹è¯•"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_4-é›ªå´©æ ‡å‡†æµ‹è¯•"}},[a._v("#")]),a._v(" 4.é›ªå´©æ ‡å‡†æµ‹è¯•")]),a._v(" "),t("p",[a._v("å¯†ç å­¦ä¸Šé›ªå´©æ•ˆåº”æŒ‡çš„æ˜¯è¾“å…¥è½»å¾®å˜åŒ–ï¼Œè¾“å‡ºä¼šå‘ç”Ÿæ˜¾è‘—å˜åŒ–ã€‚ç®€å•æ¥è¯´ï¼Œå¦‚æœä½¿ç”¨æ–æ³¢é‚£å¥‘æ•£åˆ—ï¼Œå½“ä»8åº“32è¡¨æ‰©å®¹åˆ°16åº“32è¡¨æ—¶ï¼Œæ ¹æ®è·¯ç”±ç®—æ³•å¾—åˆ°çš„æ¯ä¸ªåŒºé—´å¾—æ•°æ®å˜åŒ–é‡åº”è¯¥ä¸º50%ã€‚")])])}),[],!1,null,null,null);t.default=n.exports}}]);