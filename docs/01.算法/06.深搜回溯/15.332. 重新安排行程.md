---
title: 332. é‡æ–°å®‰æ’è¡Œç¨‹
date: 2023-07-17 17:07:53
permalink: /pages/d1abfd/
categories:
  - ç®—æ³•
  - æ·±æœå›æº¯
tags:
  - Leetcode
  - å›æº¯
author: 
  name: phan
  link: https://github.com/blage-coding
---
# [332. é‡æ–°å®‰æ’è¡Œç¨‹](https://leetcode.cn/problems/reconstruct-itinerary/)

## 1.ç¬¬ä¸€ç‰ˆè¶…æ—¶ğŸ˜­ğŸ˜­ğŸ˜­

å…³é”®åœ¨äºæŒ‰ç…§å­—å…¸åºè¾“å‡ºç»“æœï¼Œè¿™é‡Œä¸¤ç§æ€è·¯éƒ½**è¶…æ—¶**äº†ï¼š

- ç¬¬ä¸€ç§ï¼šdfs**æœé›†æ‰€æœ‰çš„è·¯å¾„**ï¼Œç„¶åä½¿ç”¨**Collections.sort**å¯¹æ‰€æœ‰è·¯å¾„æŒ‰ç…§å­—å…¸åºè¿›è¡Œæ’åºã€‚âŒ
- ç¬¬äºŒç§ï¼šç»è¿‡å‰é¢çš„æ•™è®­ï¼Œæ²¡å¿…è¦æœé›†æ‰€æœ‰çš„è·¯å¾„ï¼Œåªéœ€è¦ç»´æŠ¤ä¸€ä¸ªæœ€å°å­—å…¸åºè·¯å¾„ã€‚**åŒä¸€ä¸ªç´¢å¼•ä¸‹å¦‚æœ"å½“å‰ç›®çš„åœ°"æ¯”"æœ€å°è·¯å¾„ä¸­çš„ç›®çš„åœ°"çš„å­—å…¸åºè¿˜è¦å¤§ï¼Œé‚£ä¹ˆå½“å‰æ–°è·¯å¾„å°±ä¸éœ€è¦å¾€ä¸‹æœç´¢äº†**ï¼›å¦åˆ™æ›´æ–°æœ€å°è·¯å¾„ã€‚ä½†æ˜¯è¿™ç§æ–¹æ³•å®ç°æ¯”è¾ƒå¤æ‚ï¼Œå‡è®¾å½“å‰ç›®çš„åœ°ä¸éœ€è¦â€œè¿›è¡Œè¿‡æ»¤åˆ¤æ–­â€ï¼Œå¾€ä¸‹æœç´¢æ—¶å¦‚æœæ›´æ–°äº†æœ€å°è·¯å¾„ï¼Œæ­¤æ—¶åˆéœ€è¦è¿›è¡Œâ€œè¿‡æ»¤åˆ¤æ–­â€ã€‚âŒ(å®é™…ä¸Šè¿™é‡Œå·²ç»æœ‰æ’åºçš„æ„å‘³äº†)

ç¬¬ä¸€ç§æ–¹æ³•ä»£ç å®ç°å¦‚ä¸‹ï¼š

```java
class Solution {
    List<List<String>> res=new ArrayList<>();
    public List<String> findItinerary(List<List<String>> tickets) {
        List<String> path=new ArrayList<>();
        path.add("JFK");
        boolean[] visited=new boolean[tickets.size()];
        dfs(tickets,path,visited,"JFK");
        Collections.sort(res, new Comparator<List<String>>() {
            @Override
            public int compare(List<String> o1, List<String> o2) {
                for (int i = 0; i < o1.size(); i++) {
                    if(o1.get(i).compareTo(o2.get(i))!=0) return o1.get(i).compareTo(o2.get(i));
                }
                return -1;
            }
        });
        return res.get(0);
    }
    public void dfs(List<List<String>> tickets,List<String> path,boolean[] visited,String place){
        if(path.size()==tickets.size()+1){
            res.add(new ArrayList<>(path));
            return;
        }
        for(int i=0;i<tickets.size();i++){
            List<String> list=tickets.get(i);
            if((!visited[i])&&(list.get(0).equals(place))){
                String destination=list.get(1);
                path.add(destination);
                visited[i]=true;
                dfs(tickets,path,visited,destination);
                path.remove(path.size()-1);
                visited[i]=false;
            }
        }
    }
}
```

## 2.æ’åº+å›æº¯

æ ¸å¿ƒæ€è·¯ï¼š<font color="red">**å·²çŸ¥å‡ºå‘ç‚¹æ—¶ï¼Œç›´æ¥æŒ‰ç…§å­—å…¸åºé¡ºåºé€‰æ‹©ä¸‹ä¸€ä¸ªç›®çš„åœ°**</font>ã€‚

- âœ¨ä¿è¯æœ‰åºï¼š**ç›´æ¥å¯¹ticketsæ‰€æœ‰ç›®çš„åœ°æŒ‰ç…§å­—å…¸åºè¿›è¡Œæ’åºï¼Œä¿è¯åŒä¸€ä¸ªå‡ºå‘åœ°æŒ‰ç…§ç´¢å¼•éå†æ—¶æ˜¯æœ‰åºçš„**ã€‚
- å›æº¯æ—¶é€šè¿‡visitedæ•°ç»„æ¥åˆ¤æ–­æ˜¯å¦é‡å¤æœç´¢ã€‚
- **å…¨å±€flagæ§åˆ¶è·¯å¾„åŠ å…¥**ï¼šå› ä¸ºæ¯ä¸ªåœ°ç‚¹åŠ å…¥æ—¶æ˜¯æŒ‰ç…§å­—å…¸åºåŠ å…¥çš„ï¼Œå› æ­¤åªè¦å½“å‰è·¯å¾„sizeåŒ…å«æ‰€æœ‰æœºç¥¨ï¼Œé‚£ä¹ˆæ­¤æ—¶çš„è·¯å¾„å°±æ˜¯æœ€åçš„ç»“æœã€‚

```java
class Solution {
      List<String> res=new ArrayList<>();
     boolean flag = false;
    public  List<String> findItinerary(List<List<String>> tickets) {
        Collections.sort(tickets, new Comparator<List<String>>() {
            @Override
            public int compare(List<String> o1, List<String> o2) {
                return o1.get(1).compareTo(o2.get(1));
            }
        });
        res.add("JFK");
        dfs(tickets, new boolean[tickets.size()], "JFK");
        return res;
    }
    public  void dfs(List<List<String>> tickets, boolean[] visited,String place) {
        if(res.size()==tickets.size()+1){
            flag=true;
            return ;
        } 
        for (int i = 0; i < tickets.size(); i++) {
            List<String> list = tickets.get(i);
            if (list.get(0).equals(place) && !visited[i]&&!flag) {
                visited[i] = true;
                res.add(list.get(1));
                dfs(tickets, visited, list.get(1));
                //ç»“æŸè·¯å¾„æ·»åŠ 
                if(!flag){
                    visited[i] = false;
                res.remove(res.size() - 1);
                }
            }
        }
    }
}
```



## 3.Mapèšåˆ+ä¼˜å…ˆçº§é˜Ÿåˆ—æ’åº+é€†åºé€’å½’

æ ¸å¿ƒï¼š<font color="red">**ä½¿ç”¨ Map<String,PriorityQueue\<String\>\>å¯¹æ‰€æœ‰æ¯ä¸ªå‡ºå‘åœ°çš„æ‰€æœ‰ç›®çš„åœ°è¿›è¡Œèšåˆã€‚èšåˆçš„æ‰€æœ‰ç›®çš„åœ°æŒ‰ç…§å­—å…¸åºæ’åº**</font>ã€‚

å®ç°çš„éš¾ç‚¹åœ¨äºæœ‰åºé˜Ÿåˆ—çš„æœç´¢æ€§åˆ¤æ–­å¦‚ä½•å¤„ç†ï¼Ÿæ˜¾ç„¶<font color="red">**æœ‰åºé˜Ÿåˆ—ç”¨ä¸äº†å›æº¯**</font>ï¼Œ**å›æº¯æ—¶å…¥é˜Ÿå…ƒç´ åˆä¼šæ”¾åˆ°é¦–å…ƒç´ **ã€‚è¿™é‡Œé€’å½’æ—¶ä½¿ç”¨é€†åºè¾“å‡ºçš„æ–¹æ³•ï¼Œ**å…ˆå°†é˜Ÿåˆ—æ‰€æœ‰åœ°ç‚¹æŒ‰ç…§å­—å…¸åºé¡ºåºå‡ºåˆ—ï¼Œæœ€åå†å°†å½“å‰åœ°ç‚¹æ’å…¥ç»“æœé›†**ã€‚

PSï¼šå€’åºæ’å…¥è¿™ä¸€æ‰‹å¾ˆéš¾æƒ³ï¼Œä»…ä¾›å‚è€ƒã€‚

```java
class Solution {
    List<String> res=new ArrayList<>();
    Map<String,PriorityQueue<String>> map=new HashMap<>();
    public List<String> findItinerary(List<List<String>> tickets) {
        for(int i=0;i<tickets.size();i++){
            List<String> list=tickets.get(i);
            if(!map.containsKey(list.get(0))) map.put(list.get(0),new PriorityQueue<String>());
            PriorityQueue<String> queue=map.get(list.get(0));
            queue.offer(list.get(1));
        }
        dfs(tickets,"JFK");
        Collections.reverse(res);
        return res;
    }
    public void dfs(List<List<String>> tickets,String place){
        if(!map.containsKey(place)){
            res.add(place);
            return;
        }
        PriorityQueue<String> queue=map.get(place);
        while(queue.size()>0){
            if(res.size()==tickets.size()+1) return;
            String str=queue.poll();
            dfs(tickets,str);
        }
        //ç”»é¾™ç‚¹ç›
        res.add(place);
    }
}
```