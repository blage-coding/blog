---
title: 337. æ‰“å®¶åŠ«èˆ III
date: 2023-06-07 21:42:20
permalink: /pages/be39fb/
categories:
  - ç®—æ³•
  - äºŒå‰æ ‘
tags:
  - Leetcode
  - äºŒå‰æ ‘
author: 
  name: phan
  link: https://gitee.com/blage-coding
---
# [337. æ‰“å®¶åŠ«èˆ III](https://leetcode.cn/problems/house-robber-iii/)

## 1.æ ‘å½¢dp

æ¯ä¸ªèŠ‚ç‚¹éƒ½æœ‰ä¸¤ç§æœç´¢çŠ¶æ€ï¼ŒæŠ¢æˆ–è€…æ˜¯ä¸æŠ¢ï¼Œå› æ­¤<font color="red">**ç”¨ä¸¤ä¸ªå“ˆå¸Œè¡¨åˆ†åˆ«ä¿å­˜å½“å‰èŠ‚ç‚¹åœ¨ä¸¤ç§çŠ¶æ€ä¸‹çš„æœ€å¤§é‡‘é¢**</font>ã€‚è¦æ³¨æ„ï¼Œ**æ ‘çš„dfsæœ€å¥½ä¸€ä¸ªèŠ‚ç‚¹åªæœç´¢ä¸€æ¬¡ï¼Œå¦åˆ™å› ä¸ºæ ‘å½¢ç»“æ„å®¹æ˜“å¯¼è‡´æ—¶é—´å¤æ‚åº¦å‘ˆæŒ‡æ•°çº§åˆ«å¢é•¿ã€‚**

#### ç¬¬ä¸€ç‰ˆ

ğŸ˜­ğŸ˜­ğŸ˜­è¶…æ—¶ã€‚**å‡½æ•°è¿”å›å½“å‰èŠ‚ç‚¹åœ¨posçŠ¶æ€ä¸‹çš„æœ€å¤§é‡‘å¸æ•°é‡**ã€‚è¿™é‡Œè¦æ˜ç™½ä¸ºä»€ä¹ˆä¼šè¶…æ—¶ï¼Œä¸»è¦åœ¨äºpos==0æ—¶çš„å†™æ³•ï¼Œè™½ç„¶æ˜é¢ä¸Šæ¯ä¸ªèŠ‚ç‚¹ä»…ä»…è®¿é—®äº†ä¸¤æ¬¡ï¼Œæ—¶é—´å¤æ‚åº¦ä¸æ ‡ç­”ç›¸æ¯”ä¹Ÿæ²¡å·®å¤šå°‘ï¼Œå®åˆ™ä¸ç„¶ã€‚å› ä¸ºæ¯ä¸ªèŠ‚ç‚¹éƒ½ä¼šæœç´¢ä½¿ç”¨å’Œä¸ä½¿ç”¨ä¸¤ç§æƒ…å†µï¼Œæ‰€ä»¥åˆ°<font color="red">**å­™å­èŠ‚ç‚¹åŒä¸€ä¸ªçŠ¶æ€ä¼šæœç´¢ä¸¤æ¬¡ï¼Œå†å¾€ä¸‹å°±æ˜¯æŒ‡æ•°çº§åˆ«çš„æ—¶é—´å¤æ‚åº¦**</font>ã€‚

```java
class Solution {
    int res=0;
    public int rob(TreeNode root) {
        return Math.max(dfs(root,-1),dfs(root,1));
    }
    public int dfs(TreeNode root,int pos){
        if(root==null) return 0;
        int temp=0;
        if(pos==1){
            temp+=root.val;
            int left=root.left==null?0:dfs(root.left,-1);
            int right=root.right==null?0:dfs(root.right,-1);
            temp+=left+right;
        }
        else{
            int left=root.left==null?0:Math.max(dfs(root.left,-1),dfs(root.left,1));
            int right=root.right==null?0:Math.max(dfs(root.right,-1),dfs(root.right,1));
            temp+=left+right;
        }
        return temp;
    }
}
```

#### æ”¹è¿›

```java
class Solution {
    Map<TreeNode, Integer> used = new HashMap<>();
    Map<TreeNode, Integer> notused = new HashMap<>();

    public int rob(TreeNode root) {
        dfs(root);
        return Math.max(used.getOrDefault(root, 0), notused.getOrDefault(root, 0));
    }

    public void dfs(TreeNode root) {
        if (root == null) return;
        dfs(root.left);
        dfs(root.right);
        used.put(root, root.val + notused.getOrDefault(root.left, 0) + notused.getOrDefault(root.right, 0));
        notused.put(root, Math.max(notused.getOrDefault(root.left, 0), used.getOrDefault(root.left, 0)) + Math.max(notused.getOrDefault(root.right, 0), used.getOrDefault(root.right, 0)));
    }
}
```

