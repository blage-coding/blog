---
title: 297. äºŒå‰æ ‘çš„åºåˆ—åŒ–ä¸ååºåˆ—åŒ–
date: 2023-05-27 14:05:36
permalink: /pages/aba49a/
categories:
  - ç®—æ³•
  - æ‰‹æ’•ç®—æ³•è®¾è®¡
tags:
  - Leetcode
  - æ‰‹æ’•ç®—æ³•è®¾è®¡
author: 
  name: phan
  link: https://gitee.com/blage-coding
---
# [297. äºŒå‰æ ‘çš„åºåˆ—åŒ–ä¸ååºåˆ—åŒ–](https://leetcode.cn/problems/serialize-and-deserialize-binary-tree/)

## 1.é˜Ÿåˆ—

è§£é¢˜æ€è·¯ï¼šç¼–ç é‡‡ç”¨å…ˆåºéå†ä¿å­˜äºŒå‰æ ‘ã€‚è§£é¢˜å…³é”®åœ¨äº<font color="red">**å¦‚ä½•é€šè¿‡äºŒå‰æ ‘çš„â€œå…ˆåºåºåˆ—â€ç”Ÿæˆæ„å»ºäºŒå‰æ ‘**</font>ã€‚

âš¡âš¡âš¡<font color="red">**è¿™é‡Œçš„åºåˆ—å¹¶ä¸ç­‰åŒäºå…ˆåºéå†åºåˆ—**</font>ï¼Œå¯¹äºæ¯ä¸ªå¶å­èŠ‚ç‚¹ç©ºå­©å­èŠ‚ç‚¹ä¹Ÿä¼šä¿å­˜è¿›å½“å‰åºåˆ—å½“ä¸­ã€‚å› æ­¤è¯¥åºåˆ—æœ‰ä¸€ä¸ªå¾ˆå…³é”®çš„æ€§è´¨ï¼Œ<font color="red">**åªè¦é˜Ÿåˆ—ä¸­å½“å‰èŠ‚ç‚¹ä¸ä¸ºç©ºï¼Œé‚£ä¹ˆä¸‹ä¸€ä¸ªèŠ‚ç‚¹ä¸€å®šæ˜¯å®ƒçš„å·¦å­æ ‘èŠ‚ç‚¹**</font>ã€‚(æ­£å¸¸çš„å‰ä¸­åäºŒå‰æ ‘éå†åºåˆ—**è‡³å°‘éœ€è¦åŒæ—¶çŸ¥é“ä¸¤ä¸ªæ‰èƒ½å¤Ÿæ„å»ºä¸€æ£µå”¯ä¸€çš„äºŒå‰æ ‘**)

é‡‡ç”¨<font color="red">**é˜Ÿåˆ—**</font>ä¿å­˜äºŒå‰æ ‘ï¼Œ**å¦‚æœé˜Ÿåˆ—å…ƒç´ ä¸ä¸ºç©ºï¼Œé‚£ä¹ˆå°±éœ€è¦ç»§ç»­é€’å½’éå†ç”Ÿæˆå…ƒç´ (è·Ÿåºåˆ—åŒ–æ“ä½œä¿æŒä¸€è‡´**)ï¼Œå¦‚æœä¸ºç©ºè¯´æ˜å½“å‰èŠ‚ç‚¹çš„å­èŠ‚ç‚¹ä¸ºç©ºã€‚å…·ä½“æµç¨‹å¦‚ä¸‹ï¼š

- æ„å»ºå·¦å­æ ‘ï¼Œåˆ¤æ–­é˜Ÿåˆ—é˜Ÿé¦–å…ƒç´ 
  - å¦‚æœä¸ºç©ºåˆ™æ„å»ºå³å­æ ‘
  - å¦‚æœä¸ä¸ºç©ºåˆ™ç”Ÿæˆå·¦å­æ ‘èŠ‚ç‚¹ï¼Œå¹¶<font color="red">**é€’å½’æœç´¢å·¦å­æ ‘**</font>
- æ„å»ºå³å­æ ‘
  - å¦‚æœä¸ºç©ºï¼Œè¯´æ˜å½“å‰èŠ‚ç‚¹å·¦å³å­æ ‘æ„å»ºå®Œæ¯•ï¼Œé€€å‡ºå¾ªç¯ã€‚
  - å¦‚æœä¸ä¸ºç©ºï¼Œç”Ÿæˆå³å­æ ‘ï¼Œå¹¶é€’å½’æœç´¢å³å­æ ‘

```java
public class Codec {

    // Encodes a tree to a single string.
    public String serialize(TreeNode root) {
        StringBuilder s=new StringBuilder();
        dfs(root,s);
        return s.toString();
    }

    // Decodes your encoded data to tree.
    public TreeNode deserialize(String data) {
        String[] str=data.split(",");
        List<String> list=new ArrayList<>(Arrays.asList(str));
        TreeNode root=str[0].equals("null")?null:new TreeNode(Integer.valueOf(str[0]));
        list.remove(0);
        build(root,list);      
        return root;

    }
    public void dfs(TreeNode root,StringBuilder s){
        if(root==null){
            s.append("null,");
            return ;
        }
        s.append(String.valueOf(root.val)+",");
        dfs(root.left,s);
        dfs(root.right,s);
    }
    public void build(TreeNode root, List<String> list){
        if(list.size()==0) return ;
        if(list.get(0).equals("null")){
            root.left=null;
            list.remove(0);
        }else{
            root.left=new TreeNode(Integer.valueOf(list.get(0)));
            list.remove(0);
            build(root.left,list);
        }
        if(list.get(0).equals("null")){
            root.right=null;
            list.remove(0);
        }else{
            root.right=new TreeNode(Integer.valueOf(list.get(0)));
            list.remove(0);
            build(root.right,list);
        }
        return;
       
    }
}
```

# 2.æ•°ç»„å­˜å‚¨äºŒå‰æ ‘

ğŸ˜­ğŸ˜­ğŸ˜­æ•°ç»„ç´¢å¼•çˆ†äº†æ²¡è¿‡ï¼Œä»…åˆ†äº«æ€è·¯

- è§£é¢˜æ€è·¯

ä½¿ç”¨ä¸€ç»´æ•°ç»„å­˜å‚¨äºŒå‰æ ‘ï¼Œæ ¸å¿ƒæ˜¯é€šè¿‡ç´¢å¼•ä¸‹æ ‡æ¥æ‰¾åˆ°å½“å‰èŠ‚ç‚¹çš„å·¦å³å­©å­èŠ‚ç‚¹ï¼Œä¸éœ€è¦åœ¨å­—ç¬¦ä¸²ä¸­å¦å¤–å­˜å‚¨äºŒå‰æ ‘çš„ç»“æ„ã€‚

å¯¹äºä¸€ä¸ªç´¢å¼•ä¸‹æ ‡ä¸ºièŠ‚ç‚¹ï¼Œå®ƒçš„å·¦å­æ ‘çš„ç´¢å¼•ä¸º2\*i+1ï¼Œå³å­æ ‘çš„ç´¢å¼•ä¸º2\*i+2ã€‚

- é—®é¢˜

å¯¹äºéå¹³è¡¡çš„äºŒå‰æ ‘ï¼Œä¾‹å¦‚ä¸€æ£µåªæœ‰å³å­©å­çš„éå¸¸ä¸å¹³è¡¡çš„äºŒå‰æ ‘ï¼Œ<font color="red">**æ ‘çš„å±‚æ•°æ¯å¢åŠ ä¸€å±‚ï¼Œç´¢å¼•ä¸‹æ ‡å‘ˆæŒ‡æ•°çº§åˆ«å¢é•¿ï¼Œå®¹æ˜“å¯¼è‡´ç´¢å¼•æ•°å€¼æº¢å‡ºèŒƒå›´çˆ†äº†**</font>ã€‚ä»è€Œåœ¨åºåˆ—åŒ–ä¸­æ²¡æœ‰ä¿å­˜ä¸Šå¯¹åº”èŠ‚ç‚¹ä¿¡æ¯ã€‚

```java
public class Codec {
    // Encodes a tree to a single string.
    public String serialize(TreeNode root) {
        StringBuilder s=new StringBuilder();
        dfs(root,s,0);
        return s.toString();
    }
    // Decodes your encoded data to tree.
    public TreeNode deserialize(String data) {
        String[] str=data.split("!");
        HashMap<Integer,String> map=new HashMap<>();
        for(int i=0;i<str.length;i++){
            String s=str[i];
            String[] split=s.split(",");
            if(split.length==1){
                map.put(Integer.valueOf(split[0]),"null");
            }else {
                map.put(Integer.valueOf(split[0]),split[1]);
            }
        }
        TreeNode root=map.get(0).equals("null")?null:new TreeNode(Integer.valueOf(map.get(0)));
        build(root,map,0);
        return root;

    }
    public void dfs(TreeNode root,StringBuilder s,int i){
        if(root==null){
            s.append(String.valueOf(i)+",!");
            return ;
        }
        s.append(String.valueOf(i)+","+String.valueOf(root.val)+"!");
        dfs(root.left,s,2*i+1);
        dfs(root.right,s,2*i+2);
    }
    public void build(TreeNode root,HashMap<Integer,String> map,int index){
        if(map.containsKey(index*2+1)&&!map.get(index*2+1).equals("null")){
            String val=map.get(index*2+1);
            root.left=new TreeNode(Integer.valueOf(val));
            build(root.left,map,index*2+1);
        }
        if(map.containsKey(index*2+2)&&!map.get(index*2+2).equals("null")){
            String val=map.get(index*2+2);
            root.right=new TreeNode(Integer.valueOf(val));
            build(root.right,map,index*2+2);
        }
    }
}
```



