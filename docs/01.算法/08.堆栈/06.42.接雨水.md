---
title: 42.接雨水
date: 2023-05-16 19:09:09
permalink: /pages/21e0e6/
categories: 
  - 算法
  - 堆栈
tags: 
  - Leetcode
  - 双指针法
  - 堆栈
author: 
  name: phan
  link: https://gitee.com/blage-coding
---
# 42.接雨水

给定 `n` 个非负整数表示每个宽度为 `1` 的柱子的高度图，计算按此排列的柱子，下雨之后能接多少雨水。

> 输入：height = [0,1,0,2,1,0,1,3,2,1,2,1]
> 输出：6

## 1.双指针法

- 第一次for右往左遍历，记录下每个节点右边的最大值，并**开辟一个数组保存**在其中。第二次for左往右遍历找出每个节点左边的最大值，并计算面积。

- 用双指针，当前**节点能接多少雨水取决于左右两边最大值的最小值**，设置左指针left和右指针right，通过左指针维护左边最大值leftmax,右指针维护右边最大值。当leftmax<rightmax,就可以判断left位置节点能接多少水了，**此时虽然rightmax不一定是left节点的右边最大值，但是leftmax一定是它的左边最小值(因为指针从边界开始维护)，并且leftmax一定是小于left节点右边最大值**。left节点确定后，再向右移动。这里比较难想到的是每次确定结果的位置是在指针的一侧，而不需要left和right相碰。

## 2.单调栈