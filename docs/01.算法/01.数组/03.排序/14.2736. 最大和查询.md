---
title: 2736. æœ€å¤§å’ŒæŸ¥è¯¢
date: 2023-11-17 10:36:56
permalink: /pages/3fe2ca/
categories:
  - ç®—æ³•
  - æ•°ç»„
  - æ’åº
tags:
  - Leetcode
  - æ’åº
author: 
  name: phan
  link: https://gitee.com/blage-coding
---
# [2736. æœ€å¤§å’ŒæŸ¥è¯¢](https://leetcode.cn/problems/maximum-sum-queries/)

## 1.äºŒåˆ†+å•è°ƒæ ˆ

å°†nums1å’Œnums2åˆå¹¶ï¼Œå¹¶è¿›è¡Œé¢„å¤„ç†ã€‚é¢„å¤„ç†åˆ†ä¸ºä¸¤ä¸ªæ­¥éª¤ï¼š

- å°†æ•°ç»„æŒ‰ç…§nums1å…ƒç´ é™åºæ’åº
- å°†æŸ¥è¯¢æ•°ç»„queriesæŒ‰ç…§ç¬¬ä¸€ä¸ªå…ƒç´ (å¯¹åº”nums1é™åˆ¶æ¡ä»¶)é™åºæ’åºã€‚

å¯¹äºæ¯ä¸ªæŸ¥è¯¢ï¼Œå°†numså½“ä¸­ç¬¦åˆnums1çº¦æŸçš„æ•°å¯¹åŠ å…¥å•è°ƒæ ˆå½“ä¸­ï¼Œ**è€Œå‰é¢æ’è¿‡åºï¼Œä¿è¯å•è°ƒæ ˆçš„æ•°å¯¹ä¸­nums1æ˜¯é€’å‡çš„**ã€‚ç„¶åå†å¯¹æ ˆè¿›è¡ŒäºŒåˆ†ï¼Œæ‰¾åˆ°æ»¡è¶³nums2çº¦æŸçš„æ•°å¯¹ã€‚

å¯¹äºæ¯æ¬¡æŸ¥è¯¢ï¼Œå‡è®¾å‰ä¸€ä¸ªå…ƒç´ æ˜¯a,bï¼Œä¸‹ä¸€ä¸ªæ»¡è¶³nums1çº¦æŸçš„æ•°å¯¹æ˜¯c,dã€‚å› ä¸ºå‰é¢é¢„å¤„ç†æ‰€ä»¥æœ‰a>cï¼Œé‚£ä¹ˆæ•°å¯¹ï¼ˆc,dï¼‰çš„å…¥æ ˆæƒ…å†µå¯ä»¥åˆ†ä¸ºä»¥ä¸‹å‡ ç§æƒ…å†µè®¨è®ºï¼š

- å¦‚æœå½“å‰b>=dï¼Œé‚£ä¹ˆåç»­æŸ¥è¯¢å½“ä¸­(a,b)æ¯”(c,d)æ›´æœ‰èµ„æ ¼æˆä¸ºæœ€å¤§å’ŒæŸ¥è¯¢çš„ç»“æœã€‚<font color="red">**å› æ­¤å…¥æ ˆçš„å…ƒç´ ä¸€å®šæ»¡è¶³nums2\[y\]<nums2\[y'\]ï¼Œå³è‡ªæ ˆåº•åˆ°æ ˆé¡¶nums2æ˜¯é€’å¢çš„**</font>ã€‚
- **æ’é™¤æ‰æ ˆä¸­çš„æ— æ•ˆå…ƒç´ **ï¼šå¦‚æœc+d>a+bï¼Œé‚£ä¹ˆåç»­çš„æŸ¥è¯¢å½“ä¸­ï¼Œ(c,d)æ•°å¯¹æ›´æœ‰èµ„æ ¼æˆä¸ºæœ€å¤§å’ŒæŸ¥è¯¢ï¼Œå› ä¸ºæŸ¥è¯¢ä¹Ÿæ˜¯æŒ‰ç…§queries\[0\]é™åºæ’åºçš„ï¼Œå› æ­¤å¦‚æœæœ‰c>=xï¼Œé‚£ä¹ˆåç»­æŸ¥è¯¢ä¸­ä¹Ÿä¸€å®šæœ‰c>=x'ã€‚<font color="red">**å› æ­¤å…¥æ ˆå‰ï¼Œåªè¦æ ˆé¡¶æ•°å¯¹å’Œå°äºå½“å‰æ•°å¯¹å’Œåˆ™éœ€è¦å‡ºæ ˆï¼Œç»´æŠ¤å•è°ƒæ ˆä¸­æ•°å¯¹å’Œæ˜¯é€’å‡çš„**</font>ã€‚

æœ€ç»ˆï¼Œ<font style="background: rgb(255, 240, 102)" >**ç»´æŠ¤çš„å•è°ƒæ ˆè‡ªåº•è‡³æ ˆé¡¶ï¼Œnums1é€’å‡ï¼Œnums2é€’å¢ï¼Œnums1+nums2é€’å‡**</font>ã€‚æœ€åä½¿ç”¨äºŒåˆ†æ‰¾åˆ°æœ€å°æ»¡è¶³nums2<yçš„æ•°å¯¹ï¼Œå³ä¸ºæœ€å¤§å’Œã€‚

ğŸ’¡å¯å‘ï¼šå¤šç»´æ•°ç»„çš„å•è°ƒçº¦æŸé—®é¢˜ï¼Œä¸ä¸€å®šéœ€è¦åŒæ—¶å¯¹å¤šä¸ªç»´åº¦è¿›è¡Œæ’åºï¼Œå¯ä»¥å…ˆå¯¹å…¶ä¸­ä¸€ä¸ªç»´åº¦æ’åºå…¥æ‰‹ï¼Œå†ä½¿ç”¨æ•°æ®ç»“æ„å¯¹å…ƒç´ è¿›è¡Œç­›é€‰è¿‡æ»¤ã€‚

```java
class Solution {
    public int[] maximumSumQueries(int[] nums1, int[] nums2, int[][] queries) {
        int[] res = new int[queries.length];
        int[][] nums = new int[nums1.length][2];
        for (int i = 0; i < nums1.length; i++) {
            nums[i][0] = nums1[i];
            nums[i][1] = nums2[i];
        }
        Arrays.sort(nums, new Comparator<int[]>() {
            public int compare(int[] o1, int[] o2) {
                return o2[0] - o1[0];
            }
        });

        Integer[] queriesInx = new Integer[queries.length];
        for (int i = 0; i < queries.length; i++) {
            queriesInx[i] = i;
        }
        Arrays.sort(queriesInx, new Comparator<Integer>() {
            public int compare(Integer o1, Integer o2) {
                return queries[o2][0] - queries[o1][0];
            }
        });
        
        List<int[]> stack = new ArrayList<>();
        int nums1Inx=0;
        for (int i = 0; i < queries.length; i++) {
            int x = queries[queriesInx[i]][0];
            int y = queries[queriesInx[i]][1];
            //æ‰¾å‡ºæ»¡è¶³nums1>=xçš„å…ƒç´ 
            for (; nums1Inx < nums1.length && nums[nums1Inx][0] >= x; nums1Inx++) {
                int tmpx = nums[nums1Inx][0];
                int tmpy = nums[nums1Inx][1];
                //ç»´æŠ¤å•è°ƒæ ˆå…ƒç´ ï¼šè‡ªæ ˆåº•åˆ°æ ˆé¡¶ä¾æ¬¡æ˜¯ï¼šnums1é€’å‡ï¼Œnums2é€’å¢ï¼Œï¼ˆnums1+nums2ï¼‰é€’å‡
                while (!stack.isEmpty()) {
                    int[] tail = stack.get(stack.size() - 1);
                    if(tail[0]+tail[1]<=tmpx+tmpy) stack.remove(stack.size() - 1);
                    else break;
                }
                 if(stack.isEmpty()||stack.get(stack.size()-1)[1]<tmpy) stack.add(nums[nums1Inx]);
            }
            //äºŒåˆ†
            int ansInx = stack.size()==0?-1:lowhigh(stack, y);
            res[queriesInx[i]] = ansInx == -1 ? -1 : stack.get(ansInx)[0] + stack.get(ansInx)[1];

        }
        return res;
    }

    public int lowhigh(List<int[]> stack, int y) {
        int low = 0, high = stack.size() - 1;
        while (low < high) {
            int mid = (low + high) >> 1;
            if(stack.get(mid)[1]<y) low = mid + 1;
            else high = mid;
        }
        return stack.get(low)[1]>=y?low:-1;
    }
}
```

