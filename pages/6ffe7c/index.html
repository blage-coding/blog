<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>join | Blage&#39;s Coding</title>
    <meta name="generator" content="VuePress 1.9.5">
    <link rel="icon" href="/img/favicon.ico">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/aplayer@1.7.0/dist/APlayer.min.css">
    <script async="async" src="https://cdn.jsdelivr.net/npm/aplayer@1.7.0/dist/APlayer.min.js"></script>
    <script async="async" src="https://cdn.jsdelivr.net/npm/meting@1.1.0/dist/Meting.min.js"></script>
    <meta name="description" content="web后端技术博客,专注学习与总结。spring,redis,git等技术文章。">
    <meta name="keywords" content="后端博客,个人技术博客,后端,spring,redis,springcloud,git,github,markdown">
    <meta name="theme-color" content="#11a8cd">
    
    <link rel="preload" href="/assets/css/0.styles.0bbcb3d9.css" as="style"><link rel="preload" href="/assets/js/app.36a8861c.js" as="script"><link rel="preload" href="/assets/js/2.1ba3a2de.js" as="script"><link rel="preload" href="/assets/js/3.6e4df72f.js" as="script"><link rel="preload" href="/assets/js/383.5ad40cef.js" as="script"><link rel="prefetch" href="/assets/js/10.c58057de.js"><link rel="prefetch" href="/assets/js/100.d441dbf0.js"><link rel="prefetch" href="/assets/js/101.78fe1fa4.js"><link rel="prefetch" href="/assets/js/102.647ce353.js"><link rel="prefetch" href="/assets/js/103.d03a8ab2.js"><link rel="prefetch" href="/assets/js/104.1334d321.js"><link rel="prefetch" href="/assets/js/105.cf0e3cc9.js"><link rel="prefetch" href="/assets/js/106.4e9bdd09.js"><link rel="prefetch" href="/assets/js/107.b22d62f5.js"><link rel="prefetch" href="/assets/js/108.50d6a5bd.js"><link rel="prefetch" href="/assets/js/109.3b9acffe.js"><link rel="prefetch" href="/assets/js/11.d315ddaf.js"><link rel="prefetch" href="/assets/js/110.0234ef0b.js"><link rel="prefetch" href="/assets/js/111.b1bff776.js"><link rel="prefetch" href="/assets/js/112.36c74fab.js"><link rel="prefetch" href="/assets/js/113.560334ae.js"><link rel="prefetch" href="/assets/js/114.adc23b99.js"><link rel="prefetch" href="/assets/js/115.d9e71f5c.js"><link rel="prefetch" href="/assets/js/116.32911c0b.js"><link rel="prefetch" href="/assets/js/117.119c7cf8.js"><link rel="prefetch" href="/assets/js/118.f20c6b9e.js"><link rel="prefetch" href="/assets/js/119.ec1eb812.js"><link rel="prefetch" href="/assets/js/12.ae4fc36f.js"><link rel="prefetch" href="/assets/js/120.2559d9c2.js"><link rel="prefetch" href="/assets/js/121.0ea12d60.js"><link rel="prefetch" href="/assets/js/122.18af1954.js"><link rel="prefetch" href="/assets/js/123.1725de72.js"><link rel="prefetch" href="/assets/js/124.56fca314.js"><link rel="prefetch" href="/assets/js/125.bf30dd23.js"><link rel="prefetch" href="/assets/js/126.b113944a.js"><link rel="prefetch" href="/assets/js/127.b3e875c8.js"><link rel="prefetch" href="/assets/js/128.79f2565b.js"><link rel="prefetch" href="/assets/js/129.be36dadc.js"><link rel="prefetch" href="/assets/js/13.90c895cd.js"><link rel="prefetch" href="/assets/js/130.bb4c09ea.js"><link rel="prefetch" href="/assets/js/131.4b78d7b2.js"><link rel="prefetch" href="/assets/js/132.295f777f.js"><link rel="prefetch" href="/assets/js/133.e325508e.js"><link rel="prefetch" href="/assets/js/134.bec1d394.js"><link rel="prefetch" href="/assets/js/135.97742a95.js"><link rel="prefetch" href="/assets/js/136.ec2c8cc6.js"><link rel="prefetch" href="/assets/js/137.88e77cf6.js"><link rel="prefetch" href="/assets/js/138.884c718d.js"><link rel="prefetch" href="/assets/js/139.34be5c25.js"><link rel="prefetch" href="/assets/js/14.04e3cf36.js"><link rel="prefetch" href="/assets/js/140.622c35eb.js"><link rel="prefetch" href="/assets/js/141.79713e4e.js"><link rel="prefetch" href="/assets/js/142.534b8172.js"><link rel="prefetch" href="/assets/js/143.28d59575.js"><link rel="prefetch" href="/assets/js/144.51695ffa.js"><link rel="prefetch" href="/assets/js/145.9d456e08.js"><link rel="prefetch" href="/assets/js/146.5adbeaa3.js"><link rel="prefetch" href="/assets/js/147.349c32df.js"><link rel="prefetch" href="/assets/js/148.a2d1f30a.js"><link rel="prefetch" href="/assets/js/149.6d5375fc.js"><link rel="prefetch" href="/assets/js/15.19b97576.js"><link rel="prefetch" href="/assets/js/150.89d13fd4.js"><link rel="prefetch" href="/assets/js/151.d101e8a6.js"><link rel="prefetch" href="/assets/js/152.82dfb001.js"><link rel="prefetch" href="/assets/js/153.cc88b1e5.js"><link rel="prefetch" href="/assets/js/154.641d5da2.js"><link rel="prefetch" href="/assets/js/155.02185265.js"><link rel="prefetch" href="/assets/js/156.9b846c5d.js"><link rel="prefetch" href="/assets/js/157.ec766749.js"><link rel="prefetch" href="/assets/js/158.85812470.js"><link rel="prefetch" href="/assets/js/159.e2a4d02e.js"><link rel="prefetch" href="/assets/js/16.e71a580e.js"><link rel="prefetch" href="/assets/js/160.232093b0.js"><link rel="prefetch" href="/assets/js/161.bf58a934.js"><link rel="prefetch" href="/assets/js/162.023cd275.js"><link rel="prefetch" href="/assets/js/163.b8b05ef5.js"><link rel="prefetch" href="/assets/js/164.b7d6e1d3.js"><link rel="prefetch" href="/assets/js/165.797e81a7.js"><link rel="prefetch" href="/assets/js/166.7944abe6.js"><link rel="prefetch" href="/assets/js/167.af4a5ead.js"><link rel="prefetch" href="/assets/js/168.35c1d8ee.js"><link rel="prefetch" href="/assets/js/169.448c179e.js"><link rel="prefetch" href="/assets/js/17.e68c492f.js"><link rel="prefetch" href="/assets/js/170.35296827.js"><link rel="prefetch" href="/assets/js/171.11b1cd0a.js"><link rel="prefetch" href="/assets/js/172.e33ff1d7.js"><link rel="prefetch" href="/assets/js/173.a356df93.js"><link rel="prefetch" href="/assets/js/174.b86d39a6.js"><link rel="prefetch" href="/assets/js/175.34d7ca25.js"><link rel="prefetch" href="/assets/js/176.55567c3f.js"><link rel="prefetch" href="/assets/js/177.f19afc0e.js"><link rel="prefetch" href="/assets/js/178.a702d5d3.js"><link rel="prefetch" href="/assets/js/179.d87d300d.js"><link rel="prefetch" href="/assets/js/18.5ad3585a.js"><link rel="prefetch" href="/assets/js/180.efddacb1.js"><link rel="prefetch" href="/assets/js/181.0773dcbe.js"><link rel="prefetch" href="/assets/js/182.922199d1.js"><link rel="prefetch" href="/assets/js/183.bb8bf69d.js"><link rel="prefetch" href="/assets/js/184.96465931.js"><link rel="prefetch" href="/assets/js/185.0c2ff418.js"><link rel="prefetch" href="/assets/js/186.575cead0.js"><link rel="prefetch" href="/assets/js/187.d7267e61.js"><link rel="prefetch" href="/assets/js/188.a830793b.js"><link rel="prefetch" href="/assets/js/189.b1c5d145.js"><link rel="prefetch" href="/assets/js/19.2e88ed9d.js"><link rel="prefetch" href="/assets/js/190.05625483.js"><link rel="prefetch" href="/assets/js/191.cae6fb5c.js"><link rel="prefetch" href="/assets/js/192.866a4f9d.js"><link rel="prefetch" href="/assets/js/193.769e1571.js"><link rel="prefetch" href="/assets/js/194.f89dd1e2.js"><link rel="prefetch" href="/assets/js/195.71d615f2.js"><link rel="prefetch" href="/assets/js/196.9535cbb3.js"><link rel="prefetch" href="/assets/js/197.61c674dd.js"><link rel="prefetch" href="/assets/js/198.7bed473e.js"><link rel="prefetch" href="/assets/js/199.5758239b.js"><link rel="prefetch" href="/assets/js/20.5cf88440.js"><link rel="prefetch" href="/assets/js/200.eb4d48ae.js"><link rel="prefetch" href="/assets/js/201.82c165a6.js"><link rel="prefetch" href="/assets/js/202.5a38dc20.js"><link rel="prefetch" href="/assets/js/203.cb7ca4f9.js"><link rel="prefetch" href="/assets/js/204.9e21b560.js"><link rel="prefetch" href="/assets/js/205.36ca83de.js"><link rel="prefetch" href="/assets/js/206.70bb2865.js"><link rel="prefetch" href="/assets/js/207.39285f7f.js"><link rel="prefetch" href="/assets/js/208.9727449e.js"><link rel="prefetch" href="/assets/js/209.480868c5.js"><link rel="prefetch" href="/assets/js/21.0f587ebb.js"><link rel="prefetch" href="/assets/js/210.8e4c1210.js"><link rel="prefetch" href="/assets/js/211.bc7340f1.js"><link rel="prefetch" href="/assets/js/212.4c04ab90.js"><link rel="prefetch" href="/assets/js/213.3dbe7bec.js"><link rel="prefetch" href="/assets/js/214.72b272b2.js"><link rel="prefetch" href="/assets/js/215.7713d7e1.js"><link rel="prefetch" href="/assets/js/216.9998b17d.js"><link rel="prefetch" href="/assets/js/217.00976274.js"><link rel="prefetch" href="/assets/js/218.69766931.js"><link rel="prefetch" href="/assets/js/219.bdfa4000.js"><link rel="prefetch" href="/assets/js/22.66938927.js"><link rel="prefetch" href="/assets/js/220.50939e62.js"><link rel="prefetch" href="/assets/js/221.a0f45610.js"><link rel="prefetch" href="/assets/js/222.c6ab25f6.js"><link rel="prefetch" href="/assets/js/223.2dd963d3.js"><link rel="prefetch" href="/assets/js/224.69bbd7eb.js"><link rel="prefetch" href="/assets/js/225.0545e5e8.js"><link rel="prefetch" href="/assets/js/226.af45c420.js"><link rel="prefetch" href="/assets/js/227.ccd29bac.js"><link rel="prefetch" href="/assets/js/228.c1ac5069.js"><link rel="prefetch" href="/assets/js/229.fa3e6383.js"><link rel="prefetch" href="/assets/js/23.e1858dde.js"><link rel="prefetch" href="/assets/js/230.3a18d3c5.js"><link rel="prefetch" href="/assets/js/231.7dc7e87a.js"><link rel="prefetch" href="/assets/js/232.573fe260.js"><link rel="prefetch" href="/assets/js/233.c2272e2b.js"><link rel="prefetch" href="/assets/js/234.4e314017.js"><link rel="prefetch" href="/assets/js/235.3174500c.js"><link rel="prefetch" href="/assets/js/236.d95ffa02.js"><link rel="prefetch" href="/assets/js/237.d7dfeea0.js"><link rel="prefetch" href="/assets/js/238.92a9dcb3.js"><link rel="prefetch" href="/assets/js/239.3a4f01eb.js"><link rel="prefetch" href="/assets/js/24.44bdfaed.js"><link rel="prefetch" href="/assets/js/240.876d4f10.js"><link rel="prefetch" href="/assets/js/241.616936d2.js"><link rel="prefetch" href="/assets/js/242.f2f752c3.js"><link rel="prefetch" href="/assets/js/243.4069438d.js"><link rel="prefetch" href="/assets/js/244.86ad4edb.js"><link rel="prefetch" href="/assets/js/245.284662ca.js"><link rel="prefetch" href="/assets/js/246.7ce74ad7.js"><link rel="prefetch" href="/assets/js/247.eb3810ae.js"><link rel="prefetch" href="/assets/js/248.550f457d.js"><link rel="prefetch" href="/assets/js/249.a70de1d1.js"><link rel="prefetch" href="/assets/js/25.6853aa09.js"><link rel="prefetch" href="/assets/js/250.a754c631.js"><link rel="prefetch" href="/assets/js/251.7bf447c9.js"><link rel="prefetch" href="/assets/js/252.799bdf8c.js"><link rel="prefetch" href="/assets/js/253.c8aaba6a.js"><link rel="prefetch" href="/assets/js/254.b121e13e.js"><link rel="prefetch" href="/assets/js/255.b0cfb063.js"><link rel="prefetch" href="/assets/js/256.ed0ed666.js"><link rel="prefetch" href="/assets/js/257.2e062555.js"><link rel="prefetch" href="/assets/js/258.05919381.js"><link rel="prefetch" href="/assets/js/259.44720e3c.js"><link rel="prefetch" href="/assets/js/26.ef6c57c1.js"><link rel="prefetch" href="/assets/js/260.e096a742.js"><link rel="prefetch" href="/assets/js/261.fdbac558.js"><link rel="prefetch" href="/assets/js/262.c9d8c9c5.js"><link rel="prefetch" href="/assets/js/263.08b4de4e.js"><link rel="prefetch" href="/assets/js/264.553602b0.js"><link rel="prefetch" href="/assets/js/265.d3dcefe2.js"><link rel="prefetch" href="/assets/js/266.42a9274f.js"><link rel="prefetch" href="/assets/js/267.e2944502.js"><link rel="prefetch" href="/assets/js/268.aacc7772.js"><link rel="prefetch" href="/assets/js/269.76d03dd9.js"><link rel="prefetch" href="/assets/js/27.e96ead6a.js"><link rel="prefetch" href="/assets/js/270.2f128965.js"><link rel="prefetch" href="/assets/js/271.f994de25.js"><link rel="prefetch" href="/assets/js/272.0cea3b07.js"><link rel="prefetch" href="/assets/js/273.f890dfd0.js"><link rel="prefetch" href="/assets/js/274.bde1c133.js"><link rel="prefetch" href="/assets/js/275.a9694b76.js"><link rel="prefetch" href="/assets/js/276.e7e84972.js"><link rel="prefetch" href="/assets/js/277.56f9472a.js"><link rel="prefetch" href="/assets/js/278.ca08c74d.js"><link rel="prefetch" href="/assets/js/279.6a0c4b12.js"><link rel="prefetch" href="/assets/js/28.412943f9.js"><link rel="prefetch" href="/assets/js/280.c7b9e790.js"><link rel="prefetch" href="/assets/js/281.314e20e4.js"><link rel="prefetch" href="/assets/js/282.be50d936.js"><link rel="prefetch" href="/assets/js/283.9b181761.js"><link rel="prefetch" href="/assets/js/284.0ed9a91c.js"><link rel="prefetch" href="/assets/js/285.81d1433b.js"><link rel="prefetch" href="/assets/js/286.04db9923.js"><link rel="prefetch" href="/assets/js/287.0ef2023a.js"><link rel="prefetch" href="/assets/js/288.84c15ce5.js"><link rel="prefetch" href="/assets/js/289.81aa577f.js"><link rel="prefetch" href="/assets/js/29.a04dbce9.js"><link rel="prefetch" href="/assets/js/290.b67ecb11.js"><link rel="prefetch" href="/assets/js/291.095b30ff.js"><link rel="prefetch" href="/assets/js/292.c747922c.js"><link rel="prefetch" href="/assets/js/293.57b8c98f.js"><link rel="prefetch" href="/assets/js/294.29418f3b.js"><link rel="prefetch" href="/assets/js/295.863b9f10.js"><link rel="prefetch" href="/assets/js/296.b9e0cc9e.js"><link rel="prefetch" href="/assets/js/297.21c59e8e.js"><link rel="prefetch" href="/assets/js/298.5e7a00a0.js"><link rel="prefetch" href="/assets/js/299.3b576148.js"><link rel="prefetch" href="/assets/js/30.be3a4b17.js"><link rel="prefetch" href="/assets/js/300.88314dc9.js"><link rel="prefetch" href="/assets/js/301.837cefed.js"><link rel="prefetch" href="/assets/js/302.e09ac2f9.js"><link rel="prefetch" href="/assets/js/303.8d012a66.js"><link rel="prefetch" href="/assets/js/304.ab5a9b9f.js"><link rel="prefetch" href="/assets/js/305.a6ca89cd.js"><link rel="prefetch" href="/assets/js/306.2d9e8a8c.js"><link rel="prefetch" href="/assets/js/307.669c19f5.js"><link rel="prefetch" href="/assets/js/308.85d2d989.js"><link rel="prefetch" href="/assets/js/309.30258624.js"><link rel="prefetch" href="/assets/js/31.3b4cf92a.js"><link rel="prefetch" href="/assets/js/310.5f1daa31.js"><link rel="prefetch" href="/assets/js/311.b13b848c.js"><link rel="prefetch" href="/assets/js/312.e7ce7706.js"><link rel="prefetch" href="/assets/js/313.7c1448e0.js"><link rel="prefetch" href="/assets/js/314.4a8bcb5a.js"><link rel="prefetch" href="/assets/js/315.4b3b61ae.js"><link rel="prefetch" href="/assets/js/316.851983eb.js"><link rel="prefetch" href="/assets/js/317.65fda1f5.js"><link rel="prefetch" href="/assets/js/318.5b0681ba.js"><link rel="prefetch" href="/assets/js/319.eab916b3.js"><link rel="prefetch" href="/assets/js/32.1009e817.js"><link rel="prefetch" href="/assets/js/320.3964c648.js"><link rel="prefetch" href="/assets/js/321.98892efe.js"><link rel="prefetch" href="/assets/js/322.3e056383.js"><link rel="prefetch" href="/assets/js/323.f5bd5f27.js"><link rel="prefetch" href="/assets/js/324.52b992bd.js"><link rel="prefetch" href="/assets/js/325.3d6ec4cc.js"><link rel="prefetch" href="/assets/js/326.c03333c8.js"><link rel="prefetch" href="/assets/js/327.bf4f3b61.js"><link rel="prefetch" href="/assets/js/328.d91ebcce.js"><link rel="prefetch" href="/assets/js/329.0dff70ac.js"><link rel="prefetch" href="/assets/js/33.a36484ca.js"><link rel="prefetch" href="/assets/js/330.7caf6c7c.js"><link rel="prefetch" href="/assets/js/331.0f6f75e7.js"><link rel="prefetch" href="/assets/js/332.822ffb16.js"><link rel="prefetch" href="/assets/js/333.ecd22088.js"><link rel="prefetch" href="/assets/js/334.13125819.js"><link rel="prefetch" href="/assets/js/335.caa18f52.js"><link rel="prefetch" href="/assets/js/336.e349a6ec.js"><link rel="prefetch" href="/assets/js/337.aae6617f.js"><link rel="prefetch" href="/assets/js/338.29bfe09e.js"><link rel="prefetch" href="/assets/js/339.7f9972a2.js"><link rel="prefetch" href="/assets/js/34.ecb5ee6d.js"><link rel="prefetch" href="/assets/js/340.b234848b.js"><link rel="prefetch" href="/assets/js/341.f2bf78a2.js"><link rel="prefetch" href="/assets/js/342.f272119e.js"><link rel="prefetch" href="/assets/js/343.51038386.js"><link rel="prefetch" href="/assets/js/344.026dad95.js"><link rel="prefetch" href="/assets/js/345.cc52ec50.js"><link rel="prefetch" href="/assets/js/346.49bf455b.js"><link rel="prefetch" href="/assets/js/347.19a34365.js"><link rel="prefetch" href="/assets/js/348.128c9e0f.js"><link rel="prefetch" href="/assets/js/349.9f3daf6b.js"><link rel="prefetch" href="/assets/js/35.c315a737.js"><link rel="prefetch" href="/assets/js/350.b2a2eeaa.js"><link rel="prefetch" href="/assets/js/351.a8d13a5a.js"><link rel="prefetch" href="/assets/js/352.2c7a0e40.js"><link rel="prefetch" href="/assets/js/353.ca0c65e0.js"><link rel="prefetch" href="/assets/js/354.74684d12.js"><link rel="prefetch" href="/assets/js/355.4b4e1ed4.js"><link rel="prefetch" href="/assets/js/356.873f616d.js"><link rel="prefetch" href="/assets/js/357.495b41b7.js"><link rel="prefetch" href="/assets/js/358.9baa2811.js"><link rel="prefetch" href="/assets/js/359.dc1dcb16.js"><link rel="prefetch" href="/assets/js/36.6be141ba.js"><link rel="prefetch" href="/assets/js/360.48933205.js"><link rel="prefetch" href="/assets/js/361.f4ea428e.js"><link rel="prefetch" href="/assets/js/362.422ec9b2.js"><link rel="prefetch" href="/assets/js/363.b829dc7f.js"><link rel="prefetch" href="/assets/js/364.4ec4ee9b.js"><link rel="prefetch" href="/assets/js/365.3ccbfd91.js"><link rel="prefetch" href="/assets/js/366.c1f854bd.js"><link rel="prefetch" href="/assets/js/367.739b54b3.js"><link rel="prefetch" href="/assets/js/368.d6db3651.js"><link rel="prefetch" href="/assets/js/369.411e5e78.js"><link rel="prefetch" href="/assets/js/37.7d8a4488.js"><link rel="prefetch" href="/assets/js/370.9f9b2494.js"><link rel="prefetch" href="/assets/js/371.24693fff.js"><link rel="prefetch" href="/assets/js/372.cd4efc79.js"><link rel="prefetch" href="/assets/js/373.5191c19e.js"><link rel="prefetch" href="/assets/js/374.350a6c41.js"><link rel="prefetch" href="/assets/js/375.0d4f7c5f.js"><link rel="prefetch" href="/assets/js/376.a0ae96ae.js"><link rel="prefetch" href="/assets/js/377.6f112bc0.js"><link rel="prefetch" href="/assets/js/378.b3ad1ecf.js"><link rel="prefetch" href="/assets/js/379.bb251ea3.js"><link rel="prefetch" href="/assets/js/38.2b0ed5fe.js"><link rel="prefetch" href="/assets/js/380.c7100500.js"><link rel="prefetch" href="/assets/js/381.b2f7e7d6.js"><link rel="prefetch" href="/assets/js/382.8e62b8aa.js"><link rel="prefetch" href="/assets/js/384.62718694.js"><link rel="prefetch" href="/assets/js/385.7687a101.js"><link rel="prefetch" href="/assets/js/386.3aa2ec6b.js"><link rel="prefetch" href="/assets/js/387.080f5944.js"><link rel="prefetch" href="/assets/js/388.d53bfd0d.js"><link rel="prefetch" href="/assets/js/389.30b59475.js"><link rel="prefetch" href="/assets/js/39.d4be9171.js"><link rel="prefetch" href="/assets/js/390.e20ebf2a.js"><link rel="prefetch" href="/assets/js/391.265d7b4a.js"><link rel="prefetch" href="/assets/js/392.ebdeb0d8.js"><link rel="prefetch" href="/assets/js/393.3112584f.js"><link rel="prefetch" href="/assets/js/394.7c754e70.js"><link rel="prefetch" href="/assets/js/395.51eb51ab.js"><link rel="prefetch" href="/assets/js/396.2ac8fa9a.js"><link rel="prefetch" href="/assets/js/397.73b7e0d0.js"><link rel="prefetch" href="/assets/js/398.bfe9fe1b.js"><link rel="prefetch" href="/assets/js/399.3fbe9247.js"><link rel="prefetch" href="/assets/js/4.2cb195dd.js"><link rel="prefetch" href="/assets/js/40.82187d91.js"><link rel="prefetch" href="/assets/js/400.a65cd6d3.js"><link rel="prefetch" href="/assets/js/401.9dc6f11b.js"><link rel="prefetch" href="/assets/js/402.1c996e16.js"><link rel="prefetch" href="/assets/js/403.c2fc87b4.js"><link rel="prefetch" href="/assets/js/404.f295cb4d.js"><link rel="prefetch" href="/assets/js/405.baf800ce.js"><link rel="prefetch" href="/assets/js/406.dd62b585.js"><link rel="prefetch" href="/assets/js/407.8f99059b.js"><link rel="prefetch" href="/assets/js/408.79c37181.js"><link rel="prefetch" href="/assets/js/409.8b8b3e73.js"><link rel="prefetch" href="/assets/js/41.de15dcd3.js"><link rel="prefetch" href="/assets/js/410.4183d880.js"><link rel="prefetch" href="/assets/js/411.9ef5d6df.js"><link rel="prefetch" href="/assets/js/412.ce37597b.js"><link rel="prefetch" href="/assets/js/413.b3a7d5a6.js"><link rel="prefetch" href="/assets/js/414.591bceb5.js"><link rel="prefetch" href="/assets/js/415.cda694b3.js"><link rel="prefetch" href="/assets/js/416.25640d0c.js"><link rel="prefetch" href="/assets/js/417.51f26447.js"><link rel="prefetch" href="/assets/js/418.dcbcdf97.js"><link rel="prefetch" href="/assets/js/419.1059dcfd.js"><link rel="prefetch" href="/assets/js/42.1d792a1c.js"><link rel="prefetch" href="/assets/js/420.d5d37fab.js"><link rel="prefetch" href="/assets/js/421.7854bb4d.js"><link rel="prefetch" href="/assets/js/422.70f45269.js"><link rel="prefetch" href="/assets/js/423.f4e6eb9e.js"><link rel="prefetch" href="/assets/js/424.c4bb6e45.js"><link rel="prefetch" href="/assets/js/425.55e47f2d.js"><link rel="prefetch" href="/assets/js/426.97cbd3ca.js"><link rel="prefetch" href="/assets/js/427.b4327262.js"><link rel="prefetch" href="/assets/js/428.feac2880.js"><link rel="prefetch" href="/assets/js/429.ab1f8568.js"><link rel="prefetch" href="/assets/js/43.a77be863.js"><link rel="prefetch" href="/assets/js/430.d0a4ee37.js"><link rel="prefetch" href="/assets/js/431.cdad8279.js"><link rel="prefetch" href="/assets/js/432.fe559595.js"><link rel="prefetch" href="/assets/js/433.122ba82a.js"><link rel="prefetch" href="/assets/js/434.df8d47d0.js"><link rel="prefetch" href="/assets/js/435.332aa966.js"><link rel="prefetch" href="/assets/js/436.db4094b8.js"><link rel="prefetch" href="/assets/js/437.a4c48f1a.js"><link rel="prefetch" href="/assets/js/438.ed08b26c.js"><link rel="prefetch" href="/assets/js/439.c8866503.js"><link rel="prefetch" href="/assets/js/44.504638ff.js"><link rel="prefetch" href="/assets/js/440.188ca2ff.js"><link rel="prefetch" href="/assets/js/441.449266b3.js"><link rel="prefetch" href="/assets/js/442.d3c849d6.js"><link rel="prefetch" href="/assets/js/443.be797f33.js"><link rel="prefetch" href="/assets/js/444.9c5fa2e4.js"><link rel="prefetch" href="/assets/js/445.e862dc31.js"><link rel="prefetch" href="/assets/js/446.41193f53.js"><link rel="prefetch" href="/assets/js/447.97950dae.js"><link rel="prefetch" href="/assets/js/448.28f60263.js"><link rel="prefetch" href="/assets/js/449.3d8e920d.js"><link rel="prefetch" href="/assets/js/45.6bb2fc1e.js"><link rel="prefetch" href="/assets/js/450.b33ac323.js"><link rel="prefetch" href="/assets/js/451.a29bdef5.js"><link rel="prefetch" href="/assets/js/452.e439e622.js"><link rel="prefetch" href="/assets/js/453.6e2532da.js"><link rel="prefetch" href="/assets/js/454.69ccfbd3.js"><link rel="prefetch" href="/assets/js/455.22596db1.js"><link rel="prefetch" href="/assets/js/456.958addb4.js"><link rel="prefetch" href="/assets/js/457.01dfa630.js"><link rel="prefetch" href="/assets/js/458.245cc853.js"><link rel="prefetch" href="/assets/js/459.3a29da9f.js"><link rel="prefetch" href="/assets/js/46.220fcda2.js"><link rel="prefetch" href="/assets/js/460.f68d5211.js"><link rel="prefetch" href="/assets/js/461.1cc4badc.js"><link rel="prefetch" href="/assets/js/462.f56dbed5.js"><link rel="prefetch" href="/assets/js/463.a4fc68b9.js"><link rel="prefetch" href="/assets/js/464.1449aec4.js"><link rel="prefetch" href="/assets/js/465.3bd78a23.js"><link rel="prefetch" href="/assets/js/466.f2cce87d.js"><link rel="prefetch" href="/assets/js/467.20033fda.js"><link rel="prefetch" href="/assets/js/468.6605b6cc.js"><link rel="prefetch" href="/assets/js/469.0c20f0c7.js"><link rel="prefetch" href="/assets/js/47.e63332df.js"><link rel="prefetch" href="/assets/js/470.3ba54d64.js"><link rel="prefetch" href="/assets/js/471.f2cefd99.js"><link rel="prefetch" href="/assets/js/472.bf7f33a2.js"><link rel="prefetch" href="/assets/js/473.56258d40.js"><link rel="prefetch" href="/assets/js/474.eb884e1c.js"><link rel="prefetch" href="/assets/js/48.768a9a93.js"><link rel="prefetch" href="/assets/js/49.1f8a24a8.js"><link rel="prefetch" href="/assets/js/5.40c1dc66.js"><link rel="prefetch" href="/assets/js/50.2a07120e.js"><link rel="prefetch" href="/assets/js/51.2527531c.js"><link rel="prefetch" href="/assets/js/52.fb084bd7.js"><link rel="prefetch" href="/assets/js/53.3541f39a.js"><link rel="prefetch" href="/assets/js/54.4084d4c6.js"><link rel="prefetch" href="/assets/js/55.0b7de523.js"><link rel="prefetch" href="/assets/js/56.a46277bf.js"><link rel="prefetch" href="/assets/js/57.678c9751.js"><link rel="prefetch" href="/assets/js/58.44469be6.js"><link rel="prefetch" href="/assets/js/59.9036b283.js"><link rel="prefetch" href="/assets/js/6.113d94ad.js"><link rel="prefetch" href="/assets/js/60.8ea6e0d1.js"><link rel="prefetch" href="/assets/js/61.b1441bfd.js"><link rel="prefetch" href="/assets/js/62.4055fa88.js"><link rel="prefetch" href="/assets/js/63.343809c3.js"><link rel="prefetch" href="/assets/js/64.6a37684e.js"><link rel="prefetch" href="/assets/js/65.498b3095.js"><link rel="prefetch" href="/assets/js/66.472c3f67.js"><link rel="prefetch" href="/assets/js/67.ffd3512f.js"><link rel="prefetch" href="/assets/js/68.80e6e1e1.js"><link rel="prefetch" href="/assets/js/69.8ee08ad1.js"><link rel="prefetch" href="/assets/js/7.f2a2af84.js"><link rel="prefetch" href="/assets/js/70.9c7b808d.js"><link rel="prefetch" href="/assets/js/71.0abc26fe.js"><link rel="prefetch" href="/assets/js/72.011b472b.js"><link rel="prefetch" href="/assets/js/73.cb725aa1.js"><link rel="prefetch" href="/assets/js/74.537d7d78.js"><link rel="prefetch" href="/assets/js/75.77394ac8.js"><link rel="prefetch" href="/assets/js/76.b8eecb30.js"><link rel="prefetch" href="/assets/js/77.7afc22e0.js"><link rel="prefetch" href="/assets/js/78.eb08bd7e.js"><link rel="prefetch" href="/assets/js/79.3d08d738.js"><link rel="prefetch" href="/assets/js/8.0fe505d0.js"><link rel="prefetch" href="/assets/js/80.c928504a.js"><link rel="prefetch" href="/assets/js/81.998c413a.js"><link rel="prefetch" href="/assets/js/82.174c8592.js"><link rel="prefetch" href="/assets/js/83.67048269.js"><link rel="prefetch" href="/assets/js/84.9beb2214.js"><link rel="prefetch" href="/assets/js/85.d9c794cc.js"><link rel="prefetch" href="/assets/js/86.26221cd0.js"><link rel="prefetch" href="/assets/js/87.dfa56052.js"><link rel="prefetch" href="/assets/js/88.4dc20bd0.js"><link rel="prefetch" href="/assets/js/89.ee73979e.js"><link rel="prefetch" href="/assets/js/9.7f2610de.js"><link rel="prefetch" href="/assets/js/90.bbad017a.js"><link rel="prefetch" href="/assets/js/91.bae1ea17.js"><link rel="prefetch" href="/assets/js/92.1f075317.js"><link rel="prefetch" href="/assets/js/93.167a2544.js"><link rel="prefetch" href="/assets/js/94.9bcde3bb.js"><link rel="prefetch" href="/assets/js/95.41a0e2d6.js"><link rel="prefetch" href="/assets/js/96.d0cb9dae.js"><link rel="prefetch" href="/assets/js/97.510de6ab.js"><link rel="prefetch" href="/assets/js/98.a3772e11.js"><link rel="prefetch" href="/assets/js/99.5f982463.js">
    <link rel="stylesheet" href="/assets/css/0.styles.0bbcb3d9.css">
  </head>
  <body class="theme-mode-light">
    <div id="app" data-server-rendered="true"><div class="theme-container sidebar-open have-rightmenu"><header class="navbar blur"><div title="目录" class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/img/logo.png" alt="Blage's Coding" class="logo"> <span class="site-name can-hide">Blage's Coding</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">Home</a></div><div class="nav-item"><a href="/leetcode/" class="nav-link">算法</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Spring" class="dropdown-title"><a href="/spring/" class="link-title">Spring</a> <span class="title" style="display:none;">Spring</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/cata/spring/" class="nav-link">手写Spring</a></li><li class="dropdown-item"><!----> <a href="/cata/ssm/" class="nav-link">SSM</a></li><li class="dropdown-item"><!----> <a href="/cata/springboot/" class="nav-link">SpringBoot</a></li><li class="dropdown-item"><!----> <a href="/cata/javaweb/" class="nav-link">JavaWeb</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="JAVA基础" class="dropdown-title"><a href="/java/" class="link-title">JAVA基础</a> <span class="title" style="display:none;">JAVA基础</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/cata/javabasic/" class="nav-link">JAVA基础</a></li><li class="dropdown-item"><!----> <a href="/cata/jihe/" class="nav-link">容器</a></li><li class="dropdown-item"><h4>Netty</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/3e5651/" class="nav-link">IO模型</a></li><li class="dropdown-subitem"><a href="/pages/dc2076/" class="nav-link">Netty初级</a></li><li class="dropdown-subitem"><a href="/pages/9ed934/" class="nav-link">Netty原理</a></li></ul></li><li class="dropdown-item"><!----> <a href="/cata/jvm/" class="nav-link">JVM</a></li><li class="dropdown-item"><!----> <a href="/cata/juc/" class="nav-link">JUC</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Redis" class="dropdown-title"><a href="/redis/" class="link-title">Redis</a> <span class="title" style="display:none;">Redis</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/cata/redisbasic/" class="nav-link">Redis基础</a></li><li class="dropdown-item"><!----> <a href="/cata/redisanalyse/" class="nav-link">源码分析</a></li><li class="dropdown-item"><!----> <a href="/redis/" class="nav-link">实战应用</a></li><li class="dropdown-item"><!----> <a href="/redis/" class="nav-link">单机缓存</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="数据库" class="dropdown-title"><a href="/mysql/" class="link-title">数据库</a> <span class="title" style="display:none;">数据库</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>MySQL</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/mysql/" class="nav-link">基础部分</a></li><li class="dropdown-subitem"><a href="/mysql/" class="nav-link">实战与处理方案</a></li><li class="dropdown-subitem"><a href="/mysql/" class="nav-link">面试</a></li></ul></li><li class="dropdown-item"><h4>ORM框架</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/41f194/" class="nav-link">Mybatis</a></li><li class="dropdown-subitem"><a href="/pages/b188b3/" class="nav-link">Mybatis_Plus</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="中间件" class="dropdown-title"><a href="/cloud/" class="link-title">中间件</a> <span class="title" style="display:none;">中间件</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/cata/alibaba/" class="nav-link">SpringCloudAlibaba</a></li><li class="dropdown-item"><!----> <a href="/cata/mq/" class="nav-link">MQ消息队列</a></li><li class="dropdown-item"><!----> <a href="/cata/nginx/" class="nav-link">Nginx</a></li><li class="dropdown-item"><!----> <a href="/cata/es/" class="nav-link">Elasticsearch</a></li><li class="dropdown-item"><!----> <a href="/pages/b8c685/" class="nav-link">Gateway</a></li><li class="dropdown-item"><!----> <a href="/pages/72792a/" class="nav-link">Xxl-job</a></li><li class="dropdown-item"><!----> <a href="/pages/8bf560/" class="nav-link">Feign</a></li><li class="dropdown-item"><!----> <a href="/pages/d80289/" class="nav-link">Eureka</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="更多" class="dropdown-title"><a href="/more/" class="link-title">更多</a> <span class="title" style="display:none;">更多</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/cata/mianshi/" class="nav-link">面试</a></li><li class="dropdown-item"><!----> <a href="/cata/gongju/" class="nav-link">工具</a></li><li class="dropdown-item"><!----> <a href="/cata/pro/" class="nav-link">项目</a></li><li class="dropdown-item"><!----> <a href="/pages/f2e63f/" class="nav-link">关于</a></li></ul></div></div><div class="nav-item"><a href="/cata/benzhan/" class="nav-link">🌏本站</a></div> <a href="https://github.com/blage-coding/blog" target="_blank" rel="noopener noreferrer" class="repo-link">
    🧸GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar-hover-trigger"></div> <aside class="sidebar" style="display:none;"><!----> <nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">Home</a></div><div class="nav-item"><a href="/leetcode/" class="nav-link">算法</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Spring" class="dropdown-title"><a href="/spring/" class="link-title">Spring</a> <span class="title" style="display:none;">Spring</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/cata/spring/" class="nav-link">手写Spring</a></li><li class="dropdown-item"><!----> <a href="/cata/ssm/" class="nav-link">SSM</a></li><li class="dropdown-item"><!----> <a href="/cata/springboot/" class="nav-link">SpringBoot</a></li><li class="dropdown-item"><!----> <a href="/cata/javaweb/" class="nav-link">JavaWeb</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="JAVA基础" class="dropdown-title"><a href="/java/" class="link-title">JAVA基础</a> <span class="title" style="display:none;">JAVA基础</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/cata/javabasic/" class="nav-link">JAVA基础</a></li><li class="dropdown-item"><!----> <a href="/cata/jihe/" class="nav-link">容器</a></li><li class="dropdown-item"><h4>Netty</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/3e5651/" class="nav-link">IO模型</a></li><li class="dropdown-subitem"><a href="/pages/dc2076/" class="nav-link">Netty初级</a></li><li class="dropdown-subitem"><a href="/pages/9ed934/" class="nav-link">Netty原理</a></li></ul></li><li class="dropdown-item"><!----> <a href="/cata/jvm/" class="nav-link">JVM</a></li><li class="dropdown-item"><!----> <a href="/cata/juc/" class="nav-link">JUC</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Redis" class="dropdown-title"><a href="/redis/" class="link-title">Redis</a> <span class="title" style="display:none;">Redis</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/cata/redisbasic/" class="nav-link">Redis基础</a></li><li class="dropdown-item"><!----> <a href="/cata/redisanalyse/" class="nav-link">源码分析</a></li><li class="dropdown-item"><!----> <a href="/redis/" class="nav-link">实战应用</a></li><li class="dropdown-item"><!----> <a href="/redis/" class="nav-link">单机缓存</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="数据库" class="dropdown-title"><a href="/mysql/" class="link-title">数据库</a> <span class="title" style="display:none;">数据库</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>MySQL</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/mysql/" class="nav-link">基础部分</a></li><li class="dropdown-subitem"><a href="/mysql/" class="nav-link">实战与处理方案</a></li><li class="dropdown-subitem"><a href="/mysql/" class="nav-link">面试</a></li></ul></li><li class="dropdown-item"><h4>ORM框架</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/41f194/" class="nav-link">Mybatis</a></li><li class="dropdown-subitem"><a href="/pages/b188b3/" class="nav-link">Mybatis_Plus</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="中间件" class="dropdown-title"><a href="/cloud/" class="link-title">中间件</a> <span class="title" style="display:none;">中间件</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/cata/alibaba/" class="nav-link">SpringCloudAlibaba</a></li><li class="dropdown-item"><!----> <a href="/cata/mq/" class="nav-link">MQ消息队列</a></li><li class="dropdown-item"><!----> <a href="/cata/nginx/" class="nav-link">Nginx</a></li><li class="dropdown-item"><!----> <a href="/cata/es/" class="nav-link">Elasticsearch</a></li><li class="dropdown-item"><!----> <a href="/pages/b8c685/" class="nav-link">Gateway</a></li><li class="dropdown-item"><!----> <a href="/pages/72792a/" class="nav-link">Xxl-job</a></li><li class="dropdown-item"><!----> <a href="/pages/8bf560/" class="nav-link">Feign</a></li><li class="dropdown-item"><!----> <a href="/pages/d80289/" class="nav-link">Eureka</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="更多" class="dropdown-title"><a href="/more/" class="link-title">更多</a> <span class="title" style="display:none;">更多</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/cata/mianshi/" class="nav-link">面试</a></li><li class="dropdown-item"><!----> <a href="/cata/gongju/" class="nav-link">工具</a></li><li class="dropdown-item"><!----> <a href="/cata/pro/" class="nav-link">项目</a></li><li class="dropdown-item"><!----> <a href="/pages/f2e63f/" class="nav-link">关于</a></li></ul></div></div><div class="nav-item"><a href="/cata/benzhan/" class="nav-link">🌏本站</a></div> <a href="https://github.com/blage-coding/blog" target="_blank" rel="noopener noreferrer" class="repo-link">
    🧸GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>MySQL</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading open"><span>基础部分</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/pages/44db03/" class="sidebar-link">初识MySQL</a></li><li><a href="/pages/b790ce/" class="sidebar-link">基础架构&amp;日志</a></li><li><a href="/pages/d913a0/" class="sidebar-link">事务隔离</a></li><li><a href="/pages/fa982c/" class="sidebar-link">全局锁、表锁、行锁</a></li><li><a href="/pages/b4d13c/" class="sidebar-link">事务的隔离性和行锁</a></li><li><a href="/pages/b935cc/" class="sidebar-link">索引</a></li><li><a href="/pages/6fb183/" class="sidebar-link">索引深入(中)</a></li><li><a href="/pages/97956b/" class="sidebar-link">内存脏页刷盘</a></li><li><a href="/pages/00835e/" class="sidebar-link">数据库表的空间回收</a></li><li><a href="/pages/863a0b/" class="sidebar-link">count</a></li><li><a href="/pages/b8f0e6/" class="sidebar-link">order by</a></li><li><a href="/pages/ccf743/" class="sidebar-link">SQL语句性能差异分析</a></li><li><a href="/pages/7a3d97/" class="sidebar-link">幻读与间隙锁</a></li><li><a href="/pages/626604/" class="sidebar-link">加锁规则案例分析</a></li><li><a href="/pages/efe704/" class="sidebar-link">binlog和redolog如何写入磁盘</a></li><li><a href="/pages/fe5521/" class="sidebar-link">MySQL一致性与高可用性</a></li><li><a href="/pages/c6cffc/" class="sidebar-link">kill命令</a></li><li><a href="/pages/1b68b4/" class="sidebar-link">全表扫描与内存占用</a></li><li><a href="/pages/6ffe7c/" aria-current="page" class="active sidebar-link">join</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level2"><a href="/pages/6ffe7c/#join语句执行流程" class="sidebar-link">join语句执行流程</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/pages/6ffe7c/#_1-索引join查询-nlj" class="sidebar-link">1.索引join查询(NLJ)</a></li><li class="sidebar-sub-header level3"><a href="/pages/6ffe7c/#_2-不走索引的join查询-bnl" class="sidebar-link">2.不走索引的join查询(BNL)</a></li><li class="sidebar-sub-header level4"><a href="/pages/6ffe7c/#_2-1不分块" class="sidebar-link">2.1不分块</a></li><li class="sidebar-sub-header level4"><a href="/pages/6ffe7c/#_2-2分块" class="sidebar-link">2.2分块</a></li><li class="sidebar-sub-header level3"><a href="/pages/6ffe7c/#_3-bnl-分块不走索引-算法对buffer-pool的影响" class="sidebar-link">3.BNL(分块不走索引)算法对buffer pool的影响</a></li><li class="sidebar-sub-header level3"><a href="/pages/6ffe7c/#_4-总结" class="sidebar-link">4.总结</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/pages/6ffe7c/#join语句优化" class="sidebar-link">join语句优化</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/pages/6ffe7c/#_1-muti-range-read优化" class="sidebar-link">1.Muti-Range Read优化</a></li><li class="sidebar-sub-header level3"><a href="/pages/6ffe7c/#_2-nlj优化-batched-key-access" class="sidebar-link">2.NLJ优化——Batched Key Access</a></li><li class="sidebar-sub-header level3"><a href="/pages/6ffe7c/#_3-bnl优化-建立索引" class="sidebar-link">3.BNL优化——建立索引</a></li><li class="sidebar-sub-header level3"><a href="/pages/6ffe7c/#_4-哈希join" class="sidebar-link">4.哈希join</a></li><li class="sidebar-sub-header level3"><a href="/pages/6ffe7c/#_5-三表join优化" class="sidebar-link">5.三表join优化</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/pages/6ffe7c/#join语句写法-left-join与on-where选择" class="sidebar-link">join语句写法(left join与on,where选择)</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/pages/6ffe7c/#q1" class="sidebar-link">Q1</a></li><li class="sidebar-sub-header level3"><a href="/pages/6ffe7c/#q2" class="sidebar-link">Q2</a></li><li class="sidebar-sub-header level3"><a href="/pages/6ffe7c/#q3-q4" class="sidebar-link">Q3&amp;Q4</a></li><li class="sidebar-sub-header level3"><a href="/pages/6ffe7c/#总结" class="sidebar-link">总结</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/pages/6ffe7c/#simple-nlj算法性能问题" class="sidebar-link">Simple NLJ算法性能问题</a></li></ul></li><li><a href="/pages/b0d03e/" class="sidebar-link">临时表与内存表</a></li><li><a href="/pages/d665a8/" class="sidebar-link">自增主键</a></li><li><a href="/pages/065e7e/" class="sidebar-link">insert操作加锁场景分析</a></li><li><a href="/pages/e9ecf2/" class="sidebar-link">grant</a></li><li><a href="/pages/162323/" class="sidebar-link">分区表</a></li><li><a href="/pages/b410c1/" class="sidebar-link">思维导图</a></li></ul></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>实战与处理方案</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>面试</span> <span class="arrow right"></span></p> <!----></section></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>ORM框架</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <div><main class="page"><div class="theme-vdoing-wrapper "><div class="articleInfo-wrap" data-v-06970110><div class="articleInfo" data-v-06970110><ul class="breadcrumbs" data-v-06970110><li data-v-06970110><a href="/" title="首页" class="iconfont icon-home router-link-active" data-v-06970110></a></li> <li data-v-06970110><a href="/mysql/#数据库" data-v-06970110>数据库</a></li><li data-v-06970110><a href="/mysql/#MySQL" data-v-06970110>MySQL</a></li><li data-v-06970110><a href="/mysql/#基础部分" data-v-06970110>基础部分</a></li></ul> <div class="info" data-v-06970110><div title="作者" class="author iconfont icon-touxiang" data-v-06970110><a href="https://github.com/blage-coding" target="_blank" title="作者" class="beLink" data-v-06970110>phan</a></div> <div title="创建时间" class="date iconfont icon-riqi" data-v-06970110><a href="javascript:;" data-v-06970110>2023-07-09</a></div> <!----></div></div></div> <!----> <div class="content-wrapper"><div class="right-menu-wrapper"><div class="right-menu-margin"><div class="right-menu-title">目录</div> <div class="right-menu-content"></div></div></div> <h1><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAAAXNSR0IArs4c6QAABKFJREFUSA3tVl1oFVcQnrMbrak3QUgkya1akpJYcrUtIqW1JvFBE9LiQ5v6JmJpolbMg32rVrhgoYK0QiMY6i9Y6EMaW5D+xFJaTYItIuK2Kr3+BJNwkxBj05sQY3b3nM6cs2dv9t7NT/vQJw/sndk5M/PNzJkzewGerP+pAmy+ON8lLzUJgA8ZYxYIYZmGYRnctDaWvJJAmTtfP1pvXsBCCPP8QFcCaRkZYACgDZFO4stNIcBCajEOlmmC9XpJ9bAGCaPaPmzPl32dvLSVu3BWCTQs0XQQ6g0DYgwLIoAZbBCdW/i+781o1VVlm/410mw4h06Y7bIPHNyWDyL4FHkX03Q8SrzNhZTZriieckWt7cL6MM85YcLpsi/7O9/iXFT6MswI0DmmpkSaJ0qLxFIm3+i1THHB3zmBH3PYx9CcykcLOeQVVa7QtdxTgQgEleX2AjHYfwA+2ddV77ruGoJUbhGDI09YSNXyMpUt5ylOzxgbUmtOp7NmbNt8v3arjTBfYELmLUV+M+nSawNNAUqpT3ClJWg5I3BLT+cGW/DXNGCa6tx1aakCGEigArTn4TDIPdrXXYKCZNrHLMCOEPvHBlLQ99s9eHB7EB6NTki73CVPQ2F5MSx/uRQixfmq7rK0wYD8w8E905bnPDfwoWs/rfv93NWN/ZfvwsLIU7A09gxECyISeGJkHAau98L97tuw7NXnoPyNF8FcYGLGKsOs0mN3OEyec9esGW/ZEl945dTP34wlR2FZVQWU1q0Cw8Tr7p+hgLLNL0FPxx/Q35mA8aEUrH6nCgwEl0tn7wUiZYJnNRh6DK4UH/k0lfyrsBKdPVv/AriGIQcEDQZ65LBAGe2Rzui9Ybjz7XUppz1/uKBbyVPGkN3ZAeC6hr0x7Nr38N5+EqkoOm17xpoqR9ohQF55ERSvr4Dkr3chNfC3DMzGJlNBElW8w9nsGQvhNGIzDkXzCg8cLK951xHsFBlTJspJNi3ZFIMF2AeDV3q8DNOB+YHi6QTrChDIWDBRi5U5f+ZMfJLu3ccrqxtdxk4SKH336LFxSmkqefwU5T8fhdSdQf9IVKD6aNiwI/hnmcAZ91isYMJIaCUCx9W098+LgruikeTqzqqxKPUwqJyCPJiyemVVZBOijDGjD38Os0jOiSPL1z3SPjXNANbiNPXAdzTfukjjuknNBbyz3nwgTd3AVFqUJ5hpHlq9MveLnWwttUfoygBmvVjuikxND3znrhsELnZk7k+OjIGxeNEkomyLVta0xxn+HZhjBc4YZ/AFjHjz9u3xRZl2BN4aq9nFwWh16IrQ1aHHEd3j1+4/dB9OtH4e29A2H1DyHQRmOSfQZ1Fy7MHBTGB6J/Djq6p3OxyO2cB+4Car7v/o3GXgfAkj23+x9ID1Teoamo/SXcbvSf2PX7Vc8DdCmE1vN9di+32P9/5YR3vLnhCVGUWBjEkr3yh4H8v9CzmsbdhzOKzsJKM90iFdaTMjRPhGVsakRvOaRidljo6H6G7j+ctrJpsP+4COhDIl0La2+FS4+5mlocBaXY5QnGZysIBYoeSsl5qQzrSj/cgNrfuEzlWBfwA+EjrZyWUvpAAAAABJRU5ErkJggg==">join<!----></h1>  <div class="theme-vdoing-content content__default"><h1 id="join"><a href="#join" class="header-anchor">#</a> join</h1> <p>使用join存在什么问题？下面围绕join语句的执行流程，使用前面学过的索引知识展开。</p> <h2 id="join语句执行流程"><a href="#join语句执行流程" class="header-anchor">#</a> join语句执行流程</h2> <p>场景：t1和t2表同时都有主键id，索引字段a，无索引字段b。t2表插入了1000行数据，t1表中插入了100行数据。</p> <h3 id="_1-索引join查询-nlj"><a href="#_1-索引join查询-nlj" class="header-anchor">#</a> 1.索引join查询(NLJ)</h3> <p>使用<font color="#d94a33" style="background:rgb(240, 240, 236);"><strong>straight_join</strong></font>显示指定t1作为驱动表，t2作为被驱动表。整个语句执行过程如下：</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> t1 straight_join t2 <span class="token keyword">on</span> <span class="token punctuation">(</span>t1<span class="token punctuation">.</span>a<span class="token operator">=</span>t2<span class="token punctuation">.</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ol><li>首先对t1会进行全表查询，然后将每一行扫描的数据放到t2表中进行比较。因此t1总共扫描<strong>100</strong>行数据。</li> <li>由于是对t2的a字段进行匹配，可以走索引。因此每行t1的行记录都会取出a字段值，在t2的a字段索引树进行比对，然后回表拿到t2的行记录并和t1的行记录拼接。</li> <li>这里假设t1表中的数据和t2唯一对应。因此t2也会扫描100行数据。总共扫描行数为200。</li></ol> <p>可以发现在这种条件下的join语句有如下特点：</p> <ul><li><strong>走了索引的join语句比拆成多个单表语句的执行性能好</strong>。如果选择拆成单表的语句，首先从t1拿到全表扫描结果，然后每次取出a字段的值，接着执行100次SQL语句拼接where a=$t1.a。扫描行数虽然和join相同，但是执行了101条SQL语句。</li> <li>驱动表会走全表扫描，因此尽量<font color="red"><strong>让小表作为驱动表</strong></font>。</li></ul> <h3 id="_2-不走索引的join查询-bnl"><a href="#_2-不走索引的join查询-bnl" class="header-anchor">#</a> 2.不走索引的join查询(BNL)</h3> <p><font color="red"><strong>如果join字段不走索引，那么不适合使用join查询，应该拆成单表</strong></font>。</p> <h4 id="_2-1不分块"><a href="#_2-1不分块" class="header-anchor">#</a> 2.1不分块</h4> <p>如果是被驱动表没有走索引又会怎么样？t2会扫描100*1000行数据么？实际算法流程如下：</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> t1 straight_join t2 <span class="token keyword">on</span> <span class="token punctuation">(</span>t1<span class="token punctuation">.</span>a<span class="token operator">=</span>t2<span class="token punctuation">.</span>b<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ol><li><strong>将t1表的所有行数据读入线程的内存<font color="#d94a33" style="background:rgb(240, 240, 236);">join_buffer</font>当中</strong>。扫描行数100</li> <li>t2表进行全表扫描，取出扫描到的每行数据，与内存<font color="#d94a33" style="background:rgb(240, 240, 236);"><strong>join_buffer</strong></font>中的t1表数据进行<font color="red"><strong>比对</strong></font>，满足连接条件的与t2表记录拼接作为其中一个结果集。扫描行数1000，总共扫描行数1100。<strong>比较判断次数</strong>100*1000=十万次。</li> <li>相比于t2表直接扫描十万行，时间复杂度相同。但是比较判断操作是在内存进行，因此速度上会快很多。</li></ol> <p>此时驱动表无论是大表还是小表，比较次数和扫描次数都没有区别。</p> <h4 id="_2-2分块"><a href="#_2-2分块" class="header-anchor">#</a> 2.2分块</h4> <p>这里如果<font color="#d94a33" style="background:rgb(240, 240, 236);"><strong>join_buffer</strong></font>一次性放不下表t1(假设只能放进60行记录)，那么需要将t1表<font color="red"><strong>分块</strong></font>放进<font color="#d94a33" style="background:rgb(240, 240, 236);"><strong>join_buffer</strong></font>：</p> <ol><li>先将t1表前60行记录放入内存<font color="#d94a33" style="background:rgb(240, 240, 236);"><strong>join_buffer</strong></font>。</li> <li>扫描t2表的所有行记录，并进行比较。此时扫描行数1000条。</li> <li>清空<font color="#d94a33" style="background:rgb(240, 240, 236);"><strong>join_buffer</strong></font>，然后将t1表后40行记录放入<font color="#d94a33" style="background:rgb(240, 240, 236);"><strong>join_buffer</strong></font>当中。</li> <li>再次扫描t2表所有记录，并进行比较判断。总比较次数不变还是十万次，而<strong>总扫描函数翻倍</strong>变为2000条。</li></ol> <p>根据计算，<font color="red"><strong>分块join场景应该让小表作为驱动表，并且应该将join_buffer_size设大一些，从而降低总扫描次数，提高join语句执行效率</strong></font>。</p> <h3 id="_3-bnl-分块不走索引-算法对buffer-pool的影响"><a href="#_3-bnl-分块不走索引-算法对buffer-pool的影响" class="header-anchor">#</a> 3.BNL(分块不走索引)算法对buffer pool的影响</h3> <p>前面提到如果buffer pool分为old区域和young区域，如果old区域的数据页超过1s如果再次被访问就会被放到young区域。对于使用了BNL算法的join语句，在以下情况可能会影响到buffer pool：</p> <ul><li><strong>被驱动表是冷数据表</strong>。在BNL算法中驱动表被分块，因此<strong>被驱动表会被扫描多次</strong>与每个块进行比较,而对于大被驱动表第二次扫描的时间间隔很可能会超过1s。从而导致<font color="red"><strong>冷表数据都进入young区域</strong></font>。</li> <li><strong>被驱动冷表是一个大表</strong>。这种情况下，会导致<font color="red"><strong>正常业务的数据页没法进入young区域</strong></font>。假设此时业务数据页还在old区域，在执行join语句时，因为当前被驱动大表数据页放不下old区域，导致<strong>old区域需要淘汰内存页(包括业务的数据页</strong>)。</li></ul> <p>因此大表join不仅对<strong>磁盘IO</strong>有影响，同时也会对<strong>内存命中率</strong>造成影响。所以这种情况下，只能够增大<font color="#d94a33" style="background:rgb(240, 240, 236);"><strong>join_buffer</strong></font>内存大小，尽可能的减少被驱动表的扫描次数。</p> <h3 id="_4-总结"><a href="#_4-总结" class="header-anchor">#</a> 4.总结</h3> <div class="custom-block tip"><p class="custom-block-title">小表</p> <p>对于表t1与t2来说，经过where条件筛选后，参与join的行数越小的，以及根据select字段和on字段判断参与join连接的行数据量越小的表称之为”小表“。</p></div> <p><strong>NLJ中驱动表是取出一行行进行比较的表，BNL中驱动表是被一行行记录比较的表</strong>。</p> <ul><li><p>什么情况下使用join语句？</p> <ul><li>如果被驱动表使用了索引(explain查看Extra字段为<font color="#d94a33" style="background:rgb(240, 240, 236);"><strong>Index Nested-Loop</strong></font>)，则可以使用join</li> <li>如果join的字段都用不上索引(explain查看Extra字段为<font color="#d94a33" style="background:rgb(240, 240, 236);"><strong>Block Nested-Loop</strong></font>)，则不能够使用join。需要拆分成单表SQL语句，避免过多的行扫描。</li></ul></li> <li><p>查询语句使用join的情况下，应该<font color="red"><strong>尽量保证”小表“作为驱动表</strong></font>。</p></li></ul> <h2 id="join语句优化"><a href="#join语句优化" class="header-anchor">#</a> join语句优化</h2> <p>接下来谈论上面两种join算法(使用索引<strong>NLJ</strong>和不使用索引分块<strong>BNL</strong>)的优化。</p> <p>场景：t1表插入了1000行数据，其中每行的a=1001-id，也就是id的逆序结果。t2表插入了100万行数据。</p> <h3 id="_1-muti-range-read优化"><a href="#_1-muti-range-read优化" class="header-anchor">#</a> 1.Muti-Range Read优化</h3> <p><strong>Muti-Range Read</strong>(MRR)优化：<font color="red"><strong>在多值查询下，尽量使用顺序读盘</strong></font>。具体来说，多行记录拿到id值进行回表时，如果按照<strong>主键递增的顺序查询</strong>的话，对磁盘读可以近似于<strong>顺序读</strong>，从而提高性能。</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> t1 <span class="token keyword">where</span> a<span class="token operator">&gt;=</span><span class="token number">1</span> <span class="token operator">and</span> a<span class="token operator">&lt;=</span><span class="token number">100</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>上述SQL语句对于表t1来说，根据a字段进行回表时每个id值都是倒序存储(id随机读性能查)，因此InnoDB会对a字段取到的id值进行MRR优化(explain分析后Extra字段出现<strong>using MRR</strong>)，具体如下：</p> <p><img src="https://jsd.cdn.zzko.cn/gh/blage-coding/picx-images-hosting@master/20230710/image.72d9mnrpbv40.png" alt=""></p> <ol><li>根据a索引定位到所有满足条件的值，并将所有id值放入到<font color="#d94a33" style="background:rgb(240, 240, 236);"><strong>read_rnd_buffer</strong></font>当中。</li> <li>在<font color="#d94a33" style="background:rgb(240, 240, 236);"><strong>read_rnd_buffer</strong></font>里对id值进行<font color="red"><strong>递增排序</strong></font>。</li> <li>根据<font color="#d94a33" style="background:rgb(240, 240, 236);"><strong>read_rnd_buffer</strong></font>内有序的id，从聚簇索引树中查叶子节点记录，并添加到结果集当中。</li></ol> <p>另外要想稳定使用MRR，则MySQL需要设置如下参数：</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">set</span> optimizer_switch<span class="token operator">=</span><span class="token string">&quot;mrr_cost_based=off&quot;</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="_2-nlj优化-batched-key-access"><a href="#_2-nlj优化-batched-key-access" class="header-anchor">#</a> 2.NLJ优化——Batched Key Access</h3> <p><strong>Batched Key Access</strong>(BKA)算法：本质上是<font color="red"><strong>NLJ算法+MRR优化</strong></font>。</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> t1 straight_join t2 <span class="token keyword">on</span> <span class="token punctuation">(</span>t1<span class="token punctuation">.</span>a<span class="token operator">=</span>t2<span class="token punctuation">.</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>在NLJ算法中，驱动表t1每次只会从磁盘拿<strong>一行</strong>数据到内存，与整个被驱动表中的所有行记录进行比对最后回表，因此t2表每次<strong>只会匹配一行记录并回表一次</strong>，这时如果使用MRR优化就没有任何优势。</p> <p>要使用MRR关键要<strong>保证被驱动表的回表时，能够<font color="red">批量</font>的回表，如果一行一行进行回表那就不能保证每次回表id的递增有序性了</strong>。</p> <p>具体来说，在NLJ算法前，先把<strong>驱动表数据</strong>放到<font color="#d94a33" style="background:rgb(240, 240, 236);"><strong>join_buffer</strong></font>当中，然后再从内存中批量往t2表传入<font color="red"><strong>多个t1表的行记录</strong></font>，此时就能用上MRR优化。</p> <p>另外，要启用BKA算法，需要在执行SQL语句之前进行设置：</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">set</span> optimizer_switch<span class="token operator">=</span><span class="token string">'mrr=on,mrr_cost_based=off,batched_key_access=on'</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="_3-bnl优化-建立索引"><a href="#_3-bnl优化-建立索引" class="header-anchor">#</a> 3.BNL优化——建立索引</h3> <p>前面提到BNL算法性能比较差，因此在join语句应该尽量避免使用BNL。核心做法就是<strong>建立索引转化为BKA</strong>。</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> t1 <span class="token keyword">join</span> t2 <span class="token keyword">on</span> <span class="token punctuation">(</span>t1<span class="token punctuation">.</span>b<span class="token operator">=</span>t2<span class="token punctuation">.</span>b<span class="token punctuation">)</span> <span class="token keyword">where</span> t2<span class="token punctuation">.</span>b<span class="token operator">&gt;=</span><span class="token number">1</span> <span class="token operator">and</span> t2<span class="token punctuation">.</span>b<span class="token operator">&lt;=</span><span class="token number">2000</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>①最直接的方法就是在<font color="red"><strong>被驱动表上建立索引</strong></font>，从而将BNL转化为BKA算法。</p> <p>②如果是一个低频SQL，那么建立索引比较浪费。可以考虑使用<font color="red"><strong>临时表，在临时表上建立索引</strong></font>：</p> <ol><li><p>首先将表t2满足where筛选条件的数据放在临时表tmp_t当中，扫描行数为100万</p></li> <li><p>然后<font color="red"><strong>给临时表tmp_t上的b字段建立索引</strong></font></p></li> <li><p><strong>t1表与临时表tmp_t做join操作</strong>，扫描行数为t1 1000次+临时表tmp_t满足条件记录数。比较次数上因为临时表含有索引所以会很快。</p> <p>临时表方案对应的SQL语句：</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">create</span> <span class="token keyword">temporary</span> <span class="token keyword">table</span> temp_t<span class="token punctuation">(</span>id <span class="token keyword">int</span> <span class="token keyword">primary</span> <span class="token keyword">key</span><span class="token punctuation">,</span> a <span class="token keyword">int</span><span class="token punctuation">,</span> b <span class="token keyword">int</span><span class="token punctuation">,</span> <span class="token keyword">index</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token keyword">engine</span><span class="token operator">=</span><span class="token keyword">innodb</span><span class="token punctuation">;</span>
<span class="token keyword">insert</span> <span class="token keyword">into</span> temp_t <span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> t2 <span class="token keyword">where</span> b<span class="token operator">&gt;=</span><span class="token number">1</span> <span class="token operator">and</span> b<span class="token operator">&lt;=</span><span class="token number">2000</span><span class="token punctuation">;</span>
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> t1 <span class="token keyword">join</span> temp_t <span class="token keyword">on</span> <span class="token punctuation">(</span>t1<span class="token punctuation">.</span>b<span class="token operator">=</span>temp_t<span class="token punctuation">.</span>b<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div></li></ol> <h3 id="_4-哈希join"><a href="#_4-哈希join" class="header-anchor">#</a> 4.哈希join</h3> <p>分块BNL算法要比较十亿次，原因在于<font color="#d94a33" style="background:rgb(240, 240, 236);"><strong>join_buffer</strong></font>中的行记录是无序的，每行记录都要与<font color="#d94a33" style="background:rgb(240, 240, 236);"><strong>join_buffer</strong></font>里t1表所有的数据一一比较。而如果t1表数据不是一个无序数组，而是一个<font color="red"><strong>哈希表</strong></font>，那么只需要100万次(t2表大小)哈希查找。</p> <p>因为MySQL不支持哈希join，因此可以在<font color="red"><strong>业务端</strong></font>实现：</p> <ol><li>执行select * from t1拿到t1表所有1000行数据，并在业务端放入一个<strong>哈希结构</strong></li> <li>执行select * from t2 where b&gt;=1 and b&lt;=2000拿到符合条件的数据。这里扫描行数100万行</li> <li>在业务端把2000行数据一行一行取出来，拿到t1哈希表中进行比对。总共进行2000次哈希查找</li></ol> <p>理论上效果要比临时表方案好。因为基于哈希的比较要快于基于索引比较。</p> <h3 id="_5-三表join优化"><a href="#_5-三表join优化" class="header-anchor">#</a> 5.三表join优化</h3> <p>对于多表的join语句，<font color="red"><strong>驱动表只有一个，被驱动表会有多个</strong></font>。执行过程会<strong>嵌套进行</strong>❓采用BKA进行优化时，每多一个join，就会多一个<font color="#d94a33" style="background:rgb(240, 240, 236);"><strong>join_buffer</strong></font>。假设按照t1&gt;t2&gt;t3连接顺序，具体如下：</p> <ol><li>首先t1表、t2表取出所有满足条件的行数据放入到join_buffer1和join_buffer2当中</li> <li>从join_buffer1当中取出一行数据，与t2表进行比较判断。</li> <li>从join_buffer2中取出上一步满足要求的t2行数据，与t3表进行比较判断。</li> <li>如果把上述满足条件的记录拼接起来作为结果集。</li> <li>此时t1相当于执行完了一条行数据，重复执行步骤2，3，4直到所有t1行数据比较完。</li></ol> <p>假设三个表的结构相同，分别只建立了id主键，试分析以下SQL语句如何优化更高效：</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> t1 <span class="token keyword">join</span> t2 <span class="token keyword">on</span><span class="token punctuation">(</span>t1<span class="token punctuation">.</span>a<span class="token operator">=</span>t2<span class="token punctuation">.</span>a<span class="token punctuation">)</span> <span class="token keyword">join</span> t3 <span class="token keyword">on</span> <span class="token punctuation">(</span>t2<span class="token punctuation">.</span>b<span class="token operator">=</span>t3<span class="token punctuation">.</span>b<span class="token punctuation">)</span> <span class="token keyword">where</span> t1<span class="token punctuation">.</span>c<span class="token operator">&gt;=</span>X <span class="token operator">and</span> t2<span class="token punctuation">.</span>c<span class="token operator">&gt;=</span>Y <span class="token operator">and</span> t3<span class="token punctuation">.</span>c<span class="token operator">&gt;=</span>Z<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>优化时首先需要尽可能<strong>使用BKA算法</strong>，然后<strong>使用小表作为驱动表</strong>。先确定小表再确定索引，小表需要根据X、Y、Z满足条件的行数判断：</p> <ul><li>如果t3表为小表，则连接顺序t3&gt;t2&gt;t1，在t2.b和t1.a建立索引。同时需要在每个表c字段加索引，目的是为了快速通过where条件筛选拿到实际参与join的行记录。</li> <li>如果t1表为小表，则连接顺序t1&gt;t2&gt;t3，在t2.a和t3.b建立索引。同时需要在每个表c字段加索引，目的是为了快速通过where条件筛选拿到实际参与join的行记录。</li> <li>而如果是t2表为小表 ，则需要进一步评估另外两个条件的过滤效果。</li></ul> <h2 id="join语句写法-left-join与on-where选择"><a href="#join语句写法-left-join与on-where选择" class="header-anchor">#</a> join语句写法(left join与on,where选择)</h2> <p>实验场景：</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">create</span> <span class="token keyword">table</span> a<span class="token punctuation">(</span>f1 <span class="token keyword">int</span><span class="token punctuation">,</span> f2 <span class="token keyword">int</span><span class="token punctuation">,</span> <span class="token keyword">index</span><span class="token punctuation">(</span>f1<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token keyword">engine</span><span class="token operator">=</span><span class="token keyword">innodb</span><span class="token punctuation">;</span>
<span class="token keyword">create</span> <span class="token keyword">table</span> b<span class="token punctuation">(</span>f1 <span class="token keyword">int</span><span class="token punctuation">,</span> f2 <span class="token keyword">int</span><span class="token punctuation">)</span><span class="token keyword">engine</span><span class="token operator">=</span><span class="token keyword">innodb</span><span class="token punctuation">;</span>
<span class="token keyword">insert</span> <span class="token keyword">into</span> a <span class="token keyword">values</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">insert</span> <span class="token keyword">into</span> b <span class="token keyword">values</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token number">7</span><span class="token punctuation">,</span><span class="token number">7</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">,</span><span class="token number">8</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>💡原则：<font color="red"><strong>NULL与任何值执行等值判断和不等值判断的结果，都是NULL</strong></font>。</p> <p>💡left join语义：左表匹配的行记录也加入到结果集以外，未匹配的行记录也需要加入到结果集(此时右表字段用NULL补充)。</p> <p>💡explain后Extra字段没有显示使用哪种join算法，则默认表示<strong>当前使用的是NLJ索引算法</strong>。</p> <p>分析如下四条条SQL语句：</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> a <span class="token keyword">left</span> <span class="token keyword">join</span> b <span class="token keyword">on</span><span class="token punctuation">(</span>a<span class="token punctuation">.</span>f1<span class="token operator">=</span>b<span class="token punctuation">.</span>f1<span class="token punctuation">)</span> <span class="token operator">and</span> <span class="token punctuation">(</span>a<span class="token punctuation">.</span>f2<span class="token operator">=</span>b<span class="token punctuation">.</span>f2<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">/*Q1*/</span>
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> a <span class="token keyword">left</span> <span class="token keyword">join</span> b <span class="token keyword">on</span><span class="token punctuation">(</span>a<span class="token punctuation">.</span>f1<span class="token operator">=</span>b<span class="token punctuation">.</span>f1<span class="token punctuation">)</span> <span class="token keyword">where</span> <span class="token punctuation">(</span>a<span class="token punctuation">.</span>f2<span class="token operator">=</span>b<span class="token punctuation">.</span>f2<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">/*Q2*/</span>

<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> a <span class="token keyword">join</span> b <span class="token keyword">on</span><span class="token punctuation">(</span>a<span class="token punctuation">.</span>f1<span class="token operator">=</span>b<span class="token punctuation">.</span>f1<span class="token punctuation">)</span> <span class="token operator">and</span> <span class="token punctuation">(</span>a<span class="token punctuation">.</span>f2<span class="token operator">=</span>b<span class="token punctuation">.</span>f2<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">/*Q3*/</span>
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> a <span class="token keyword">join</span> b <span class="token keyword">on</span><span class="token punctuation">(</span>a<span class="token punctuation">.</span>f1<span class="token operator">=</span>b<span class="token punctuation">.</span>f1<span class="token punctuation">)</span> <span class="token keyword">where</span> <span class="token punctuation">(</span>a<span class="token punctuation">.</span>f2<span class="token operator">=</span>b<span class="token punctuation">.</span>f2<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">/*Q4*/</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="q1"><a href="#q1" class="header-anchor">#</a> Q1</h3> <p><img src="https://jsd.cdn.zzko.cn/gh/blage-coding/picx-images-hosting@master/20230712/image.1j77tg1pi50g.png" alt=""></p> <p>执行流程如下：</p> <ol><li>a为驱动表，b为被驱动表。显然因为b表的字段都不存在索引，所以直接走分块BNL算法。</li> <li>首先将a表的所有数据都放入到<font color="#d94a33" style="background:rgb(240, 240, 236);"><strong>join_buffer</strong></font></li> <li>然后拿出b表的每一行记录与<font color="#d94a33" style="background:rgb(240, 240, 236);"><strong>join_buffer</strong></font>中的每一行记录进行比较，匹配则加入到结果集中</li> <li>最后<font color="#d94a33" style="background:rgb(240, 240, 236);"><strong>join_buffer</strong></font>中还剩下两条记录(1，1)和(2，2)没有被匹配，根据left join语义也一并加入结果集。B表字段使用NULL填充。得到的结果集有6条。</li></ol> <h3 id="q2"><a href="#q2" class="header-anchor">#</a> Q2</h3> <p><img src="https://jsd.cdn.zzko.cn/gh/blage-coding/picx-images-hosting@master/20230712/image.4qccru6w1gu0.webp" alt=""></p> <p>观察Extra字段可以得出<font color="red"><strong>整个join语句使用NLJ算法</strong></font>，没有使用上join_buffer，并且a的f1索引字段被使用上了。执行流程如下：</p> <ol><li>NLJ算法中a表的索引被使用，那么显然b表是驱动表，而a表是被驱动表。</li> <li>每次从b表中取出一条数据，首先先用b.f1字段去查，<font color="red"><strong>如果匹配，那么再判断该条记录的f2是否等于b.f2</strong></font>。如果都满足则作为结果集一部分返回。
<ul><li>根据上面提到的规则，假设先不考虑where条件，仅仅只是on筛选后，那么得到的所有未匹配的a表记录上的b表字段都是NULL；接着<strong>where筛选时，b.f2的null字段与a.f2非空字段比较肯定不能通过筛选</strong>。所以<font color="red"><strong>整个语句虽然用了left join，但因为存在where筛选规则限制，所以无论如何最终都不可能出现a表未匹配+b表字段null补齐的行记录</strong></font>。</li> <li><strong>也就是说left join的语义失效，整个语句改写退化为join</strong>。这样就可以使用上NLJ算法了。</li></ul></li> <li>重复步骤2，知道b表所有行记录都筛选过。最后得到的结果集有4条。</li></ol> <h3 id="q3-q4"><a href="#q3-q4" class="header-anchor">#</a> Q3&amp;Q4</h3> <p>show warnings经过优化器优化后，两条语句都被改写为：</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> a <span class="token keyword">join</span> b <span class="token keyword">where</span> <span class="token punctuation">(</span>a<span class="token punctuation">.</span>f1<span class="token operator">=</span>b<span class="token punctuation">.</span>f1<span class="token punctuation">)</span> <span class="token operator">and</span> <span class="token punctuation">(</span>a<span class="token punctuation">.</span>f2<span class="token operator">=</span>b<span class="token punctuation">.</span>f2<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="总结"><a href="#总结" class="header-anchor">#</a> 总结</h3> <p>①如果使用left join，那么当<strong>前左边的表不一定是驱动表</strong>。</p> <p>②如果需要join left的语义，那么<font color="red"><strong>右表的字段不能放入到where中进行等值判断或不等值判断</strong></font>，必须全部写在on当中。否则会退化为普通join。</p> <p>③如果不需要left join的语义，那么使用join连接的过滤查询条件写在on和where没有区别，最终都会被优化到where条件上。</p> <h2 id="simple-nlj算法性能问题"><a href="#simple-nlj算法性能问题" class="header-anchor">#</a> Simple NLJ算法性能问题</h2> <p><strong>Simple NLJ：指的是NLJ算法被驱动表没用上索引，需要全表扫描的一种情况</strong>。</p> <p>Simple NLJ算法的被驱动是在磁盘当中，每行驱动表的行记录都会与整个磁盘表(“被比较表”)进行全表扫描匹配。</p> <p>BNL算法的“被比较表”放在join_buffer，每行被驱动表行记录都会与join_buffer进行全扫描匹配。</p> <p>很显性能上BNL会更好于Simple NLJ算法，从以下几个方面来看：</p> <ol><li><p>比较时，被比较表的磁盘IO开销：</p> <ul><li><p><strong>BNL的“被比较表”稳定就在内存join_buffer中</strong>。</p></li> <li><p>Simple NLJ如果驱动表第k条记录比较时，buffer pooi上的“被比较表”的数据页恰巧被淘汰了，那么就需要重新等待一次磁盘IO，开销更大。</p> <p>另外<strong>SNLJ算法被比较表天然会被多次访问比较</strong>，移到young区的head后还会影响正常页面的数据页命中率。</p></li></ul></li> <li><p>“查找下一条记录”操作成本：</p> <ul><li>BNL在join_buffer数组上进行遍历，成本更低。</li> <li>SNLJ内存数据页通过类似于指针操作，成本更高。</li></ul></li></ol></div></div>  <div class="page-edit"><div class="edit-link"><a href="https://github.com/blage-coding/blog/edit/master/docs/05.数据库/01.MySQL/201.基础部分/22.join.md" target="_blank" rel="noopener noreferrer">编辑</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <div class="tags"><a href="/tags/?tag=%E6%95%B0%E6%8D%AE%E5%BA%93" title="标签">#数据库</a></div> <div class="last-updated"><span class="prefix">上次更新:</span> <span class="time">2023/12/15, 15:49:57</span></div></div> <div class="page-nav-wapper"><div class="page-nav-centre-wrap"><a href="/pages/1b68b4/" class="page-nav-centre page-nav-centre-prev"><div class="tooltip">全表扫描与内存占用</div></a> <a href="/pages/b0d03e/" class="page-nav-centre page-nav-centre-next"><div class="tooltip">临时表与内存表</div></a></div> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/pages/1b68b4/" class="prev">全表扫描与内存占用</a></span> <span class="next"><a href="/pages/b0d03e/">临时表与内存表</a>→
      </span></p></div></div></div> <!----></main></div> <div class="footer"><!----> 
  Theme by
  <a href="https://github.com/xugaoyi/vuepress-theme-vdoing" target="_blank" title="本站主题">Vdoing</a> 
    | Copyright © 2023-2024
    <span>blageCoder</span></div> <div class="buttons"><div title="返回顶部" class="button blur go-to-top iconfont icon-fanhuidingbu" style="display:none;"></div> <div title="去评论" class="button blur go-to-comment iconfont icon-pinglun" style="display:none;"></div> <div title="主题模式" class="button blur theme-mode-but iconfont icon-zhuti"><ul class="select-box" style="display:none;"><li class="iconfont icon-zidong">
          跟随系统
        </li><li class="iconfont icon-rijianmoshi">
          浅色模式
        </li><li class="iconfont icon-yejianmoshi">
          深色模式
        </li><li class="iconfont icon-yuedu">
          阅读模式
        </li></ul></div></div> <!----> <!----> <!----></div><div class="global-ui"><div></div></div></div>
    <script src="/assets/js/app.36a8861c.js" defer></script><script src="/assets/js/2.1ba3a2de.js" defer></script><script src="/assets/js/3.6e4df72f.js" defer></script><script src="/assets/js/383.5ad40cef.js" defer></script>
  </body>
</html>
