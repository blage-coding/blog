<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>æŠ½å¥–é¡¹ç›® | Blage&#39;s Coding</title>
    <meta name="generator" content="VuePress 1.9.5">
    <link rel="icon" href="/img/favicon.ico">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/aplayer@1.7.0/dist/APlayer.min.css">
    <script async="async" src="https://cdn.jsdelivr.net/npm/aplayer@1.7.0/dist/APlayer.min.js"></script>
    <script async="async" src="https://cdn.jsdelivr.net/npm/meting@1.1.0/dist/Meting.min.js"></script>
    <meta name="description" content="webåç«¯æŠ€æœ¯åšå®¢,ä¸“æ³¨å­¦ä¹ ä¸æ€»ç»“ã€‚spring,redis,gitç­‰æŠ€æœ¯æ–‡ç« ã€‚">
    <meta name="keywords" content="åç«¯åšå®¢,ä¸ªäººæŠ€æœ¯åšå®¢,åç«¯,spring,redis,springcloud,git,github,markdown">
    <meta name="theme-color" content="#11a8cd">
    
    <link rel="preload" href="/assets/css/0.styles.0bbcb3d9.css" as="style"><link rel="preload" href="/assets/js/app.36a8861c.js" as="script"><link rel="preload" href="/assets/js/2.1ba3a2de.js" as="script"><link rel="preload" href="/assets/js/3.6e4df72f.js" as="script"><link rel="preload" href="/assets/js/468.6605b6cc.js" as="script"><link rel="prefetch" href="/assets/js/10.c58057de.js"><link rel="prefetch" href="/assets/js/100.d441dbf0.js"><link rel="prefetch" href="/assets/js/101.78fe1fa4.js"><link rel="prefetch" href="/assets/js/102.647ce353.js"><link rel="prefetch" href="/assets/js/103.d03a8ab2.js"><link rel="prefetch" href="/assets/js/104.1334d321.js"><link rel="prefetch" href="/assets/js/105.cf0e3cc9.js"><link rel="prefetch" href="/assets/js/106.4e9bdd09.js"><link rel="prefetch" href="/assets/js/107.b22d62f5.js"><link rel="prefetch" href="/assets/js/108.50d6a5bd.js"><link rel="prefetch" href="/assets/js/109.3b9acffe.js"><link rel="prefetch" href="/assets/js/11.d315ddaf.js"><link rel="prefetch" href="/assets/js/110.0234ef0b.js"><link rel="prefetch" href="/assets/js/111.b1bff776.js"><link rel="prefetch" href="/assets/js/112.36c74fab.js"><link rel="prefetch" href="/assets/js/113.560334ae.js"><link rel="prefetch" href="/assets/js/114.adc23b99.js"><link rel="prefetch" href="/assets/js/115.d9e71f5c.js"><link rel="prefetch" href="/assets/js/116.32911c0b.js"><link rel="prefetch" href="/assets/js/117.119c7cf8.js"><link rel="prefetch" href="/assets/js/118.f20c6b9e.js"><link rel="prefetch" href="/assets/js/119.ec1eb812.js"><link rel="prefetch" href="/assets/js/12.ae4fc36f.js"><link rel="prefetch" href="/assets/js/120.2559d9c2.js"><link rel="prefetch" href="/assets/js/121.0ea12d60.js"><link rel="prefetch" href="/assets/js/122.18af1954.js"><link rel="prefetch" href="/assets/js/123.1725de72.js"><link rel="prefetch" href="/assets/js/124.56fca314.js"><link rel="prefetch" href="/assets/js/125.bf30dd23.js"><link rel="prefetch" href="/assets/js/126.b113944a.js"><link rel="prefetch" href="/assets/js/127.b3e875c8.js"><link rel="prefetch" href="/assets/js/128.79f2565b.js"><link rel="prefetch" href="/assets/js/129.be36dadc.js"><link rel="prefetch" href="/assets/js/13.90c895cd.js"><link rel="prefetch" href="/assets/js/130.bb4c09ea.js"><link rel="prefetch" href="/assets/js/131.4b78d7b2.js"><link rel="prefetch" href="/assets/js/132.295f777f.js"><link rel="prefetch" href="/assets/js/133.e325508e.js"><link rel="prefetch" href="/assets/js/134.bec1d394.js"><link rel="prefetch" href="/assets/js/135.97742a95.js"><link rel="prefetch" href="/assets/js/136.ec2c8cc6.js"><link rel="prefetch" href="/assets/js/137.88e77cf6.js"><link rel="prefetch" href="/assets/js/138.884c718d.js"><link rel="prefetch" href="/assets/js/139.34be5c25.js"><link rel="prefetch" href="/assets/js/14.04e3cf36.js"><link rel="prefetch" href="/assets/js/140.622c35eb.js"><link rel="prefetch" href="/assets/js/141.79713e4e.js"><link rel="prefetch" href="/assets/js/142.534b8172.js"><link rel="prefetch" href="/assets/js/143.28d59575.js"><link rel="prefetch" href="/assets/js/144.51695ffa.js"><link rel="prefetch" href="/assets/js/145.9d456e08.js"><link rel="prefetch" href="/assets/js/146.5adbeaa3.js"><link rel="prefetch" href="/assets/js/147.349c32df.js"><link rel="prefetch" href="/assets/js/148.a2d1f30a.js"><link rel="prefetch" href="/assets/js/149.6d5375fc.js"><link rel="prefetch" href="/assets/js/15.19b97576.js"><link rel="prefetch" href="/assets/js/150.89d13fd4.js"><link rel="prefetch" href="/assets/js/151.d101e8a6.js"><link rel="prefetch" href="/assets/js/152.82dfb001.js"><link rel="prefetch" href="/assets/js/153.cc88b1e5.js"><link rel="prefetch" href="/assets/js/154.641d5da2.js"><link rel="prefetch" href="/assets/js/155.02185265.js"><link rel="prefetch" href="/assets/js/156.9b846c5d.js"><link rel="prefetch" href="/assets/js/157.ec766749.js"><link rel="prefetch" href="/assets/js/158.85812470.js"><link rel="prefetch" href="/assets/js/159.e2a4d02e.js"><link rel="prefetch" href="/assets/js/16.e71a580e.js"><link rel="prefetch" href="/assets/js/160.232093b0.js"><link rel="prefetch" href="/assets/js/161.bf58a934.js"><link rel="prefetch" href="/assets/js/162.023cd275.js"><link rel="prefetch" href="/assets/js/163.b8b05ef5.js"><link rel="prefetch" href="/assets/js/164.b7d6e1d3.js"><link rel="prefetch" href="/assets/js/165.797e81a7.js"><link rel="prefetch" href="/assets/js/166.7944abe6.js"><link rel="prefetch" href="/assets/js/167.af4a5ead.js"><link rel="prefetch" href="/assets/js/168.35c1d8ee.js"><link rel="prefetch" href="/assets/js/169.448c179e.js"><link rel="prefetch" href="/assets/js/17.e68c492f.js"><link rel="prefetch" href="/assets/js/170.35296827.js"><link rel="prefetch" href="/assets/js/171.11b1cd0a.js"><link rel="prefetch" href="/assets/js/172.e33ff1d7.js"><link rel="prefetch" href="/assets/js/173.a356df93.js"><link rel="prefetch" href="/assets/js/174.b86d39a6.js"><link rel="prefetch" href="/assets/js/175.34d7ca25.js"><link rel="prefetch" href="/assets/js/176.55567c3f.js"><link rel="prefetch" href="/assets/js/177.f19afc0e.js"><link rel="prefetch" href="/assets/js/178.a702d5d3.js"><link rel="prefetch" href="/assets/js/179.d87d300d.js"><link rel="prefetch" href="/assets/js/18.5ad3585a.js"><link rel="prefetch" href="/assets/js/180.efddacb1.js"><link rel="prefetch" href="/assets/js/181.0773dcbe.js"><link rel="prefetch" href="/assets/js/182.922199d1.js"><link rel="prefetch" href="/assets/js/183.bb8bf69d.js"><link rel="prefetch" href="/assets/js/184.96465931.js"><link rel="prefetch" href="/assets/js/185.0c2ff418.js"><link rel="prefetch" href="/assets/js/186.575cead0.js"><link rel="prefetch" href="/assets/js/187.d7267e61.js"><link rel="prefetch" href="/assets/js/188.a830793b.js"><link rel="prefetch" href="/assets/js/189.b1c5d145.js"><link rel="prefetch" href="/assets/js/19.2e88ed9d.js"><link rel="prefetch" href="/assets/js/190.05625483.js"><link rel="prefetch" href="/assets/js/191.cae6fb5c.js"><link rel="prefetch" href="/assets/js/192.866a4f9d.js"><link rel="prefetch" href="/assets/js/193.769e1571.js"><link rel="prefetch" href="/assets/js/194.f89dd1e2.js"><link rel="prefetch" href="/assets/js/195.71d615f2.js"><link rel="prefetch" href="/assets/js/196.9535cbb3.js"><link rel="prefetch" href="/assets/js/197.61c674dd.js"><link rel="prefetch" href="/assets/js/198.7bed473e.js"><link rel="prefetch" href="/assets/js/199.5758239b.js"><link rel="prefetch" href="/assets/js/20.5cf88440.js"><link rel="prefetch" href="/assets/js/200.eb4d48ae.js"><link rel="prefetch" href="/assets/js/201.82c165a6.js"><link rel="prefetch" href="/assets/js/202.5a38dc20.js"><link rel="prefetch" href="/assets/js/203.cb7ca4f9.js"><link rel="prefetch" href="/assets/js/204.9e21b560.js"><link rel="prefetch" href="/assets/js/205.36ca83de.js"><link rel="prefetch" href="/assets/js/206.70bb2865.js"><link rel="prefetch" href="/assets/js/207.39285f7f.js"><link rel="prefetch" href="/assets/js/208.9727449e.js"><link rel="prefetch" href="/assets/js/209.480868c5.js"><link rel="prefetch" href="/assets/js/21.0f587ebb.js"><link rel="prefetch" href="/assets/js/210.8e4c1210.js"><link rel="prefetch" href="/assets/js/211.bc7340f1.js"><link rel="prefetch" href="/assets/js/212.4c04ab90.js"><link rel="prefetch" href="/assets/js/213.3dbe7bec.js"><link rel="prefetch" href="/assets/js/214.72b272b2.js"><link rel="prefetch" href="/assets/js/215.7713d7e1.js"><link rel="prefetch" href="/assets/js/216.9998b17d.js"><link rel="prefetch" href="/assets/js/217.00976274.js"><link rel="prefetch" href="/assets/js/218.69766931.js"><link rel="prefetch" href="/assets/js/219.bdfa4000.js"><link rel="prefetch" href="/assets/js/22.66938927.js"><link rel="prefetch" href="/assets/js/220.50939e62.js"><link rel="prefetch" href="/assets/js/221.a0f45610.js"><link rel="prefetch" href="/assets/js/222.c6ab25f6.js"><link rel="prefetch" href="/assets/js/223.2dd963d3.js"><link rel="prefetch" href="/assets/js/224.69bbd7eb.js"><link rel="prefetch" href="/assets/js/225.0545e5e8.js"><link rel="prefetch" href="/assets/js/226.af45c420.js"><link rel="prefetch" href="/assets/js/227.ccd29bac.js"><link rel="prefetch" href="/assets/js/228.c1ac5069.js"><link rel="prefetch" href="/assets/js/229.fa3e6383.js"><link rel="prefetch" href="/assets/js/23.e1858dde.js"><link rel="prefetch" href="/assets/js/230.3a18d3c5.js"><link rel="prefetch" href="/assets/js/231.7dc7e87a.js"><link rel="prefetch" href="/assets/js/232.573fe260.js"><link rel="prefetch" href="/assets/js/233.c2272e2b.js"><link rel="prefetch" href="/assets/js/234.4e314017.js"><link rel="prefetch" href="/assets/js/235.3174500c.js"><link rel="prefetch" href="/assets/js/236.d95ffa02.js"><link rel="prefetch" href="/assets/js/237.d7dfeea0.js"><link rel="prefetch" href="/assets/js/238.92a9dcb3.js"><link rel="prefetch" href="/assets/js/239.3a4f01eb.js"><link rel="prefetch" href="/assets/js/24.44bdfaed.js"><link rel="prefetch" href="/assets/js/240.876d4f10.js"><link rel="prefetch" href="/assets/js/241.616936d2.js"><link rel="prefetch" href="/assets/js/242.f2f752c3.js"><link rel="prefetch" href="/assets/js/243.4069438d.js"><link rel="prefetch" href="/assets/js/244.86ad4edb.js"><link rel="prefetch" href="/assets/js/245.284662ca.js"><link rel="prefetch" href="/assets/js/246.7ce74ad7.js"><link rel="prefetch" href="/assets/js/247.eb3810ae.js"><link rel="prefetch" href="/assets/js/248.550f457d.js"><link rel="prefetch" href="/assets/js/249.a70de1d1.js"><link rel="prefetch" href="/assets/js/25.6853aa09.js"><link rel="prefetch" href="/assets/js/250.a754c631.js"><link rel="prefetch" href="/assets/js/251.7bf447c9.js"><link rel="prefetch" href="/assets/js/252.799bdf8c.js"><link rel="prefetch" href="/assets/js/253.c8aaba6a.js"><link rel="prefetch" href="/assets/js/254.b121e13e.js"><link rel="prefetch" href="/assets/js/255.b0cfb063.js"><link rel="prefetch" href="/assets/js/256.ed0ed666.js"><link rel="prefetch" href="/assets/js/257.2e062555.js"><link rel="prefetch" href="/assets/js/258.05919381.js"><link rel="prefetch" href="/assets/js/259.44720e3c.js"><link rel="prefetch" href="/assets/js/26.ef6c57c1.js"><link rel="prefetch" href="/assets/js/260.e096a742.js"><link rel="prefetch" href="/assets/js/261.fdbac558.js"><link rel="prefetch" href="/assets/js/262.c9d8c9c5.js"><link rel="prefetch" href="/assets/js/263.08b4de4e.js"><link rel="prefetch" href="/assets/js/264.553602b0.js"><link rel="prefetch" href="/assets/js/265.d3dcefe2.js"><link rel="prefetch" href="/assets/js/266.42a9274f.js"><link rel="prefetch" href="/assets/js/267.e2944502.js"><link rel="prefetch" href="/assets/js/268.aacc7772.js"><link rel="prefetch" href="/assets/js/269.76d03dd9.js"><link rel="prefetch" href="/assets/js/27.e96ead6a.js"><link rel="prefetch" href="/assets/js/270.2f128965.js"><link rel="prefetch" href="/assets/js/271.f994de25.js"><link rel="prefetch" href="/assets/js/272.0cea3b07.js"><link rel="prefetch" href="/assets/js/273.f890dfd0.js"><link rel="prefetch" href="/assets/js/274.bde1c133.js"><link rel="prefetch" href="/assets/js/275.a9694b76.js"><link rel="prefetch" href="/assets/js/276.e7e84972.js"><link rel="prefetch" href="/assets/js/277.56f9472a.js"><link rel="prefetch" href="/assets/js/278.ca08c74d.js"><link rel="prefetch" href="/assets/js/279.6a0c4b12.js"><link rel="prefetch" href="/assets/js/28.412943f9.js"><link rel="prefetch" href="/assets/js/280.c7b9e790.js"><link rel="prefetch" href="/assets/js/281.314e20e4.js"><link rel="prefetch" href="/assets/js/282.be50d936.js"><link rel="prefetch" href="/assets/js/283.9b181761.js"><link rel="prefetch" href="/assets/js/284.0ed9a91c.js"><link rel="prefetch" href="/assets/js/285.81d1433b.js"><link rel="prefetch" href="/assets/js/286.04db9923.js"><link rel="prefetch" href="/assets/js/287.0ef2023a.js"><link rel="prefetch" href="/assets/js/288.84c15ce5.js"><link rel="prefetch" href="/assets/js/289.81aa577f.js"><link rel="prefetch" href="/assets/js/29.a04dbce9.js"><link rel="prefetch" href="/assets/js/290.b67ecb11.js"><link rel="prefetch" href="/assets/js/291.095b30ff.js"><link rel="prefetch" href="/assets/js/292.c747922c.js"><link rel="prefetch" href="/assets/js/293.57b8c98f.js"><link rel="prefetch" href="/assets/js/294.29418f3b.js"><link rel="prefetch" href="/assets/js/295.863b9f10.js"><link rel="prefetch" href="/assets/js/296.b9e0cc9e.js"><link rel="prefetch" href="/assets/js/297.21c59e8e.js"><link rel="prefetch" href="/assets/js/298.5e7a00a0.js"><link rel="prefetch" href="/assets/js/299.3b576148.js"><link rel="prefetch" href="/assets/js/30.be3a4b17.js"><link rel="prefetch" href="/assets/js/300.88314dc9.js"><link rel="prefetch" href="/assets/js/301.837cefed.js"><link rel="prefetch" href="/assets/js/302.e09ac2f9.js"><link rel="prefetch" href="/assets/js/303.8d012a66.js"><link rel="prefetch" href="/assets/js/304.ab5a9b9f.js"><link rel="prefetch" href="/assets/js/305.a6ca89cd.js"><link rel="prefetch" href="/assets/js/306.2d9e8a8c.js"><link rel="prefetch" href="/assets/js/307.669c19f5.js"><link rel="prefetch" href="/assets/js/308.85d2d989.js"><link rel="prefetch" href="/assets/js/309.30258624.js"><link rel="prefetch" href="/assets/js/31.3b4cf92a.js"><link rel="prefetch" href="/assets/js/310.5f1daa31.js"><link rel="prefetch" href="/assets/js/311.b13b848c.js"><link rel="prefetch" href="/assets/js/312.e7ce7706.js"><link rel="prefetch" href="/assets/js/313.7c1448e0.js"><link rel="prefetch" href="/assets/js/314.4a8bcb5a.js"><link rel="prefetch" href="/assets/js/315.4b3b61ae.js"><link rel="prefetch" href="/assets/js/316.851983eb.js"><link rel="prefetch" href="/assets/js/317.65fda1f5.js"><link rel="prefetch" href="/assets/js/318.5b0681ba.js"><link rel="prefetch" href="/assets/js/319.eab916b3.js"><link rel="prefetch" href="/assets/js/32.1009e817.js"><link rel="prefetch" href="/assets/js/320.3964c648.js"><link rel="prefetch" href="/assets/js/321.98892efe.js"><link rel="prefetch" href="/assets/js/322.3e056383.js"><link rel="prefetch" href="/assets/js/323.f5bd5f27.js"><link rel="prefetch" href="/assets/js/324.52b992bd.js"><link rel="prefetch" href="/assets/js/325.3d6ec4cc.js"><link rel="prefetch" href="/assets/js/326.c03333c8.js"><link rel="prefetch" href="/assets/js/327.bf4f3b61.js"><link rel="prefetch" href="/assets/js/328.d91ebcce.js"><link rel="prefetch" href="/assets/js/329.0dff70ac.js"><link rel="prefetch" href="/assets/js/33.a36484ca.js"><link rel="prefetch" href="/assets/js/330.7caf6c7c.js"><link rel="prefetch" href="/assets/js/331.0f6f75e7.js"><link rel="prefetch" href="/assets/js/332.822ffb16.js"><link rel="prefetch" href="/assets/js/333.ecd22088.js"><link rel="prefetch" href="/assets/js/334.13125819.js"><link rel="prefetch" href="/assets/js/335.caa18f52.js"><link rel="prefetch" href="/assets/js/336.e349a6ec.js"><link rel="prefetch" href="/assets/js/337.aae6617f.js"><link rel="prefetch" href="/assets/js/338.29bfe09e.js"><link rel="prefetch" href="/assets/js/339.7f9972a2.js"><link rel="prefetch" href="/assets/js/34.ecb5ee6d.js"><link rel="prefetch" href="/assets/js/340.b234848b.js"><link rel="prefetch" href="/assets/js/341.f2bf78a2.js"><link rel="prefetch" href="/assets/js/342.f272119e.js"><link rel="prefetch" href="/assets/js/343.51038386.js"><link rel="prefetch" href="/assets/js/344.026dad95.js"><link rel="prefetch" href="/assets/js/345.cc52ec50.js"><link rel="prefetch" href="/assets/js/346.49bf455b.js"><link rel="prefetch" href="/assets/js/347.19a34365.js"><link rel="prefetch" href="/assets/js/348.128c9e0f.js"><link rel="prefetch" href="/assets/js/349.9f3daf6b.js"><link rel="prefetch" href="/assets/js/35.c315a737.js"><link rel="prefetch" href="/assets/js/350.b2a2eeaa.js"><link rel="prefetch" href="/assets/js/351.a8d13a5a.js"><link rel="prefetch" href="/assets/js/352.2c7a0e40.js"><link rel="prefetch" href="/assets/js/353.ca0c65e0.js"><link rel="prefetch" href="/assets/js/354.74684d12.js"><link rel="prefetch" href="/assets/js/355.4b4e1ed4.js"><link rel="prefetch" href="/assets/js/356.873f616d.js"><link rel="prefetch" href="/assets/js/357.495b41b7.js"><link rel="prefetch" href="/assets/js/358.9baa2811.js"><link rel="prefetch" href="/assets/js/359.dc1dcb16.js"><link rel="prefetch" href="/assets/js/36.6be141ba.js"><link rel="prefetch" href="/assets/js/360.48933205.js"><link rel="prefetch" href="/assets/js/361.f4ea428e.js"><link rel="prefetch" href="/assets/js/362.422ec9b2.js"><link rel="prefetch" href="/assets/js/363.b829dc7f.js"><link rel="prefetch" href="/assets/js/364.4ec4ee9b.js"><link rel="prefetch" href="/assets/js/365.3ccbfd91.js"><link rel="prefetch" href="/assets/js/366.c1f854bd.js"><link rel="prefetch" href="/assets/js/367.739b54b3.js"><link rel="prefetch" href="/assets/js/368.d6db3651.js"><link rel="prefetch" href="/assets/js/369.411e5e78.js"><link rel="prefetch" href="/assets/js/37.7d8a4488.js"><link rel="prefetch" href="/assets/js/370.9f9b2494.js"><link rel="prefetch" href="/assets/js/371.24693fff.js"><link rel="prefetch" href="/assets/js/372.cd4efc79.js"><link rel="prefetch" href="/assets/js/373.5191c19e.js"><link rel="prefetch" href="/assets/js/374.350a6c41.js"><link rel="prefetch" href="/assets/js/375.0d4f7c5f.js"><link rel="prefetch" href="/assets/js/376.a0ae96ae.js"><link rel="prefetch" href="/assets/js/377.6f112bc0.js"><link rel="prefetch" href="/assets/js/378.b3ad1ecf.js"><link rel="prefetch" href="/assets/js/379.bb251ea3.js"><link rel="prefetch" href="/assets/js/38.2b0ed5fe.js"><link rel="prefetch" href="/assets/js/380.c7100500.js"><link rel="prefetch" href="/assets/js/381.b2f7e7d6.js"><link rel="prefetch" href="/assets/js/382.8e62b8aa.js"><link rel="prefetch" href="/assets/js/383.5ad40cef.js"><link rel="prefetch" href="/assets/js/384.62718694.js"><link rel="prefetch" href="/assets/js/385.7687a101.js"><link rel="prefetch" href="/assets/js/386.3aa2ec6b.js"><link rel="prefetch" href="/assets/js/387.080f5944.js"><link rel="prefetch" href="/assets/js/388.d53bfd0d.js"><link rel="prefetch" href="/assets/js/389.30b59475.js"><link rel="prefetch" href="/assets/js/39.d4be9171.js"><link rel="prefetch" href="/assets/js/390.e20ebf2a.js"><link rel="prefetch" href="/assets/js/391.265d7b4a.js"><link rel="prefetch" href="/assets/js/392.ebdeb0d8.js"><link rel="prefetch" href="/assets/js/393.3112584f.js"><link rel="prefetch" href="/assets/js/394.7c754e70.js"><link rel="prefetch" href="/assets/js/395.51eb51ab.js"><link rel="prefetch" href="/assets/js/396.2ac8fa9a.js"><link rel="prefetch" href="/assets/js/397.73b7e0d0.js"><link rel="prefetch" href="/assets/js/398.bfe9fe1b.js"><link rel="prefetch" href="/assets/js/399.3fbe9247.js"><link rel="prefetch" href="/assets/js/4.2cb195dd.js"><link rel="prefetch" href="/assets/js/40.82187d91.js"><link rel="prefetch" href="/assets/js/400.a65cd6d3.js"><link rel="prefetch" href="/assets/js/401.9dc6f11b.js"><link rel="prefetch" href="/assets/js/402.1c996e16.js"><link rel="prefetch" href="/assets/js/403.c2fc87b4.js"><link rel="prefetch" href="/assets/js/404.f295cb4d.js"><link rel="prefetch" href="/assets/js/405.baf800ce.js"><link rel="prefetch" href="/assets/js/406.dd62b585.js"><link rel="prefetch" href="/assets/js/407.8f99059b.js"><link rel="prefetch" href="/assets/js/408.79c37181.js"><link rel="prefetch" href="/assets/js/409.8b8b3e73.js"><link rel="prefetch" href="/assets/js/41.de15dcd3.js"><link rel="prefetch" href="/assets/js/410.4183d880.js"><link rel="prefetch" href="/assets/js/411.9ef5d6df.js"><link rel="prefetch" href="/assets/js/412.ce37597b.js"><link rel="prefetch" href="/assets/js/413.b3a7d5a6.js"><link rel="prefetch" href="/assets/js/414.591bceb5.js"><link rel="prefetch" href="/assets/js/415.cda694b3.js"><link rel="prefetch" href="/assets/js/416.25640d0c.js"><link rel="prefetch" href="/assets/js/417.51f26447.js"><link rel="prefetch" href="/assets/js/418.dcbcdf97.js"><link rel="prefetch" href="/assets/js/419.1059dcfd.js"><link rel="prefetch" href="/assets/js/42.1d792a1c.js"><link rel="prefetch" href="/assets/js/420.d5d37fab.js"><link rel="prefetch" href="/assets/js/421.7854bb4d.js"><link rel="prefetch" href="/assets/js/422.70f45269.js"><link rel="prefetch" href="/assets/js/423.f4e6eb9e.js"><link rel="prefetch" href="/assets/js/424.c4bb6e45.js"><link rel="prefetch" href="/assets/js/425.55e47f2d.js"><link rel="prefetch" href="/assets/js/426.97cbd3ca.js"><link rel="prefetch" href="/assets/js/427.b4327262.js"><link rel="prefetch" href="/assets/js/428.feac2880.js"><link rel="prefetch" href="/assets/js/429.ab1f8568.js"><link rel="prefetch" href="/assets/js/43.a77be863.js"><link rel="prefetch" href="/assets/js/430.d0a4ee37.js"><link rel="prefetch" href="/assets/js/431.cdad8279.js"><link rel="prefetch" href="/assets/js/432.fe559595.js"><link rel="prefetch" href="/assets/js/433.122ba82a.js"><link rel="prefetch" href="/assets/js/434.df8d47d0.js"><link rel="prefetch" href="/assets/js/435.332aa966.js"><link rel="prefetch" href="/assets/js/436.db4094b8.js"><link rel="prefetch" href="/assets/js/437.a4c48f1a.js"><link rel="prefetch" href="/assets/js/438.ed08b26c.js"><link rel="prefetch" href="/assets/js/439.c8866503.js"><link rel="prefetch" href="/assets/js/44.504638ff.js"><link rel="prefetch" href="/assets/js/440.188ca2ff.js"><link rel="prefetch" href="/assets/js/441.449266b3.js"><link rel="prefetch" href="/assets/js/442.d3c849d6.js"><link rel="prefetch" href="/assets/js/443.be797f33.js"><link rel="prefetch" href="/assets/js/444.9c5fa2e4.js"><link rel="prefetch" href="/assets/js/445.e862dc31.js"><link rel="prefetch" href="/assets/js/446.41193f53.js"><link rel="prefetch" href="/assets/js/447.97950dae.js"><link rel="prefetch" href="/assets/js/448.28f60263.js"><link rel="prefetch" href="/assets/js/449.3d8e920d.js"><link rel="prefetch" href="/assets/js/45.6bb2fc1e.js"><link rel="prefetch" href="/assets/js/450.b33ac323.js"><link rel="prefetch" href="/assets/js/451.a29bdef5.js"><link rel="prefetch" href="/assets/js/452.e439e622.js"><link rel="prefetch" href="/assets/js/453.6e2532da.js"><link rel="prefetch" href="/assets/js/454.69ccfbd3.js"><link rel="prefetch" href="/assets/js/455.22596db1.js"><link rel="prefetch" href="/assets/js/456.958addb4.js"><link rel="prefetch" href="/assets/js/457.01dfa630.js"><link rel="prefetch" href="/assets/js/458.245cc853.js"><link rel="prefetch" href="/assets/js/459.3a29da9f.js"><link rel="prefetch" href="/assets/js/46.220fcda2.js"><link rel="prefetch" href="/assets/js/460.f68d5211.js"><link rel="prefetch" href="/assets/js/461.1cc4badc.js"><link rel="prefetch" href="/assets/js/462.f56dbed5.js"><link rel="prefetch" href="/assets/js/463.a4fc68b9.js"><link rel="prefetch" href="/assets/js/464.1449aec4.js"><link rel="prefetch" href="/assets/js/465.3bd78a23.js"><link rel="prefetch" href="/assets/js/466.f2cce87d.js"><link rel="prefetch" href="/assets/js/467.20033fda.js"><link rel="prefetch" href="/assets/js/469.0c20f0c7.js"><link rel="prefetch" href="/assets/js/47.e63332df.js"><link rel="prefetch" href="/assets/js/470.3ba54d64.js"><link rel="prefetch" href="/assets/js/471.f2cefd99.js"><link rel="prefetch" href="/assets/js/472.bf7f33a2.js"><link rel="prefetch" href="/assets/js/473.56258d40.js"><link rel="prefetch" href="/assets/js/474.eb884e1c.js"><link rel="prefetch" href="/assets/js/48.768a9a93.js"><link rel="prefetch" href="/assets/js/49.1f8a24a8.js"><link rel="prefetch" href="/assets/js/5.40c1dc66.js"><link rel="prefetch" href="/assets/js/50.2a07120e.js"><link rel="prefetch" href="/assets/js/51.2527531c.js"><link rel="prefetch" href="/assets/js/52.fb084bd7.js"><link rel="prefetch" href="/assets/js/53.3541f39a.js"><link rel="prefetch" href="/assets/js/54.4084d4c6.js"><link rel="prefetch" href="/assets/js/55.0b7de523.js"><link rel="prefetch" href="/assets/js/56.a46277bf.js"><link rel="prefetch" href="/assets/js/57.678c9751.js"><link rel="prefetch" href="/assets/js/58.44469be6.js"><link rel="prefetch" href="/assets/js/59.9036b283.js"><link rel="prefetch" href="/assets/js/6.113d94ad.js"><link rel="prefetch" href="/assets/js/60.8ea6e0d1.js"><link rel="prefetch" href="/assets/js/61.b1441bfd.js"><link rel="prefetch" href="/assets/js/62.4055fa88.js"><link rel="prefetch" href="/assets/js/63.343809c3.js"><link rel="prefetch" href="/assets/js/64.6a37684e.js"><link rel="prefetch" href="/assets/js/65.498b3095.js"><link rel="prefetch" href="/assets/js/66.472c3f67.js"><link rel="prefetch" href="/assets/js/67.ffd3512f.js"><link rel="prefetch" href="/assets/js/68.80e6e1e1.js"><link rel="prefetch" href="/assets/js/69.8ee08ad1.js"><link rel="prefetch" href="/assets/js/7.f2a2af84.js"><link rel="prefetch" href="/assets/js/70.9c7b808d.js"><link rel="prefetch" href="/assets/js/71.0abc26fe.js"><link rel="prefetch" href="/assets/js/72.011b472b.js"><link rel="prefetch" href="/assets/js/73.cb725aa1.js"><link rel="prefetch" href="/assets/js/74.537d7d78.js"><link rel="prefetch" href="/assets/js/75.77394ac8.js"><link rel="prefetch" href="/assets/js/76.b8eecb30.js"><link rel="prefetch" href="/assets/js/77.7afc22e0.js"><link rel="prefetch" href="/assets/js/78.eb08bd7e.js"><link rel="prefetch" href="/assets/js/79.3d08d738.js"><link rel="prefetch" href="/assets/js/8.0fe505d0.js"><link rel="prefetch" href="/assets/js/80.c928504a.js"><link rel="prefetch" href="/assets/js/81.998c413a.js"><link rel="prefetch" href="/assets/js/82.174c8592.js"><link rel="prefetch" href="/assets/js/83.67048269.js"><link rel="prefetch" href="/assets/js/84.9beb2214.js"><link rel="prefetch" href="/assets/js/85.d9c794cc.js"><link rel="prefetch" href="/assets/js/86.26221cd0.js"><link rel="prefetch" href="/assets/js/87.dfa56052.js"><link rel="prefetch" href="/assets/js/88.4dc20bd0.js"><link rel="prefetch" href="/assets/js/89.ee73979e.js"><link rel="prefetch" href="/assets/js/9.7f2610de.js"><link rel="prefetch" href="/assets/js/90.bbad017a.js"><link rel="prefetch" href="/assets/js/91.bae1ea17.js"><link rel="prefetch" href="/assets/js/92.1f075317.js"><link rel="prefetch" href="/assets/js/93.167a2544.js"><link rel="prefetch" href="/assets/js/94.9bcde3bb.js"><link rel="prefetch" href="/assets/js/95.41a0e2d6.js"><link rel="prefetch" href="/assets/js/96.d0cb9dae.js"><link rel="prefetch" href="/assets/js/97.510de6ab.js"><link rel="prefetch" href="/assets/js/98.a3772e11.js"><link rel="prefetch" href="/assets/js/99.5f982463.js">
    <link rel="stylesheet" href="/assets/css/0.styles.0bbcb3d9.css">
  </head>
  <body class="theme-mode-light">
    <div id="app" data-server-rendered="true"><div class="theme-container sidebar-open have-rightmenu"><header class="navbar blur"><div title="ç›®å½•" class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/img/logo.png" alt="Blage's Coding" class="logo"> <span class="site-name can-hide">Blage's Coding</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">Home</a></div><div class="nav-item"><a href="/leetcode/" class="nav-link">ç®—æ³•</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Spring" class="dropdown-title"><a href="/spring/" class="link-title">Spring</a> <span class="title" style="display:none;">Spring</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/cata/spring/" class="nav-link">æ‰‹å†™Spring</a></li><li class="dropdown-item"><!----> <a href="/cata/ssm/" class="nav-link">SSM</a></li><li class="dropdown-item"><!----> <a href="/cata/springboot/" class="nav-link">SpringBoot</a></li><li class="dropdown-item"><!----> <a href="/cata/javaweb/" class="nav-link">JavaWeb</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="JAVAåŸºç¡€" class="dropdown-title"><a href="/java/" class="link-title">JAVAåŸºç¡€</a> <span class="title" style="display:none;">JAVAåŸºç¡€</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/cata/javabasic/" class="nav-link">JAVAåŸºç¡€</a></li><li class="dropdown-item"><!----> <a href="/cata/jihe/" class="nav-link">å®¹å™¨</a></li><li class="dropdown-item"><h4>Netty</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/3e5651/" class="nav-link">IOæ¨¡å‹</a></li><li class="dropdown-subitem"><a href="/pages/dc2076/" class="nav-link">Nettyåˆçº§</a></li><li class="dropdown-subitem"><a href="/pages/9ed934/" class="nav-link">NettyåŸç†</a></li></ul></li><li class="dropdown-item"><!----> <a href="/cata/jvm/" class="nav-link">JVM</a></li><li class="dropdown-item"><!----> <a href="/cata/juc/" class="nav-link">JUC</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Redis" class="dropdown-title"><a href="/redis/" class="link-title">Redis</a> <span class="title" style="display:none;">Redis</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/cata/redisbasic/" class="nav-link">RedisåŸºç¡€</a></li><li class="dropdown-item"><!----> <a href="/cata/redisanalyse/" class="nav-link">æºç åˆ†æ</a></li><li class="dropdown-item"><!----> <a href="/redis/" class="nav-link">å®æˆ˜åº”ç”¨</a></li><li class="dropdown-item"><!----> <a href="/redis/" class="nav-link">å•æœºç¼“å­˜</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="æ•°æ®åº“" class="dropdown-title"><a href="/mysql/" class="link-title">æ•°æ®åº“</a> <span class="title" style="display:none;">æ•°æ®åº“</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>MySQL</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/mysql/" class="nav-link">åŸºç¡€éƒ¨åˆ†</a></li><li class="dropdown-subitem"><a href="/mysql/" class="nav-link">å®æˆ˜ä¸å¤„ç†æ–¹æ¡ˆ</a></li><li class="dropdown-subitem"><a href="/mysql/" class="nav-link">é¢è¯•</a></li></ul></li><li class="dropdown-item"><h4>ORMæ¡†æ¶</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/41f194/" class="nav-link">Mybatis</a></li><li class="dropdown-subitem"><a href="/pages/b188b3/" class="nav-link">Mybatis_Plus</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="ä¸­é—´ä»¶" class="dropdown-title"><a href="/cloud/" class="link-title">ä¸­é—´ä»¶</a> <span class="title" style="display:none;">ä¸­é—´ä»¶</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/cata/alibaba/" class="nav-link">SpringCloudAlibaba</a></li><li class="dropdown-item"><!----> <a href="/cata/mq/" class="nav-link">MQæ¶ˆæ¯é˜Ÿåˆ—</a></li><li class="dropdown-item"><!----> <a href="/cata/nginx/" class="nav-link">Nginx</a></li><li class="dropdown-item"><!----> <a href="/cata/es/" class="nav-link">Elasticsearch</a></li><li class="dropdown-item"><!----> <a href="/pages/b8c685/" class="nav-link">Gateway</a></li><li class="dropdown-item"><!----> <a href="/pages/72792a/" class="nav-link">Xxl-job</a></li><li class="dropdown-item"><!----> <a href="/pages/8bf560/" class="nav-link">Feign</a></li><li class="dropdown-item"><!----> <a href="/pages/d80289/" class="nav-link">Eureka</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="æ›´å¤š" class="dropdown-title"><a href="/more/" class="link-title">æ›´å¤š</a> <span class="title" style="display:none;">æ›´å¤š</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/cata/mianshi/" class="nav-link">é¢è¯•</a></li><li class="dropdown-item"><!----> <a href="/cata/gongju/" class="nav-link">å·¥å…·</a></li><li class="dropdown-item"><!----> <a href="/cata/pro/" class="nav-link">é¡¹ç›®</a></li><li class="dropdown-item"><!----> <a href="/pages/f2e63f/" class="nav-link">å…³äº</a></li></ul></div></div><div class="nav-item"><a href="/cata/benzhan/" class="nav-link">ğŸŒæœ¬ç«™</a></div> <a href="https://github.com/blage-coding/blog" target="_blank" rel="noopener noreferrer" class="repo-link">
    ğŸ§¸GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar-hover-trigger"></div> <aside class="sidebar" style="display:none;"><!----> <nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">Home</a></div><div class="nav-item"><a href="/leetcode/" class="nav-link">ç®—æ³•</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Spring" class="dropdown-title"><a href="/spring/" class="link-title">Spring</a> <span class="title" style="display:none;">Spring</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/cata/spring/" class="nav-link">æ‰‹å†™Spring</a></li><li class="dropdown-item"><!----> <a href="/cata/ssm/" class="nav-link">SSM</a></li><li class="dropdown-item"><!----> <a href="/cata/springboot/" class="nav-link">SpringBoot</a></li><li class="dropdown-item"><!----> <a href="/cata/javaweb/" class="nav-link">JavaWeb</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="JAVAåŸºç¡€" class="dropdown-title"><a href="/java/" class="link-title">JAVAåŸºç¡€</a> <span class="title" style="display:none;">JAVAåŸºç¡€</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/cata/javabasic/" class="nav-link">JAVAåŸºç¡€</a></li><li class="dropdown-item"><!----> <a href="/cata/jihe/" class="nav-link">å®¹å™¨</a></li><li class="dropdown-item"><h4>Netty</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/3e5651/" class="nav-link">IOæ¨¡å‹</a></li><li class="dropdown-subitem"><a href="/pages/dc2076/" class="nav-link">Nettyåˆçº§</a></li><li class="dropdown-subitem"><a href="/pages/9ed934/" class="nav-link">NettyåŸç†</a></li></ul></li><li class="dropdown-item"><!----> <a href="/cata/jvm/" class="nav-link">JVM</a></li><li class="dropdown-item"><!----> <a href="/cata/juc/" class="nav-link">JUC</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Redis" class="dropdown-title"><a href="/redis/" class="link-title">Redis</a> <span class="title" style="display:none;">Redis</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/cata/redisbasic/" class="nav-link">RedisåŸºç¡€</a></li><li class="dropdown-item"><!----> <a href="/cata/redisanalyse/" class="nav-link">æºç åˆ†æ</a></li><li class="dropdown-item"><!----> <a href="/redis/" class="nav-link">å®æˆ˜åº”ç”¨</a></li><li class="dropdown-item"><!----> <a href="/redis/" class="nav-link">å•æœºç¼“å­˜</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="æ•°æ®åº“" class="dropdown-title"><a href="/mysql/" class="link-title">æ•°æ®åº“</a> <span class="title" style="display:none;">æ•°æ®åº“</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>MySQL</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/mysql/" class="nav-link">åŸºç¡€éƒ¨åˆ†</a></li><li class="dropdown-subitem"><a href="/mysql/" class="nav-link">å®æˆ˜ä¸å¤„ç†æ–¹æ¡ˆ</a></li><li class="dropdown-subitem"><a href="/mysql/" class="nav-link">é¢è¯•</a></li></ul></li><li class="dropdown-item"><h4>ORMæ¡†æ¶</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/41f194/" class="nav-link">Mybatis</a></li><li class="dropdown-subitem"><a href="/pages/b188b3/" class="nav-link">Mybatis_Plus</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="ä¸­é—´ä»¶" class="dropdown-title"><a href="/cloud/" class="link-title">ä¸­é—´ä»¶</a> <span class="title" style="display:none;">ä¸­é—´ä»¶</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/cata/alibaba/" class="nav-link">SpringCloudAlibaba</a></li><li class="dropdown-item"><!----> <a href="/cata/mq/" class="nav-link">MQæ¶ˆæ¯é˜Ÿåˆ—</a></li><li class="dropdown-item"><!----> <a href="/cata/nginx/" class="nav-link">Nginx</a></li><li class="dropdown-item"><!----> <a href="/cata/es/" class="nav-link">Elasticsearch</a></li><li class="dropdown-item"><!----> <a href="/pages/b8c685/" class="nav-link">Gateway</a></li><li class="dropdown-item"><!----> <a href="/pages/72792a/" class="nav-link">Xxl-job</a></li><li class="dropdown-item"><!----> <a href="/pages/8bf560/" class="nav-link">Feign</a></li><li class="dropdown-item"><!----> <a href="/pages/d80289/" class="nav-link">Eureka</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="æ›´å¤š" class="dropdown-title"><a href="/more/" class="link-title">æ›´å¤š</a> <span class="title" style="display:none;">æ›´å¤š</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/cata/mianshi/" class="nav-link">é¢è¯•</a></li><li class="dropdown-item"><!----> <a href="/cata/gongju/" class="nav-link">å·¥å…·</a></li><li class="dropdown-item"><!----> <a href="/cata/pro/" class="nav-link">é¡¹ç›®</a></li><li class="dropdown-item"><!----> <a href="/pages/f2e63f/" class="nav-link">å…³äº</a></li></ul></div></div><div class="nav-item"><a href="/cata/benzhan/" class="nav-link">ğŸŒæœ¬ç«™</a></div> <a href="https://github.com/blage-coding/blog" target="_blank" rel="noopener noreferrer" class="repo-link">
    ğŸ§¸GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>ç½‘å…³</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>æŠ½å¥–</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/pages/5ba485/" aria-current="page" class="active sidebar-link">æŠ½å¥–é¡¹ç›®</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level2"><a href="/pages/5ba485/#_1-dddæ¶æ„" class="sidebar-link">1.DDDæ¶æ„</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level4"><a href="/pages/5ba485/#insfrastructureåŸºç¡€å±‚" class="sidebar-link">insfrastructureåŸºç¡€å±‚</a></li><li class="sidebar-sub-header level4"><a href="/pages/5ba485/#domainé¢†åŸŸå±‚" class="sidebar-link">domainé¢†åŸŸå±‚</a></li><li class="sidebar-sub-header level4"><a href="/pages/5ba485/#applicationåº”ç”¨å±‚" class="sidebar-link">applicationåº”ç”¨å±‚</a></li><li class="sidebar-sub-header level4"><a href="/pages/5ba485/#interfacesæ¥å£å±‚" class="sidebar-link">interfacesæ¥å£å±‚</a></li><li class="sidebar-sub-header level4"><a href="/pages/5ba485/#rpcé€šä¿¡å±‚" class="sidebar-link">RPCé€šä¿¡å±‚</a></li><li class="sidebar-sub-header level4"><a href="/pages/5ba485/#commoné€šç”¨åŒ…" class="sidebar-link">commoné€šç”¨åŒ…</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/pages/5ba485/#_2-concurrenthashmapä¸securerandom" class="sidebar-link">2.ConcurrentHashMapä¸SecureRandom</a></li><li class="sidebar-sub-header level2"><a href="/pages/5ba485/#_3-ç­–ç•¥æ¨¡å¼" class="sidebar-link">3.ç­–ç•¥æ¨¡å¼</a></li><li class="sidebar-sub-header level2"><a href="/pages/5ba485/#_4-æ¨¡æ¿æ¨¡å¼" class="sidebar-link">4.æ¨¡æ¿æ¨¡å¼</a></li><li class="sidebar-sub-header level2"><a href="/pages/5ba485/#_5-å·¥å‚æ¨¡å¼" class="sidebar-link">5.å·¥å‚æ¨¡å¼</a></li><li class="sidebar-sub-header level2"><a href="/pages/5ba485/#_6-çŠ¶æ€æ¨¡å¼" class="sidebar-link">6.çŠ¶æ€æ¨¡å¼</a></li><li class="sidebar-sub-header level2"><a href="/pages/5ba485/#_7-mybatis-foreach-æ ‡ç­¾" class="sidebar-link">7.mybatisæ ‡ç­¾</a></li><li class="sidebar-sub-header level2"><a href="/pages/5ba485/#_8-idç”Ÿæˆç­–ç•¥" class="sidebar-link">8.IDç”Ÿæˆç­–ç•¥</a></li><li class="sidebar-sub-header level2"><a href="/pages/5ba485/#_9-aopæ¦‚å¿µ" class="sidebar-link">9.AOPæ¦‚å¿µ</a></li><li class="sidebar-sub-header level2"><a href="/pages/5ba485/#_10-mybatisæ‹¦æˆªå™¨" class="sidebar-link">10.Mybatisæ‹¦æˆªå™¨</a></li><li class="sidebar-sub-header level2"><a href="/pages/5ba485/#_11-æ•°æ®åº“è·¯ç”±ç»„ä»¶è®¾è®¡" class="sidebar-link">11.æ•°æ®åº“è·¯ç”±ç»„ä»¶è®¾è®¡</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level4"><a href="/pages/5ba485/#ä¸šåŠ¡åœºæ™¯" class="sidebar-link">ä¸šåŠ¡åœºæ™¯</a></li><li class="sidebar-sub-header level4"><a href="/pages/5ba485/#mybatisæ‹¦æˆªå™¨åŠ¨æ€æ›¿æ¢è¡¨å" class="sidebar-link">mybatisæ‹¦æˆªå™¨åŠ¨æ€æ›¿æ¢è¡¨å</a></li><li class="sidebar-sub-header level4"><a href="/pages/5ba485/#aopåˆ‡é¢è®¡ç®—è·¯ç”±" class="sidebar-link">AOPåˆ‡é¢è®¡ç®—è·¯ç”±</a></li><li class="sidebar-sub-header level4"><a href="/pages/5ba485/#æ›´æ¢æ•°æ®æº-åˆ†åº“åŸç†" class="sidebar-link">æ›´æ¢æ•°æ®æºï¼ˆåˆ†åº“åŸç†ï¼‰</a></li><li class="sidebar-sub-header level4"><a href="/pages/5ba485/#åŠ¨æ€è·¯ç”±å¯¼è‡´äº‹åŠ¡é—®é¢˜" class="sidebar-link">åŠ¨æ€è·¯ç”±å¯¼è‡´äº‹åŠ¡é—®é¢˜</a></li><li class="sidebar-sub-header level4"><a href="/pages/5ba485/#å¾…è§£å†³é—®é¢˜" class="sidebar-link">å¾…è§£å†³é—®é¢˜</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/pages/5ba485/#_12-meta-inf-spring-factoriesä¸springconfigé…ç½®ä¾èµ–" class="sidebar-link">12.META-INF/spring.factoriesä¸springConfigé…ç½®ä¾èµ–</a></li><li class="sidebar-sub-header level2"><a href="/pages/5ba485/#_13-configurationpropertieså’Œafterpropertiesset" class="sidebar-link">13.@ConfigurationPropertieså’ŒafterPropertiesSet()</a></li><li class="sidebar-sub-header level2"><a href="/pages/5ba485/#_14-staticå’Œfinal" class="sidebar-link">14.staticå’Œfinal</a></li><li class="sidebar-sub-header level2"><a href="/pages/5ba485/#_15-mybatisé©¼å³°ä¸lombok" class="sidebar-link">15.Mybatisé©¼å³°ä¸lombok</a></li><li class="sidebar-sub-header level2"><a href="/pages/5ba485/#_16-æŠ¥åæ´»åŠ¨" class="sidebar-link">16.æŠ¥åæ´»åŠ¨</a></li><li class="sidebar-sub-header level2"><a href="/pages/5ba485/#_17-ç»„åˆæ¨¡å¼-å†³ç­–æ ‘" class="sidebar-link">17.ç»„åˆæ¨¡å¼&amp;å†³ç­–æ ‘</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level4"><a href="/pages/5ba485/#ç»„åˆæ¨¡å¼" class="sidebar-link">ç»„åˆæ¨¡å¼</a></li><li class="sidebar-sub-header level4"><a href="/pages/5ba485/#å†³ç­–æ ‘" class="sidebar-link">å†³ç­–æ ‘</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/pages/5ba485/#_18-é—¨é¢æ¨¡å¼" class="sidebar-link">18.é—¨é¢æ¨¡å¼</a></li><li class="sidebar-sub-header level2"><a href="/pages/5ba485/#_19-mapstruct" class="sidebar-link">19.MapStruct</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level4"><a href="/pages/5ba485/#æ€§èƒ½æ¯”è¾ƒ" class="sidebar-link">æ€§èƒ½æ¯”è¾ƒ</a></li><li class="sidebar-sub-header level4"><a href="/pages/5ba485/#æ³¨è§£ä½¿ç”¨" class="sidebar-link">æ³¨è§£ä½¿ç”¨</a></li><li class="sidebar-sub-header level4"><a href="/pages/5ba485/#å®ç°è½¬æ¢å™¨" class="sidebar-link">å®ç°è½¬æ¢å™¨</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/pages/5ba485/#_20-kafkaæµé‡å‰Šå³°" class="sidebar-link">20.kafkaæµé‡å‰Šå³°</a></li><li class="sidebar-sub-header level2"><a href="/pages/5ba485/#_21-xxl-jobå®æ—¶ä»»åŠ¡" class="sidebar-link">21.xxl-jobå®æ—¶ä»»åŠ¡</a></li><li class="sidebar-sub-header level2"><a href="/pages/5ba485/#_22-redisæ»‘å—é”" class="sidebar-link">22.redisæ»‘å—é”</a></li><li class="sidebar-sub-header level2"><a href="/pages/5ba485/#_23-redisåºåˆ—åŒ–å™¨" class="sidebar-link">23.redisåºåˆ—åŒ–å™¨</a></li><li class="sidebar-sub-header level2"><a href="/pages/5ba485/#_24-æ•´åˆspringbootå’Œxxljob" class="sidebar-link">24.æ•´åˆspringbootå’Œxxljob</a></li><li class="sidebar-sub-header level2"><a href="/pages/5ba485/#_25-dubboé€šä¿¡å¯¹è±¡åºåˆ—åŒ–" class="sidebar-link">25.Dubboé€šä¿¡å¯¹è±¡åºåˆ—åŒ–</a></li><li class="sidebar-sub-header level2"><a href="/pages/5ba485/#_26-å¤šæœåŠ¡åŒ…è°ƒç”¨ä¸‹mavenæ‰“åŒ…æŠ€å·§" class="sidebar-link">26.å¤šæœåŠ¡åŒ…è°ƒç”¨ä¸‹Mavenæ‰“åŒ…æŠ€å·§</a></li></ul></li><li><a href="/pages/4bbbbb/" class="sidebar-link">é¡¹ç›®æ¢³ç†</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>ç”µå•†</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>å¤–å–</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <div><main class="page"><div class="theme-vdoing-wrapper "><div class="articleInfo-wrap" data-v-06970110><div class="articleInfo" data-v-06970110><ul class="breadcrumbs" data-v-06970110><li data-v-06970110><a href="/" title="é¦–é¡µ" class="iconfont icon-home router-link-active" data-v-06970110></a></li> <li data-v-06970110><a href="/categories/?category=%E9%A1%B9%E7%9B%AE%E7%AC%94%E8%AE%B0" title="åˆ†ç±»" data-v-06970110>é¡¹ç›®ç¬”è®°</a></li><li data-v-06970110><a href="/categories/?category=%E6%8A%BD%E5%A5%96" title="åˆ†ç±»" data-v-06970110>æŠ½å¥–</a></li></ul> <div class="info" data-v-06970110><div title="ä½œè€…" class="author iconfont icon-touxiang" data-v-06970110><a href="https://github.com/blage-coding" target="_blank" title="ä½œè€…" class="beLink" data-v-06970110>phan</a></div> <div title="åˆ›å»ºæ—¶é—´" class="date iconfont icon-riqi" data-v-06970110><a href="javascript:;" data-v-06970110>2023-05-15</a></div> <!----></div></div></div> <!----> <div class="content-wrapper"><div class="right-menu-wrapper"><div class="right-menu-margin"><div class="right-menu-title">ç›®å½•</div> <div class="right-menu-content"></div></div></div> <h1><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAAAXNSR0IArs4c6QAABH1JREFUSA3tVl1oHFUUPmdmd2ltklqbpJDiNnXFmgbFktho7YMPNiJSSZM0+CAYSkUELVhM6YuwIPpgoOKDqOBDC0XE2CQoNtQXBUFTTcCi+Wlh1V2TQExsUzcltd3M9Tt3ZjZzZ2fT+OJTL8yeM+eee757fmeJbq//KQL8X3DUSFOcfr7cRsRtxNQMWueeVzOkaITIGqQHNg5y8+jNW9ldM7A6nTpAjuolUikAwq7CE3WcM2RRDz+XGVgN3FptU/aUSlvq9Pa3iZ1+sgAqJyyAFqkipd9dqiwHF3P65YycLWc/6sqGrvoEoIp6DOFaX5h6+dnfjkWprwqsPk0dUGq5vySwDImC10KxFHgGL1SWoc92O3eVht09qdXNH11I2SsTsJYqMWzihqGMi+A+Garf3BAuuLI5oGlULyNfyB/HYNujwktOfRrMr5t77NmevqaUopx0grnKAyvVpmwUDB4x6FPXuGvYLTDwWsejwgtgkYKPqRJg8SV6xaiZ3ZTppGneS4yfH5/66fZSDHv+QZci/+h5c5UHtpy67JUqGppM0sh0Nc1dW6/N1W5Yoqat8/TU/VnadmdeW2PLLSyh0cvxBs3KbqTmwYPpxN4do/mzE8nEpvX/UMu2Wbp74zUAK5q6WkHns7V0eWkdPbPzd3rxkTGybadYySumVzhcaJFbs5UrEkQ/+CK8gF5dnh/6ciIZ73gwQ927L1IitoxKLXYP3SjYdOrHHfTZhRRlFyrorafPk20B3HPD1y2G3qKZME5Jcf3t/HUC13/8tSd++vqFveMUTwAUxSUFI1QekR1+bIze3D9MF2aq6cPvG72CgnldWCFqyRw3lwH8ZMerjTD9ElRO7Gv44wNpC90aASqGfVlz/Rx17srQ57/UU26hkhQqUB7dBR71WmzQhHUnblGmVOEw0jhbV1n9OlXUDCIRGaNV5Jp43N516fN7JmnTHdfp7Hgy0luO4aMhtkLL8Bi3bUWYvzh5Mn1dTxrL6QmGuRhGL/TiTTxRoEdTszSaq9GR0NGA3KdkOz3hqSV3MIDhQ5IVX/Ivx3umBti2es2h4eZby7x8br1rkf7Mo90AqC8aQ3sJeNzqFRu+vSANAQe3PL7l0HGOAdwDCeZYvNKeoZp1Qfs6Aipndh86HmFRi0LAnEO47wsqM6cdfjh3jBPUzhZy7nvlUfFsamED1VQt6aISHVymXZ/B2aCtIG8AI8xfobj2d3en1wWVhOeHELKmLQ1s211s88comkv4UCwWyF787mJdYXtNfhKAXVqnKTq8QZvGAGGOfaTo5pGZ/PwbUCr5+DPr/1J92JNHr9aOl/F3iI5+O1nfybsGxoimvZ3ViWSluDITw3P37mypheDIPY0tw7+O/5ApbkYw+zpfaUVu32Pi98+defdUhEpZkRFq0aqyNh9FuL9hpYbEm6iwi0z2REd09ZmyENEbuhjDWzKvZXTqKYaBIr3tt5kuPtQBZFvEUwHt60vfCNu41XsksH9Ij1BMMz1Y0OOunHNShFIP5868g5zeXmuLwL9T4b6Q2+KejgAAAABJRU5ErkJggg==">æŠ½å¥–é¡¹ç›®<!----></h1>  <div class="theme-vdoing-content content__default"><h1 id="æŠ½å¥–é¡¹ç›®"><a href="#æŠ½å¥–é¡¹ç›®" class="header-anchor">#</a> æŠ½å¥–é¡¹ç›®</h1> <p><img src="https://jsd.cdn.zzko.cn/gh/blage-coding/picx-images-hosting@master/20230515/lottery.drawio.6gxpbqidrn00.webp" alt="lottery.drawio"></p> <h2 id="_1-dddæ¶æ„"><a href="#_1-dddæ¶æ„" class="header-anchor">#</a> 1.DDDæ¶æ„</h2> <h4 id="insfrastructureåŸºç¡€å±‚"><a href="#insfrastructureåŸºç¡€å±‚" class="header-anchor">#</a> insfrastructureåŸºç¡€å±‚</h4> <p>æä¾›æ•°æ®åº•å±‚åŸºç¡€åŠŸèƒ½æœåŠ¡ï¼ŒåŒ…æ‹¬æ•°æ®åº“ã€ç¼“å­˜ã€ESåº•å±‚æ“ä½œï¼Œè¿›è¡Œæ•°æ®æŒä¹…åŒ–ã€‚</p> <ul><li>daoï¼šæ•°æ®åº“daosqlè¯­å¥æ˜ å°„æ¥å£ã€‚</li> <li>poï¼šæ•°æ®åº“è¡¨æ˜ å°„çš„å¯¹è±¡ã€‚</li> <li>repositoryï¼š<strong>é¢†åŸŸå±‚ä»“å‚¨æ¥å£</strong>çš„å…·ä½“å®ç°ã€‚</li> <li>utilï¼šå·¥å…·åŒ…ï¼Œå°è£…redisï¼Œesç­‰ç»„ä»¶æ•°æ®åº•å±‚æ“ä½œçš„å¯¹è±¡ã€‚</li></ul> <h4 id="domainé¢†åŸŸå±‚"><a href="#domainé¢†åŸŸå±‚" class="header-anchor">#</a> domainé¢†åŸŸå±‚</h4> <p>æä¾›ä¸åŒé¢†åŸŸæœåŠ¡å®ç°ã€‚å…·ä½“å¦‚ä½•æŠŠä¸šåŠ¡æŠ½è±¡åˆ°å¯¹åº”æœåŠ¡ï¼Œå¯ä»¥æ ¹æ®è¯¥ä¸šåŠ¡éœ€è¦æ“ä½œçš„åº“è¡¨ã€ä½¿ç”¨çš„ä»“å‚¨å¯¹è±¡æ¥å½’ç±»åˆ°å…·ä½“ä¸šåŠ¡ã€‚æ¯ä¸ªé¢†åŸŸæ˜¯ä¸€ä¸ªå¤§çš„æ–¹é¢ã€‚</p> <ul><li>modelï¼šåŒ…å«è¯¥é¢†åŸŸå±‚ä½¿ç”¨åˆ°çš„æ‰€æœ‰å¯¹è±¡ã€‚
<ul><li>aggregatesï¼šèšåˆå¯¹è±¡ï¼Œä¸€èˆ¬åŒ…å«å¤šä¸ªVOå¯¹è±¡èšåˆåœ¨ä¸€èµ·ã€‚</li> <li>reqï¼šserviceæœåŠ¡å±‚è°ƒç”¨æœåŠ¡æ—¶çš„è¯·æ±‚å¯¹è±¡ã€‚</li> <li>resï¼šserviceæœåŠ¡å±‚æœåŠ¡å“åº”è¿”å›çš„å°è£…å¯¹è±¡ã€‚</li> <li>voï¼šä¸€èˆ¬ä½œä¸ºrepositoryä»“å‚¨å±‚æœåŠ¡çš„å½¢å‚æˆ–è€…è¿”å›ç±»å‹ï¼Œä»¥åŠserviceä¸­æœåŠ¡è¯·æ±‚å“åº”ç±»å‹ï¼›è®¾è®¡æ—¶<strong>å±æ€§ä»…åŒ…å«POå¯¹è±¡ä¸­å…³é”®å±æ€§ä¿¡æ¯ï¼Œæ’é™¤æ‰POä¸­å†—æ‚å­—æ®µ</strong>ã€‚</li></ul></li> <li>repositoryä»“å‚¨<strong>æ¥å£</strong>ï¼šæä¾›daoä¸Šä¸€å±‚çš„æ•°æ®ä»“å‚¨æœåŠ¡ï¼Œé€šè¿‡<font color="red"><strong>ç¼–æ’ç»„åˆdaoå¯¹è±¡æ¥æ ¹æ®ä¸šåŠ¡éœ€æ±‚æ“ä½œæ•°æ®åº“</strong></font>ã€‚</li> <li>serviceæœåŠ¡å±‚ï¼šæ¯ä¸ªé¢†åŸŸä¸‹ç»†åˆ†æˆä¸åŒçš„æœåŠ¡å®ç°ã€‚æ¯”å¦‚æ´»åŠ¨é¢†åŸŸä¸‹åŒ…å«æ´»åŠ¨åˆ†å‘ã€æ´»åŠ¨æµè½¬ã€æ´»åŠ¨é¢†å–å¤šç§æœåŠ¡ã€‚ä»¥æœåŠ¡æ¥å£+å®ç°çš„æ–¹å¼æš´éœ²ç»™å¤–éƒ¨ï¼Œ<strong>é™¤æ­¤ä¹‹å¤–æ ¹æ®è®¾è®¡æ¨¡å¼è¿˜å¯èƒ½åŒ…å«æŠ½è±¡ç±»ã€configå¯¹è±¡æ± ã€supportä¾›åº”ç±»(ä¸€èˆ¬ç”¨äºqueryæŸ¥è¯¢å‡ºå¯¹è±¡å¹¶å°è£…æˆèšåˆå¯¹è±¡ï¼Œæä¾›æœåŠ¡å®ç°ç±»ä½¿ç”¨)</strong>ã€‚</li></ul> <h4 id="applicationåº”ç”¨å±‚"><a href="#applicationåº”ç”¨å±‚" class="header-anchor">#</a> applicationåº”ç”¨å±‚</h4> <p>è´Ÿè´£å¯¹domainå±‚æš´éœ²æœåŠ¡æ¥å£çš„ç»„åˆå’Œç¼–æ’ã€‚ä¸€èˆ¬ä»¥æ¥å£+å®ç°ç±»çš„å½¢å¼æš´éœ²ç»™æ¥å£å±‚é—¨é¢ç±»<strong>ä½¿ç”¨</strong>ã€‚é™¤æ­¤ä¹‹å¤–ï¼ŒMQç”Ÿäº§è€…æ¶ˆè´¹è€…ä»¥åŠxxljobç»„ä»¶å¯¹è±¡ä½¿ç”¨ä¹Ÿåœ¨åº”ç”¨å±‚ã€‚</p> <h4 id="interfacesæ¥å£å±‚"><a href="#interfacesæ¥å£å±‚" class="header-anchor">#</a> interfacesæ¥å£å±‚</h4> <p>ç”¨äºæš´éœ²æœåŠ¡ç»™RESTFULæœåŠ¡è¯·æ±‚ï¼Œfacadeé—¨é¢ç±»(<strong>å®ç°é€šä¿¡å±‚çš„æœåŠ¡æ¥å£</strong>)é€šè¿‡è§£æç”¨æˆ·è¾“å…¥çš„é…ç½®æ–‡ä»¶ï¼Œå¹¶<strong>ç»„åˆè°ƒç”¨applicationæä¾›çš„æœåŠ¡</strong>ã€‚åˆæ¬¡ä¹‹å¤–ï¼ŒæœåŠ¡å†…éƒ¨çš„VOå¯¹è±¡è½¬åŒ–ä¸ºæœåŠ¡ä¼ è¾“é€šä¿¡çš„DTOå¯¹è±¡çš„ç±»å‹è½¬æ¢å™¨ä¹Ÿåœ¨è¿™å£°æ˜å®šä¹‰ã€‚</p> <h4 id="rpcé€šä¿¡å±‚"><a href="#rpcé€šä¿¡å±‚" class="header-anchor">#</a> RPCé€šä¿¡å±‚</h4> <p>æä¾›æš´éœ²å½“å‰æœåŠ¡ç»™å…¶å®ƒæœåŠ¡ä½¿ç”¨ã€‚</p> <ul><li>dtoï¼šä¸åŒæœåŠ¡ä¹‹é—´é€šä¿¡æ—¶çš„ä¼ è¾“å¯¹è±¡</li> <li>reqï¼šæœåŠ¡æ¥å£çš„è¯·æ±‚å¯¹è±¡</li> <li>resï¼šæœåŠ¡æ¥å£çš„å“åº”å¯¹è±¡</li> <li>æœåŠ¡æ¥å£ï¼šç”±æ¥å£å±‚é—¨é¢ç±»å®ç°</li></ul> <h4 id="commoné€šç”¨åŒ…"><a href="#commoné€šç”¨åŒ…" class="header-anchor">#</a> commoné€šç”¨åŒ…</h4> <p>ç”¨æ¥å®šä¹‰<strong>çŠ¶æ€ç </strong>ã€ç±»å‹ç ç­‰<strong>å¸¸é‡å€¼</strong>ï¼›<strong>ç»Ÿä¸€å›å¤å¯¹è±¡</strong>ç­‰ç­‰ã€‚</p> <h2 id="_2-concurrenthashmapä¸securerandom"><a href="#_2-concurrenthashmapä¸securerandom" class="header-anchor">#</a> 2.ConcurrentHashMapä¸SecureRandom</h2> <ul><li>ConcurrentHashMap</li></ul> <p>å¤šå¹¶å‘åœºæ™¯ä¸‹ç”¨æ¥åšç¼“å­˜ï¼Œä¿è¯çº¿ç¨‹å®‰å…¨ï¼Œå…¶ä¸­computeIfAbsenæ–¹æ³•ç”¨äº<strong>è·å–keyå¯¹åº”value</strong>ï¼ŒåŒæ—¶åˆå¹¶é¦–æ¬¡è·å–ä¸åˆ°<strong>æ‰§è¡Œkeyæ’å…¥çš„æ“ä½œ</strong>ã€‚</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> map <span class="token operator">=</span> concurrentHashMap<span class="token punctuation">.</span><span class="token function">computeIfAbsent</span><span class="token punctuation">(</span>strategyId<span class="token punctuation">,</span> key <span class="token operator">-&gt;</span> <span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token constant">RATE_TUPLE_LENGTH</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ul><li>SecureRandom</li></ul> <p>secureRandom.nextInt(100) + 1ç”Ÿæˆéšæœºæ•°ï¼Œä½¿ç”¨SecureRandomç±»ä¿è¯çº¿ç¨‹å®‰å…¨ï¼Œä¸”ç”Ÿæˆçš„éšæœºæ•°æ›´å®‰å…¨ã€‚</p> <h2 id="_3-ç­–ç•¥æ¨¡å¼"><a href="#_3-ç­–ç•¥æ¨¡å¼" class="header-anchor">#</a> 3.ç­–ç•¥æ¨¡å¼</h2> <ul><li>ä¸šåŠ¡åœºæ™¯</li></ul> <p>ç­–ç•¥é¢†åŸŸä¸‹çš„æŠ½å¥–ç®—æ³•æœåŠ¡ä½¿ç”¨äº†ç­–ç•¥æ¨¡å¼ã€‚é¦–å…ˆå…ˆåœ¨BaseAlgorithmç±»ä¸­å®ç°<strong>ç®—æ³•æ¥å£</strong>çš„<strong>ä¸€èˆ¬ç®—æ³•è¡Œä¸º</strong>ï¼ŒåŒ…æ‹¬ç”Ÿæˆéšæœºå€¼ï¼Œåˆå§‹åŒ–mapç­–ç•¥æ± ï¼Œå…¶ä¸­åŒ…å«ä¸¤ç§mapï¼Œä¸€ç§æ˜¯ä¿å­˜å½“å‰ç­–ç•¥çš„æ˜ å°„è¡¨ï¼Œæ˜ å°„è¡¨æ˜¯ä¸€ä¸ªæ¦‚ç‡æ•£åˆ—å€¼â€”å¥–å“Idçš„æ˜ å°„è¡¨ï¼Œå®ƒæ˜¯ä¸€ä¸ªStringæ•°ç»„ï¼Œé€šè¿‡ä¸‹æ ‡ç´¢å¼•è¿›è¡Œæ˜ å°„ï¼›å¦ä¸€ç§mapæ˜¯ä¿å­˜å½“å‰æŠ½å¥–ç­–ç•¥çš„æ‰€æœ‰å¥–å“ä¿¡æ¯ã€‚</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">//strategyIdâ€”â€”&gt;string[],å…¶ä¸­String[i]ä»£è¡¨æ¦‚ç‡æ•£åˆ—å€¼ä¸ºiå¯¹åº”çš„å¥–å“Id</span>
<span class="token keyword">protected</span> <span class="token class-name">Map</span><span class="token operator">&lt;</span><span class="token class-name">Long</span><span class="token punctuation">,</span> <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> rateTupleMap <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ConcurrentHashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">protected</span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Long</span><span class="token punctuation">,</span> <span class="token class-name">List</span><span class="token punctuation">&lt;</span><span class="token class-name">AwardRateVO</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span> awardRateInfoMap <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ConcurrentHashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>ä¸åŒç®—æ³•ä¼šç»§æ‰¿è¿™ä¸ªç®—æ³•åŸºç¡€ç±»ï¼Œå¹¶<font color="red">æ ¹æ®é‡‡ç”¨çš„ä¸åŒç­–ç•¥åœºæ™¯æ¥å®ç°randomDraw()æ‰§è¡ŒæŠ½å¥–æ–¹æ³•</font>ã€‚</p> <p><strong>ç­–ç•¥æ¨¡å¼åœ¨è°ƒç”¨æ—¶å¼•ç”¨çš„æ˜¯æ¥å£å¯¹è±¡ï¼Œé€šè¿‡æ¥å£å¯¹è±¡è°ƒç”¨çš„æ–¹æ³•å®é™…ä¸Šæ˜¯æ¥å£æ³¨å…¥çš„Beanå®ç°çš„æ–¹æ³•</strong>ã€‚</p> <ul><li>@Resource</li></ul> <p>ä¸ºäº†é˜²æ­¢ç­–ç•¥æ¨¡å¼ä¸‹<strong>å¯¹ç®—æ³•æ¥å£Autowired</strong>è‡ªåŠ¨è£…é…å‡ºç°é—®é¢˜ï¼Œå¹¶é‡‡ç”¨@<strong>Resourceçš„byNameæ³¨å…¥æ–¹å¼ï¼Œå¹¶åœ¨ä¸åŒç®—æ³•å®ç°ç±»ä¸Šçš„æ³¨è§£æŒ‡æ˜Beanåç§°</strong>ã€‚<strong>autowiredæ³¨å…¥çš„å¯¹è±¡ä¸€å®šå¾—å­˜åœ¨ã€‚sourceå¯ä»¥ä¸å­˜åœ¨</strong>ï¼Œå®ƒä¼šè‡ªåŠ¨æŒ‰ç…§byNameæ–¹å¼è¿›è¡Œè£…é…ï¼›å¦‚æœæ²¡æœ‰åŒ¹é…ï¼Œåˆ™å›é€€ä¸ºä¸€ä¸ªåŸå§‹ç±»å‹è¿›è¡ŒåŒ¹é…</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Component</span><span class="token punctuation">(</span><span class="token string">&quot;entiretyRateRandomDrawAlgorithm&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">EntiretyRateRandomDrawAlgorithm</span> <span class="token keyword">extends</span> <span class="token class-name">BaseAlgorithm</span><span class="token punctuation">{</span><span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p><img src="https://jsd.cdn.zzko.cn/gh/blage-coding/picx-images-hosting@master/20230515/image-20230405165509701.5rovpfvkwa00.webp" alt="image-20230405165509701"></p> <h2 id="_4-æ¨¡æ¿æ¨¡å¼"><a href="#_4-æ¨¡æ¿æ¨¡å¼" class="header-anchor">#</a> 4.æ¨¡æ¿æ¨¡å¼</h2> <ul><li>ä¸šåŠ¡åœºæ™¯</li></ul> <p>ç­–ç•¥é¢†åŸŸä¸‹çš„æŠ½å¥–æœåŠ¡é‡‡ç”¨æ¨¡æ¿æ¨¡å¼è®¾è®¡ï¼Œæ•´ä¸ªæŠ½å¥–æµç¨‹å¦‚ä¸‹ï¼š</p> <p>â‘ æ ¹æ®å…¥å‚ç­–ç•¥IDè·å–æŠ½å¥–ç­–ç•¥é…ç½®</p> <p>â‘¡æ ¡éªŒå’Œå¤„ç†æŠ½å¥–ç­–ç•¥çš„æ•°æ®åˆå§‹åŒ–åˆ°å†…å­˜</p> <p>â‘¢è·å–é‚£äº›è¢«æ’é™¤æ‰çš„æŠ½å¥–åˆ—è¡¨ï¼Œè¿™äº›å¥–å“å¯èƒ½æ˜¯<strong>å·²ç»å¥–å“åº“å­˜ä¸ºç©º</strong>ï¼Œæˆ–è€…å› ä¸º<strong>é£æ§ç­–ç•¥ä¸èƒ½ç»™è¿™ä¸ªç”¨æˆ·è–…ç¾Šæ¯›çš„å¥–å“</strong></p> <p>â‘£æ‰§è¡ŒæŠ½å¥–ç®—æ³•ï¼Œå¯ä»¥æ‹¿åˆ°ç®—æ³•æ¥å£æ‰§è¡Œå·²å®šä¹‰å¥½çš„ç­–ç•¥ï¼Œä¹Ÿå¯ä»¥é‡æ–°å®šä¹‰å…¶å®ƒçš„æŠ½å¥–ç®—æ³•ï¼Œ</p> <p>â‘¤åŒ…è£…ä¸­å¥–ç»“æœ</p> <p>å…¶ä¸­<font color="red"><strong>äº”ä¸ªè¡Œä¸ºçš„å‚æ•°æ§åˆ¶å’Œè°ƒç”¨é¡ºåºç”±æŠ½è±¡æ¨¡æ¿ç±»</strong></font>è¿›è¡Œæ§åˆ¶ï¼Œè€Œ<strong>æ‰§è¡ŒæŠ½å¥–</strong>å’Œ<strong>è·å–åº“å­˜ä¸º0çš„å¥–å“ID</strong>è¿™ä¸¤ç§è¡Œä¸º<strong>å› ä¸ºå®ç°æ–¹æœ‰ä¸åŒçš„æ–¹å¼å˜åŒ–ï¼Œä¸é€‚åˆå®šä¹‰æˆé€šç”¨çš„æ–¹æ³•</strong>ï¼Œå› æ­¤æ¨¡æ¿ç±»ä¸­æŠ½è±¡è¿™ä¸¤ç§æ–¹æ³•ï¼Œäº¤ç»™å­ç±»å»å®ç°ã€‚</p> <p>DrawConfigä½¿ç”¨æ± åŒ–/æ˜ å°„æ€æƒ³ï¼Œæä¾›äº†ä¸€ä¸ªæ ¹æ®<strong>ç­–ç•¥ID</strong>å–å‡º<strong>å¯¹åº”æŠ½å¥–ç®—æ³•Bean</strong>çš„Mapæ± å­</p> <p>Supportç±»ä¸»è¦æä¾›æŸ¥è¯¢æ“ä½œï¼Œè·å–ç­–ç•¥ä¿¡æ¯å’Œå•†å“ä¿¡æ¯æä¾›ç»™å­ç±»ä½¿ç”¨ã€‚</p> <p><img src="https://jsd.cdn.zzko.cn/gh/blage-coding/picx-images-hosting@master/20230515/image-20230405171314313.3i4omn28qwk0.webp" alt="image-20230405171314313"></p> <h2 id="_5-å·¥å‚æ¨¡å¼"><a href="#_5-å·¥å‚æ¨¡å¼" class="header-anchor">#</a> 5.å·¥å‚æ¨¡å¼</h2> <ul><li>ä¸šåŠ¡åœºæ™¯</li></ul> <p>é‡‡ç”¨å·¥å‚æ¨¡å¼å‘æ”¾å¥–å“ã€‚é¦–å…ˆåŸºäºç­–ç•¥æ¨¡å¼å®ç°ä¼˜æƒ åˆ¸ã€å®ç‰©å¥–å“ã€æ–‡å­—å¥–å“ç­‰å¥–å“ç±»çš„å‘è´§æ–¹æ³•ï¼ŒæŠŠå¥–å“æ¨¡æ‹Ÿæˆè´§ç‰©ï¼Œ<strong>æ¯ä¸ªå¥–å“å„è‡ªéƒ½å®ç°ä¸åŒçš„å‘è´§æ–¹æ³•</strong>ã€‚æ¥ç€æŠŠå››ç§å¥–å“çš„å‘å¥–ç»Ÿä¸€æ”¾åœ¨é…ç½®ç±»çš„Mapä¸­ï¼Œæœ€åå£°æ˜å®šä¹‰å·¥å‚ï¼Œ<font color="red"><strong>å·¥å‚ä»mapä¸­æ ¹æ®å¥–å“ç±»å‹IDå–å‡ºè·å¾—å¯¹åº”çš„å¥–å“ï¼Œå‡å°‘if-elseä½¿ç”¨</strong></font>ã€‚</p> <p><img src="https://jsd.cdn.zzko.cn/gh/blage-coding/picx-images-hosting@master/20230515/image-20230405173430626.44h8emuvc600.webp" alt="image-20230405173430626"></p> <h2 id="_6-çŠ¶æ€æ¨¡å¼"><a href="#_6-çŠ¶æ€æ¨¡å¼" class="header-anchor">#</a> 6.çŠ¶æ€æ¨¡å¼</h2> <ul><li>ä¸šåŠ¡åœºæ™¯</li></ul> <p>æ¯ä¸ªæ´»åŠ¨éƒ½åŒ…å«ä¸åŒçš„çŠ¶æ€ï¼ŒåŒ…æ‹¬æå®¡ã€æ’¤å®¡ã€è¿è¡Œã€å…³é—­ç­‰ç­‰ï¼Œå½“æ‰§è¡Œå®ŒæŸäº›æ“ä½œåä¼šè§¦å‘æ´»åŠ¨çŠ¶æ€çš„æ”¹å˜ï¼Œæ¯”å¦‚æ´»åŠ¨å¼€å§‹ç§’æ€çŠ¶æ€ä¼šä»é€šè¿‡è½¬ä¸ºè¿è¡Œã€‚æ¯ä¸€ç§çŠ¶æ€ä¸‹è½¬ç§»åˆ°å…¶å®ƒçŠ¶æ€çš„æ¡ä»¶éƒ½æ˜¯ä¸åŒçš„ï¼Œå› æ­¤å¯ä»¥ä½¿ç”¨çŠ¶æ€æ¨¡å¼ã€‚<font color="red"><strong>å¯¹è±¡çš„è¡Œä¸ºåŸºäºä»–çš„çŠ¶æ€æ¥æ”¹å˜</strong></font>,è¿™ä¸ªçŠ¶æ€å¿…é¡»æ˜¯ä¸€ä¸ª<strong>æ¥å£</strong>æˆ–<strong>æŠ½è±¡ç±»</strong>ã€‚</p> <p><img src="https://jsd.cdn.zzko.cn/gh/blage-coding/picx-images-hosting@master/20230515/image-20230405191413561.7iy5mh3kjs00.webp" alt="image-20230405191413561"></p> <p>å®ç°åˆ†ä¸ºä¸¤å—ï¼Œé¦–å…ˆæ˜¯çŠ¶æ€ç±»ï¼ŒåŸºäºå®ƒçš„å¤šæ€æ€§è´¨é‡‡ç”¨ç­–ç•¥æ¨¡å¼å®ç°(<strong>æŠ½è±¡ç±»+å®ç°</strong>)ï¼Œæ¯ç§çŠ¶æ€åŸºäºè‡ªèº«å“åº”çš„è½¬æ¢è§„åˆ™å®ç°å¯¹åº”è¡Œä¸ºï¼Œæœ€åæ‰€æœ‰ç±»éƒ½ä¼šæ”¾å…¥åˆ°ä¸€ä¸ªmapä¸­æ ¹æ®çŠ¶æ€ç è·å–ã€‚å¦ä¸€éƒ¨åˆ†æ˜¯æµè½¬æ¥å£å’Œæµè½¬æœåŠ¡(ä¹Ÿå°±æ˜¯<strong>ä¸Šä¸‹æ–‡ç±»</strong>)ï¼Œ<font color="red"><strong>æµè½¬æœåŠ¡ç±»éœ€è¦æŒæœ‰ä¸€ä¸ªæŠ½è±¡ç±»çŠ¶æ€å±æ€§å’ŒçŠ¶æ€è½¬ç§»å‡½æ•°</strong></font>,é€šè¿‡è¯¥<strong>æŠ½è±¡ç±»å¼•ç”¨</strong>æ¥<strong>è°ƒç”¨ä¸åŒçŠ¶æ€çš„è¡Œä¸ºåï¼Œå†è°ƒç”¨å‡½æ•°å®ç°æµè½¬</strong>ã€‚è¿™ç§å†…éƒ¨çŠ¶æ€è½¬ç§»æ˜¯äº¤ç»™contextç±»ä»mapä¸­å–çŠ¶æ€æ¥å®ç°ã€‚</p> <p><img src="https://jsd.cdn.zzko.cn/gh/blage-coding/picx-images-hosting@master/20230515/image-20230405191812397.41bswnx0xvg0.webp" alt="image-20230405191812397"></p> <p>å¦ä¸€ç§å†…éƒ¨æµè½¬æ–¹å¼æ˜¯æŠŠçŠ¶æ€è½¬ç§»äº¤ç»™<strong>çŠ¶æ€ç±»</strong>æ¥å®ç°ï¼Œæµè½¬æœåŠ¡è°ƒç”¨çŠ¶æ€è¡Œä¸ºæ—¶ï¼ŒæŠŠè‡ªå·±thisæŒ‡é’ˆä¼ è¿›å»(contextå¯¹è±¡)ï¼Œç„¶åçŠ¶æ€ç±»å†é€šè¿‡å½¢å‚setä¿®æ”¹ä¸Šä¸‹æ–‡ç±»çš„çŠ¶æ€ä½ã€‚</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">class</span> <span class="token class-name">Context</span>
<span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">State</span> state<span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setState</span><span class="token punctuation">(</span><span class="token class-name">State</span> state<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token operator">=</span>state<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token class-name">Handle</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token class-name"><span class="token namespace">state<span class="token punctuation">.</span></span>Handle</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token class-name">StateA</span> <span class="token keyword">extends</span> <span class="token class-name">State</span>
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token class-name">Handle</span><span class="token punctuation">(</span><span class="token class-name">Context</span> context<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        context<span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">StateB</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><ul><li>å¤–éƒ¨ä¼ å‚æµè½¬</li></ul> <p><strong>çŠ¶æ€è½¬æ¢ä¾èµ–äºå¤–éƒ¨ä¼ å‚(æ–°çš„çŠ¶æ€)ï¼Œcontext.do()åå†è°ƒç”¨context.setStateå®ç°</strong>ã€‚è¿™ç§æ–¹å¼ä»…é€‚ç”¨äºcontextå†…éƒ¨æ‹¿ä¸åˆ°å…¶å®ƒçŠ¶æ€ç±»ã€‚</p> <h2 id="_7-mybatis-foreach-æ ‡ç­¾"><a href="#_7-mybatis-foreach-æ ‡ç­¾" class="header-anchor">#</a> 7.mybatis&lt;foreach&gt;æ ‡ç­¾</h2> <p>mybatiså®ç°å¯ä»¥é€šè¿‡&lt;foreach&gt;æ ‡ç­¾ï¼Œå®ç°æŠŠdaoå½¢å‚é‡Œçš„listé›†åˆæ’å…¥åˆ°è¡¨ä¸­ã€‚å¥½å¤„åœ¨äºé«˜æ•ˆï¼Œåªç”¨ä»è¿æ¥æ± è·å–ä¸€æ¬¡è¿æ¥æ‰§è¡Œä¸€æ¡sqlè¯­å¥ã€‚</p> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>insert</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>insertList<span class="token punctuation">&quot;</span></span> <span class="token attr-name">parameterType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>java.util.List<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        INSERT INTO award(award_id, award_type, award_name, award_content, create_time, update_time)
        VALUES
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>foreach</span> <span class="token attr-name">collection</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>list<span class="token punctuation">&quot;</span></span> <span class="token attr-name">item</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>item<span class="token punctuation">&quot;</span></span> <span class="token attr-name">index</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>index<span class="token punctuation">&quot;</span></span> <span class="token attr-name">separator</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>,<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
            (
            #{item.awardId},
            #{item.awardType},
            #{item.awardName},
            #{item.awardContent},
            NOW(),
            NOW()
            )
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>foreach</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>insert</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><h2 id="_8-idç”Ÿæˆç­–ç•¥"><a href="#_8-idç”Ÿæˆç­–ç•¥" class="header-anchor">#</a> 8.IDç”Ÿæˆç­–ç•¥</h2> <p>ä½¿ç”¨ç­–ç•¥æ¨¡å¼å°†ä¸‰ç§IDç”Ÿæˆç®—æ³•è¿›è¡ŒåŒ…è£…ï¼Œ<strong>å¤–éƒ¨çš„è°ƒç”¨æ–¹ä¼šéœ€è¦æ ¹æ®ä¸åŒçš„åœºæ™¯æ¥é€‰æ‹©å‡ºé€‚åˆçš„IDç”Ÿæˆç­–ç•¥</strong>ã€‚ä½¿ç”¨é˜¿å¸•å¥‡å·¥å…·åŒ…æ¥å®ç°ï¼ŒåŒ…æ‹¬é›ªèŠ±ç®—æ³•ã€æ—¥æœŸæ‹¼æ¥ç®—æ³•ã€éšæœºæ•°ç®—æ³•ã€‚</p> <ul><li>è®¢å•å·ï¼šå¤§é‡é«˜å¹¶å‘ï¼Œé‡‡ç”¨é›ªèŠ±ç®—æ³•</li> <li>æ´»åŠ¨å·activityIdï¼šå°‘é‡ï¼Œé‡‡ç”¨æ—¥æœŸç”Ÿæˆç®—æ³•</li> <li>éšæœºæ•°å·strategyIdï¼šå°‘é‡ï¼Œé‡‡ç”¨éšæœºæ•°ç®—æ³•</li></ul> <p>é›ªèŠ±ç®—æ³•ï¼šå®‰å…¨æ€§å’Œé«˜å¹¶å‘ç”±æ•°æ®ä¸­å¿ƒå’Œå·¥ä½œèŠ‚ç‚¹å…±åæ¯”ç‰¹æ¥å†³å®šï¼Œå½“ç„¶å¯ä»¥æ ¹æ®ä¸šåŠ¡éœ€æ±‚æ‰©å±•ä½æ•°å’Œç”Ÿæˆæ–¹æ³•ï¼Œè¿™é‡Œé‡‡ç”¨çš„æ˜¯æ ¹æ®æœ¬åœ°ç½‘å¡IPçš„hashcodeç”Ÿæˆã€‚</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Component</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SnowFlake</span> <span class="token keyword">implements</span> <span class="token class-name">IIdGenerator</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">Snowflake</span> snowflake<span class="token punctuation">;</span>
    <span class="token annotation punctuation">@PostConstruct</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">long</span> workId<span class="token punctuation">;</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            workId <span class="token operator">=</span> <span class="token class-name">NetUtil</span><span class="token punctuation">.</span><span class="token function">ipv4ToLong</span><span class="token punctuation">(</span><span class="token class-name">NetUtil</span><span class="token punctuation">.</span><span class="token function">getLocalhostStr</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            workId<span class="token operator">=</span><span class="token class-name">NetUtil</span><span class="token punctuation">.</span><span class="token function">getLocalhost</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">hashCode</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token comment">//ä¿ç•™åäº”ä½ä½œä¸ºæ•°æ®èŠ‚ç‚¹id</span>
        workId<span class="token operator">=</span>workId<span class="token operator">&gt;&gt;</span><span class="token number">16</span><span class="token operator">&amp;</span><span class="token number">31</span><span class="token punctuation">;</span>
        <span class="token comment">//æ•°æ®ä¸­å¿ƒid</span>
        <span class="token keyword">long</span> dataCenterId<span class="token operator">=</span><span class="token number">1L</span><span class="token punctuation">;</span>
        snowflake <span class="token operator">=</span> <span class="token class-name">IdUtil</span><span class="token punctuation">.</span><span class="token function">createSnowflake</span><span class="token punctuation">(</span>workId<span class="token punctuation">,</span> dataCenterId<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">Long</span> <span class="token function">nextId</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> snowflake<span class="token punctuation">.</span><span class="token function">nextId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br></div></div><h2 id="_9-aopæ¦‚å¿µ"><a href="#_9-aopæ¦‚å¿µ" class="header-anchor">#</a> 9.AOPæ¦‚å¿µ</h2> <ul><li><p>åˆ‡é¢ï¼šåˆ‡ç‚¹+å¤„ç†</p></li> <li><p>è¿æ¥ç‚¹joinpointï¼šå…è®¸ä½œä¸ºåˆ‡å…¥ç‚¹çš„èµ„æºï¼Œå®ƒéœ€è¦æ’å…¥æ¨ªåˆ‡å…³æ³¨ç‚¹ã€‚ã€</p></li> <li><p>åˆ‡ç‚¹pointcutï¼š<strong>ç”¨æ¥æŒ‡å®šåœ¨ä»€ä¹ˆåœ°æ–¹è¿›è¡Œç»‡å…¥</strong>ã€‚åˆ‡å…¥ç‚¹çš„æŒ‡æ˜å¯ä»¥é€šè¿‡åˆ‡å…¥ç‚¹è¡¨è¾¾å¼ï¼ŒåŒ…æ‹¬@annotationæŒ‡æ˜æ³¨è§£åç§°ã€æŒ‡æ˜åŒ…åï¼Œè¿˜å¯ä»¥ä½¿ç”¨|| &amp;&amp;è¿›è¡Œæ‹¼æ¥ã€‚</p></li> <li><p>adviceï¼šå£°æ˜å„ç§å¢å¼ºæ–¹æ³•ï¼ŒåŒ…æ‹¬ç¯ç»•å¢å¼º...ä½¿ç”¨æ–¹æ³•ä¸€èˆ¬æ˜¯åœ¨@around()é‡Œé¢ä½¿ç”¨&amp;&amp;æŒ‡å®šå¤šä¸ªåˆ‡ç‚¹æ¡ä»¶ï¼ŒæŒ‡æ˜æ³¨è§£åçš„åŒæ—¶è¿˜è¦æŒ‡æ˜æ¥è‡ªå“ªä¸ªåŒ…(é˜²æ­¢å…¶å®ƒjaråŒ…çš„æ³¨è§£å‡ºç°åŒå)ã€‚</p></li></ul> <p><img src="https://jsd.cdn.zzko.cn/gh/blage-coding/picx-images-hosting@master/20230515/image-20230405195304802.1mhyq98z93eo.webp" alt="image-20230405195304802"></p> <p>ç¯ç»•å¢å¼ºä¸€èˆ¬ä¸¤ç§ä½¿ç”¨æ–¹å¼ï¼š</p> <p>â‘ @pointcutå’Œ@aroundè”åˆä½¿ç”¨ã€‚å…¶ä¸­@aroundçš„valueè¦æŒ‡æ˜åˆ‡ç‚¹å‰é¢åˆ‡ç‚¹æŒ‡æ˜çš„å‡½æ•°ã€‚</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code> <span class="token annotation punctuation">@Pointcut</span><span class="token punctuation">(</span><span class="token string">&quot;@annotation(com.last.lottery.db.router.annotation.DBRouter)&quot;</span><span class="token punctuation">)</span>
 <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">addPoint</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
 
 <span class="token annotation punctuation">@Around</span><span class="token punctuation">(</span><span class="token string">&quot;addPoint()&quot;</span><span class="token punctuation">)</span>
 <span class="token keyword">public</span> <span class="token class-name">Object</span> <span class="token function">doRouter</span><span class="token punctuation">(</span><span class="token class-name">ProceedingJoinPoint</span> jp<span class="token punctuation">,</span> <span class="token class-name">DBRouter</span> dbRouter<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Throwable</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>â‘¡å•ç‹¬åœ¨@aroundä¸­ä½¿ç”¨åˆ‡å…¥è¡¨è¾¾å¼ï¼Œå¹¶ä½¿ç”¨&amp;&amp;æ‹¼æ¥å¤šä¸ªæ¡ä»¶ã€‚</p> <h2 id="_10-mybatisæ‹¦æˆªå™¨"><a href="#_10-mybatisæ‹¦æˆªå™¨" class="header-anchor">#</a> 10.Mybatisæ‹¦æˆªå™¨</h2> <p>Mybatiså¯ä»¥æ‹¦æˆªå¦‚ä¸‹å››å¤§å¯¹è±¡ï¼š</p> <ul><li>Executor (update, query, flushStatements, commit, rollback, getTransaction, close, isClosed)æ‹¦æˆªæ‰§è¡Œå™¨(æŸ¥è¯¢ç¼“å­˜ï¼Œæ•°æ®åº“æ“ä½œï¼Œäº‹åŠ¡ç®¡ç†)</li> <li>ParameterHandler (getParameterObject, setParameters)æ‹¦æˆªsqlè¯­å¥å‚æ•°å¤„ç†(ç»™sqlè¯­å¥åŠ¨æ€èµ‹å€¼å…·ä½“å®ç°ï¼Œä¹Ÿå°±æ˜¯#{}é‡Œé¢çš„å‚æ•°)</li> <li>ResultSetHandler (handleResultSets, handleOutputParameters)æ‹¦æˆªç»“æœé›†å¤„ç†å’Œç»„è£…(resulttypeå°†ç»“æœæ˜ å°„æˆå“åº”çš„ç»“æœå¯¹è±¡)</li> <li>StatementHandler (prepare, parameterize, batch, update, query)æ‹¦æˆªsqlè¯­æ³•æ„å»ºçš„å¤„ç†(åˆ›å»ºå°è£…statementå¯¹è±¡ã€‚<strong>parameterizeè°ƒç”¨parameterhandlerç±»æ–¹æ³•å¯¹sqlç«™ä½ç¬¦è¿›è¡Œèµ‹å€¼</strong>ã€‚prepareæ–¹æ³•æ ¹æ®<strong>Connectionè¿æ¥</strong>è·å–statementå¯¹è±¡)</li></ul> <p>MappedStatementï¼šå¯¹mapper.xmlæŸä¸ªsqlæ–¹æ³•çš„å°è£…ï¼Œç›¸å½“äºä¸€ä¸ªsqlè¯­å¥ï¼Œé€šè¿‡<code>Invocation</code> å¯¹è±¡çš„ <code>getArgs()</code> æ–¹æ³•è·å–åˆ°ï¼ŒgetArgs()[1]è¡¨ç¤ºä¼ å…¥sqlè¯­å¥ç¬¬äºŒä¸ªå‚æ•°ã€‚</p> <p>Invocation.getTarget()è·å–æ‹¦æˆªæ–¹æ³•æ‰€åœ¨çš„ç±»class</p> <p>delegate.mappedStatementï¼šå­˜å‚¨<strong>æ˜ å°„è¯­å¥</strong>ä¿¡æ¯ã€‚æ˜ å°„è¯­å¥å®šä¹‰äº†è¯¥æ‰§è¡Œå“ªä¸ªcurdæ“ä½œï¼Œä»¥åŠsqlè¯­å¥ä¸javaå¯¹è±¡å¦‚ä½•æ˜ å°„ã€‚</p> <h2 id="_11-æ•°æ®åº“è·¯ç”±ç»„ä»¶è®¾è®¡"><a href="#_11-æ•°æ®åº“è·¯ç”±ç»„ä»¶è®¾è®¡" class="header-anchor">#</a> 11.æ•°æ®åº“è·¯ç”±ç»„ä»¶è®¾è®¡</h2> <h4 id="ä¸šåŠ¡åœºæ™¯"><a href="#ä¸šåŠ¡åœºæ™¯" class="header-anchor">#</a> ä¸šåŠ¡åœºæ™¯</h4> <ul><li><p>åº”å¯¹åˆ†åº“åˆ†è¡¨çš„ä¸åŒåœºæ™¯ã€‚åˆ†åº“è§£å†³çš„é«˜å¹¶å‘åœºæ™¯ï¼Œç¼“è§£åŒä¸€ä¸ªæ•°æ®åº“çš„å‹åŠ›ã€‚åˆ†è¡¨è§£å†³çš„æ˜¯å•è¡¨æ•°æ®é‡å¤§çš„é—®é¢˜ã€‚å¦‚ç”¨æˆ·æ´»åŠ¨æŠ¥åç™»è®°è¡¨é€‚åˆåˆ†åº“ï¼Œå› ä¸ºç”¨æˆ·åªè¦ä¸è¶…è¿‡é™é¢ï¼Œå¯ä»¥åå¤æ¥å›æŠ¥åæ´»åŠ¨ã€‚è€Œè®¢å•è¡¨åˆ™éœ€è¦åˆ†åº“åˆ†è¡¨ï¼Œå› ä¸ºè®¢å•è¡¨åŒ…æ‹¬æ´»åŠ¨ä¿¡æ¯ã€æŠ½å¥–ç­–ç•¥ã€å¥–å“ä¿¡æ¯ç­‰ç­‰ï¼Œä¸€æ¡æ•°æ®é‡å¤§ã€‚å®<strong>ç°åˆ†åº“åˆ†è¡¨çš„æ ¸å¿ƒåœ¨äºåŠ¨æ€åˆ‡æ¢æ•°æ®æºdataSource</strong>ï¼Œä¸åŒçš„ç”¨æˆ·åœ¨è¿›è¡Œæ•°æ®åº“è¯»å†™æ—¶ï¼Œä¼š<font color="red"><strong>æ ¹æ®ä»–çš„uIdä½¿ç”¨è·¯ç”±ç®—æ³•è®¡ç®—è·å¾—åº“ç´¢å¼•å’Œè¡¨ç´¢å¼•ï¼Œè¿™æ ·ç”¨æˆ·å°±å¯ä»¥çŸ¥é“ä»–çš„æ•°æ®å­˜æ”¾åœ¨å“ªä¸ªåº“å“ªä¸ªè¡¨</strong></font>ã€‚</p></li> <li><p>æ•´ä¸ªè¿‡ç¨‹ä½¿ç”¨æ‹¦æˆªå™¨å’ŒAOPæ¥å®ç°ã€‚<strong>é€šè¿‡AOPå’Œæ³¨è§£è·å–è¯¥SQLè¯­å¥çš„åˆ†è¡¨ç­–ç•¥(åˆ†åº“ï¼Ÿåˆ†è¡¨ï¼Ÿç´¢å¼•Key)ï¼Œå¹¶è®¡ç®—å‡ºæ–°çš„è·¯ç”±åº“ç´¢å¼•å’Œè¡¨ç´¢å¼•(åå°„æ‹¿åˆ°è·¯ç”±å±æ€§å€¼+è·¯ç”±ç®—æ³•)</strong>ã€‚æ‹¦æˆªå™¨çš„ä½œç”¨åˆ™æ˜¯<strong>åœ¨æ‰§è¡ŒSQLè¯­å¥ä¹‹å‰ï¼Œä¿®æ”¹æ’å…¥æ–°çš„åº“åå’Œè¡¨åï¼Œä»è€Œè·¯ç”±åˆ°å¯¹åº”çš„ä½ç½®è¯»å–æ•°æ®</strong>ã€‚</p></li> <li><p>è·¯ç”±ç®—æ³•å®ç°ä½¿ç”¨hashmapçš„æ‰°ä¹±å‡½æ•°æ¥å¯¹hashcodeè¿›è¡Œå‡åŒ€æ•£åˆ—ï¼Œå¹¶æŠŠè®¡ç®—å¾—åˆ°çš„åº“ç´¢å¼•å’Œè¡¨ç´¢å¼•å­˜æ”¾åœ¨DBä¸Šä¸‹æ–‡ç±»ä¸­ï¼ŒDBä¸Šä¸‹æ–‡ç±»ä½¿ç”¨<strong>ThreadLocal</strong>æ¥ä¿å­˜åº“è¡¨ç´¢å¼•(ThreadLocalå…·æœ‰çº¿ç¨‹éš”ç¦»çš„ç‰¹ç‚¹)ã€‚</p></li></ul> <h4 id="mybatisæ‹¦æˆªå™¨åŠ¨æ€æ›¿æ¢è¡¨å"><a href="#mybatisæ‹¦æˆªå™¨åŠ¨æ€æ›¿æ¢è¡¨å" class="header-anchor">#</a> mybatisæ‹¦æˆªå™¨åŠ¨æ€æ›¿æ¢è¡¨å</h4> <p>@Signatureæ³¨è§£ï¼šæŒ‡å®šæ‹¦æˆªå™¨çš„ç±»å‹ã€æ‹¦æˆªå™¨çš„æ–¹æ³•ã€æ–¹æ³•çš„å…¥å‚ã€‚è¿™é‡Œé€‰æ‹©<strong>æ‹¦æˆªStatementHandleræ„é€ sqlè¯­å¥ä¹‹å‰</strong>ã€‚</p> <ul><li>è·å–StatementHandlerå¯¹è±¡ï¼Œå¹¶æ‹¿åˆ°è¯¥å¯¹è±¡çš„å…ƒæ•°æ®</li> <li>ä»å…ƒæ•°æ®å¯¹è±¡æ‹¿åˆ°sqlå¯¹è±¡mappedStatement</li> <li><strong>é€šè¿‡mappedStatement.getId()è·å–sqlè¯­å¥æ‰€æ˜ å°„çš„æ¥å£å(Dao)</strong></li> <li>æ‹¿åˆ°æ¥å£.classåç§°åå¯ä»¥é€šè¿‡class.getAnnotation()è·å–æ³¨è§£åç§°ã€‚(<font color="red"><strong>åªæœ‰é€šè¿‡åå°„æ‹¿åˆ°äº†.classæ‰èƒ½å¤Ÿæ‹¿åˆ°æ³¨è§£</strong></font>)</li> <li>æ ¹æ®æ³¨è§£é‡Œå®šä¹‰çš„å­—æ®µå±æ€§å€¼ï¼Œåˆ¤æ–­æ˜¯å¦é‡‡ç”¨åˆ†è¡¨ç­–ç•¥ï¼Œä¸åˆ†è¡¨åˆ™ç…§å¸¸æ‰§è¡Œä¸éœ€è¦ä¿®æ”¹ã€‚</li> <li>å¦‚æœéœ€è¦åˆ†è¡¨,ä»æ‹¦æˆªç±»statementHandlerè·å–sqlè¯­å¥ï¼Œé€šè¿‡æ­£åˆ™è¡¨è¾¾å¼æ‰¾åˆ°è¡¨åçš„ä½ç½®ï¼Œå¹¶ä»DBContextHolderä¸Šä¸‹æ–‡ç±»ä¸­å–å‡ºè®¡ç®—å¥½çš„è¡¨ç´¢å¼•æ›¿æ¢åˆ°sqlè¯­å¥ã€‚</li> <li>é€šè¿‡åå°„ä¿®æ”¹BoundSqlä¸­çš„sqlå­—ç¬¦ä¸²è¯­å¥ï¼Œå› ä¸ºBoundSqlä¸­çš„å±æ€§éƒ½ä¸ºprivate finalã€‚</li></ul> <h4 id="aopåˆ‡é¢è®¡ç®—è·¯ç”±"><a href="#aopåˆ‡é¢è®¡ç®—è·¯ç”±" class="header-anchor">#</a> AOPåˆ‡é¢è®¡ç®—è·¯ç”±</h4> <p>é¦–å…ˆæ˜ç™½AOPç¯ç»•å¢å¼ºæ‰§è¡Œæ—¶æœºæ˜¯åœ¨åˆ‡ç‚¹æ–¹æ³•æ‰§è¡Œä¹‹å‰ï¼Œä¹Ÿå°±æ˜¯daoä¸Šæ³¨è§£æ–¹æ³•è¢«è°ƒç”¨æ‰ä¼šè¿›è¡Œæ‰©å±•ã€‚</p> <ul><li>ä»æ³¨è§£æ‹¿åˆ°çš„å­—æ®µkeyåˆ¤ç©ºï¼Œè‹¥ä¸ºç©ºä»config<font color="red"><strong>(springå¯åŠ¨ä¼šç›´æ¥ä»ymlæ–‡ä»¶ä¸­è¯»å–è·¯ç”±ç»„ä»¶é…ç½®)</strong></font>æ ¹æ®é»˜è®¤keyè®¡ç®—è·¯ç”±</li> <li>é€šè¿‡åå°„ï¼Œæ‹¿åˆ°åˆ‡å…¥ç‚¹æ–¹æ³•çš„å®å‚â€”â€”&gt;æ ¹æ®å­—æ®µåfieldæ‹¿åˆ°å¯¹åº”çš„å€¼</li> <li>æ ¹æ®keyå€¼ä½¿ç”¨å“ˆå¸Œæ‰°ä¹±å‡½æ•°è¿›è¡Œæ•£åˆ—</li> <li>æ‰§è¡Œåˆ‡å…¥ç‚¹æ–¹æ³•</li> <li>æœ€åå…³é—­threadlocalé˜²æ­¢å†…å­˜æ³„éœ²</li></ul> <h4 id="æ›´æ¢æ•°æ®æº-åˆ†åº“åŸç†"><a href="#æ›´æ¢æ•°æ®æº-åˆ†åº“åŸç†" class="header-anchor">#</a> æ›´æ¢æ•°æ®æºï¼ˆåˆ†åº“åŸç†ï¼‰</h4> <ul><li>åŠ¨æ€æ•°æ®æºç±»DynamicDataSourceéœ€è¦ç»§æ‰¿<font color="red"><strong>AbstractRoutingDataSource</strong></font>ç±»ï¼Œå¹¶é‡å†™<strong>determineCurrentLookupKey</strong>æ–¹æ³•ã€‚</li> <li>æ‰€è°“æ•°æ®æºæœ¬è´¨å°±æ˜¯ä¸€ä¸ª<strong>ä¿å­˜æœ‰æ•°æ®åº“ä¿¡æ¯çš„Map</strong>ï¼Œå¤šæ•°æ®æºåˆ‡æ¢çš„æ ¸å¿ƒåœ¨äºï¼Œé€šè¿‡AbstractRoutingDataSourceåŠ¨æ€ç»‡å…¥ç¨‹åºã€‚é…ç½®çš„å¤šä¸ªæ•°æ®æºä¼šæ”¾åœ¨AbstractRoutingDataSourceçš„ <strong>targetDataSources</strong>å’Œ<strong>defaultTargetDataSource</strong>ä¸­ï¼Œé€šè¿‡<strong>afterPropertiesSet</strong>()æ–¹æ³•åˆ†åˆ«å¤åˆ¶åˆ°resolvedDataSourceså’ŒresolvedDefaultDataSourceä¸­ã€‚</li> <li><font color="red">æ¯æ¬¡æŸ¥è¯¢æ•°æ®åº“</font>ä¼šè°ƒç”¨AbstractRoutingDataSourceçš„getConnection()â€”â€”&gt;è°ƒç”¨determineTargetDataSource()æ–¹æ³•â€”â€”&gt;è°ƒç”¨<strong>determineCurrentLookupKey</strong>æ–¹æ³•è·å–æ•°æ®åº“çš„key(db_02)ï¼Œç„¶åä»<strong>resolvedDataSources</strong>ä¸­æ ¹æ®keyæ‹¿åˆ°è¯¥æ•°æ®åº“çš„æ•°æ®æºé…ç½®ï¼Œæœ€åæ ¹æ®è¯¥é…ç½®è·å–connectionã€‚</li> <li>å¦‚ä½•å®ç°æ”¹å†™æ•°æ®æºï¼šâ‘ é‡å†™determineCurrentLookupKeyæ–¹æ³•ï¼Œå¹¶ä»threadLocalä¸­å–å‡ºdbKeyè¿”å›ã€‚â‘¡é€šè¿‡é‡å†™setEnvironmentæ–¹æ³•ï¼ŒæŠŠymlé…ç½®çš„æ¯ä¸ªæ•°æ®æºéƒ½é…ç½®åˆ°Map&lt;dbKeyï¼Œæ•°æ®æº&gt;ä¸­â‘¢é€šè¿‡setæ–¹æ³•å°†Mapä¸­çš„æ•°æ®æºé…ç½®è®¾ç½®åˆ°AbstractRoutingDataSourceé‡Œçš„TargetDataSourceså’ŒDefaultTargetDataSourceå¯¹è±¡ã€‚</li></ul> <h4 id="åŠ¨æ€è·¯ç”±å¯¼è‡´äº‹åŠ¡é—®é¢˜"><a href="#åŠ¨æ€è·¯ç”±å¯¼è‡´äº‹åŠ¡é—®é¢˜" class="header-anchor">#</a> åŠ¨æ€è·¯ç”±å¯¼è‡´äº‹åŠ¡é—®é¢˜</h4> <p>ä¸åŒæ•°æ®æºä¸‹ä¼šå¯¼è‡´@Transactionalå¤±æ•ˆï¼Œå› ä¸ºæ•°æ®æ“ä½œä¸å±äºåŒä¸€ä¸ªæ•°æ®åº“ï¼Œå®é™…ä¸Šå±äºåˆ†å¸ƒå¼äº‹åŠ¡çš„é—®é¢˜ã€‚é‡å†™äº†AbstractRoutingDataSourceæ–¹æ³•åï¼Œåœ¨äº‹åŠ¡ä¸‹æ•°æ®æºæ˜¯åˆ‡æ¢ä¸äº†çš„ï¼Œéœ€è¦é‡å†™äº‹åŠ¡æ–¹æ³•ã€‚</p> <p>å› æ­¤é‡‡ç”¨<strong>æ‰‹åŠ¨è®¾ç½®è·¯ç”±+æ‰‹åŠ¨å¼€å¯äº‹åŠ¡</strong>ï¼Œ<strong>ä¿è¯åŒä¸€ä¸ªäº‹åŠ¡å†…è¿›è¡Œçš„æ˜¯åŒä¸€ä¸ªæ•°æ®åº“çš„æ“ä½œ</strong>ã€‚è¿™äº›éƒ¨åˆ†ä¸äº¤ç»™ç»„ä»¶çš„åˆ‡é¢ä½¿ç”¨å»åš(ä¸ä½¿ç”¨åˆ†åº“åˆ†è¡¨æ³¨è§£)ï¼Œè€Œæ˜¯é€šè¿‡è°ƒç”¨ç»„ä»¶æš´éœ²çš„è·¯ç”±æ¥å£**ï¼ŒæŠŠè®¡ç®—çš„è·¯ç”±ç´¢å¼•å­˜åˆ°ä¸Šä¸‹æ–‡å¯¹è±¡ç±»ï¼Œå½“æ‰§è¡Œsqlè¯­å¥è§¦å‘æ‹¦æˆªå™¨åä»ä¸Šä¸‹æ–‡ç±»å–å‡ºæ–°çš„è¡¨åå¹¶æ›´æ–°**ã€‚</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code>idbRouterStrategy<span class="token punctuation">.</span><span class="token function">doRouter</span><span class="token punctuation">(</span>partakeReq<span class="token punctuation">.</span><span class="token function">getuId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">return</span> transactionTemplate<span class="token punctuation">.</span><span class="token function">execute</span><span class="token punctuation">(</span>status<span class="token operator">-&gt;</span><span class="token punctuation">{</span>
    <span class="token keyword">try</span> <span class="token punctuation">{</span>
    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">DuplicateKeyException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        status<span class="token punctuation">.</span><span class="token function">setRollbackOnly</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token class-name">Result</span><span class="token punctuation">.</span><span class="token function">buildResult</span><span class="token punctuation">(</span><span class="token class-name">Constants<span class="token punctuation">.</span>ResponseCode</span><span class="token punctuation">.</span><span class="token constant">INDEX_DUP</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> <span class="token class-name">Result</span><span class="token punctuation">.</span><span class="token function">buildSuccessResult</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h4 id="å¾…è§£å†³é—®é¢˜"><a href="#å¾…è§£å†³é—®é¢˜" class="header-anchor">#</a> å¾…è§£å†³é—®é¢˜</h4> <p><strong>AbstractDataRoutingæ›¿ä»£é»˜è®¤æ•°æ®æºï¼Œå®ç°åŠ¨æ€å¤šæ•°æ®æºåˆ‡å…¥ã€‚</strong></p> <p>å°šæœªè§£å†³å¤šæ•°æ®æºé—®é¢˜ï¼Œæ¯”å¦‚hikariï¼Œæˆ–è€…Druidï¼Œä¸èƒ½ä½¿ç”¨æ•°æ®è¿æ¥æ± ã€‚</p> <h2 id="_12-meta-inf-spring-factoriesä¸springconfigé…ç½®ä¾èµ–"><a href="#_12-meta-inf-spring-factoriesä¸springconfigé…ç½®ä¾èµ–" class="header-anchor">#</a> 12.META-INF/spring.factoriesä¸springConfigé…ç½®ä¾èµ–</h2> <ul><li>spring.factories</li></ul> <p>SpringåŠ è½½æ—¶ä¼šå»META-INFæ–‡ä»¶å¤¹ä¸‹çš„<font color="red"><strong>spring.factories</strong></font>æ–‡ä»¶åŠ è½½æ‰«æ@Configurationæ³¨è§£çš„ç±»ï¼Œå¯¼å…¥æ—¶ä¼šæ‰«æå¤–éƒ¨JaråŒ…çš„Beanï¼Œå¹¶äº¤ç»™æœ¬åœ°é¡¹ç›®å®¹å™¨ç®¡ç†ï¼Œè¿™å°±æ˜¯<strong>springåŠ è½½ä»£ç æ ¹ç›®å½•ä¹‹å¤–çš„Beançš„æ–¹æ³•</strong>ã€‚å¦‚æœä¸åŠ é‚£ä¹ˆæ‰€å¯¼å…¥çš„jaråŒ…æ‰€æœ‰Beanéƒ½ä¼šåŠ è½½åˆ°æœ¬åœ°é¡¹ç›®çš„springå®¹å™¨ä¸­ï¼Œåœ¨æœ¬åœ°é¡¹ç›®è‡ªåŠ¨æ³¨å…¥å¤±è´¥ã€‚</p> <ul><li>Springè‡ªåŠ¨é…ç½®ä¾èµ–</li></ul> <p>spring-boot-configuration-processorï¼šå°†è‡ªå·±çš„é…ç½®ã€ä½ è‡ªå·±åˆ›å»ºçš„é…ç½®ç±»ã€ç”Ÿæˆå…ƒæ•°æ®ä¿¡æ¯ï¼Œä»è€Œåœ¨é…ç½®æ–‡ä»¶ä¸­(application.yml)å¯ä»¥æ–¹ä¾¿çš„æ˜¾ç¤ºçœ‹åˆ°é…ç½®çš„å±æ€§ã€‚</p> <p>spring-boot-autoconfigureï¼šè‡ªåŠ¨é…ç½®ï¼Œé»˜è®¤é…ç½®é¡¹</p> <h2 id="_13-configurationpropertieså’Œafterpropertiesset"><a href="#_13-configurationpropertieså’Œafterpropertiesset" class="header-anchor">#</a> 13.@ConfigurationPropertieså’ŒafterPropertiesSet()</h2> <ul><li>@ConfigurationProperties</li></ul> <p>@ConfigurationProperties(prefix = &quot;mybatis&quot;)ï¼šå¯ä»¥<strong>åœ¨å½“å‰æ³¨è§£ç±»å–åˆ°ymlé…ç½®çš„æ•°æ®(å½“å‰æ³¨è§£ç±»éœ€è¦æä¾›get,setæ–¹æ³•)</strong>ã€‚</p> <p><strong>@EnableConfigurationProperties(MyProperties.class)</strong>ï¼šæ³¨è§£ä¼š<strong>å°†é…ç½®å‚æ•°ç±»æ³¨å†Œåˆ°å®¹å™¨ä¸­</strong>ï¼Œç„¶ååœ¨å½“å‰æ³¨è§£ç±»å¯ä»¥ç›´æ¥é€šè¿‡å¯¹è±¡ä½¿ç”¨é…ç½®å‚æ•°ã€‚</p> <p>å…¶ä¸­prefixç»‘å®šå‰ç¼€å‘½åè§„èŒƒ:ä»…æ”¯æŒçº¯å°å†™å­—æ¯ã€æ•°å­—ã€ä¸‹åˆ’çº¿</p> <p>ä½œç”¨ï¼š<font color="red">å¯ä»¥åœ¨ymlä¸­å¡«å†™é…ç½®æ—¶ï¼Œæç¤ºå½“å‰ç»„ä»¶å¯ä»¥é…ç½®çš„å˜é‡å</font>ã€‚</p> <ul><li>afterPropertiesSet</li></ul> <p>åœ¨springçš„beançš„ç”Ÿå‘½å‘¨æœŸä¸­ï¼Œå®ä¾‹åŒ–-&gt;ç”Ÿæˆå¯¹è±¡-&gt;å±æ€§å¡«å……åä¼šè¿›è¡ŒafterPropertiesSetæ–¹æ³•ã€‚</p> <h2 id="_14-staticå’Œfinal"><a href="#_14-staticå’Œfinal" class="header-anchor">#</a> 14.staticå’Œfinal</h2> <p>staticé™æ€æ–¹æ³•éœ€è¦é€šè¿‡ç±»åè°ƒç”¨ï¼Œstaticçš„æ•°æ®å’Œä»£ç å—ä¼šåœ¨jvmä¸­å­˜æ”¾åœ¨æ–¹æ³•åŒºã€‚è€Œç±»å¯¹è±¡ä¼šä¿å­˜åœ¨å †ä¸­ã€‚</p> <p>finalä¿®æ”¹çš„å˜é‡å¯ä»¥é€šè¿‡åå°„ä¿®æ”¹å˜é‡å€¼ã€‚</p> <p>stream()map()å—å†…ä¸èƒ½ç”¨å¤–éƒ¨å˜é‡ï¼Œåªèƒ½ç”¨finalã€‚</p> <p>BeanUtils.getProperty(bean,attr)ï¼šè·å–beanå¯¹è±¡çš„attrå±æ€§å­—æ®µå€¼ã€‚</p> <h2 id="_15-mybatisé©¼å³°ä¸lombok"><a href="#_15-mybatisé©¼å³°ä¸lombok" class="header-anchor">#</a> 15.Mybatisé©¼å³°ä¸lombok</h2> <ul><li><strong>Mybatisä¸­çš„é…ç½®æ–‡ä»¶åªèƒ½æŒ‡å®šä¸€ä»½</strong>ï¼Œè¦ä¹ˆåœ¨springçš„ymlä¸­configurationä¸‹æ·»åŠ æ‰€æœ‰çš„é…ç½®ï¼Œè¦ä¹ˆåœ¨èµ„æºæ–‡ä»¶ä¸‹åˆ›å»ºmybatis-config.xmlæ–‡ä»¶ï¼Œæ‰€æœ‰é…ç½®æ·»åŠ é‡Œé¢ï¼Œå¹¶ç”¨config-locationæŒ‡æ˜ä½ç½®ã€‚å¦åˆ™ä¼šæŠ¥é”™</li> <li><strong>uIdå­—æ®µä½¿ç”¨lombok@Dataæ³¨è§£åï¼Œmybatiså¼€å¯é©¼å³°å¯¼è‡´æ•°æ®åº“æ¥æ”¶ä¸åˆ°æ•°æ®</strong>ã€‚åŸå› æ˜¯å½“ä½¿ç”¨@Dataæ³¨è§£æ—¶ï¼Œè‡ªåŠ¨ç”Ÿæˆçš„setter,getteræ–¹æ³•ä¸ºgetUIdï¼Œä¸ç¬¦åˆjavaBeanè§„èŒƒã€‚ è§£å†³æ–¹æ³•æ˜¯<strong>é‡åˆ°ç¬¬äºŒä¸ªå­—æ¯å¤§å†™çš„å­—æ®µä¸€å®šè¦é‡å†™getter,setteræ–¹æ³•</strong>ã€‚</li></ul> <h2 id="_16-æŠ¥åæ´»åŠ¨"><a href="#_16-æŠ¥åæ´»åŠ¨" class="header-anchor">#</a> 16.æŠ¥åæ´»åŠ¨</h2> <ul><li>ä¸šåŠ¡åœºæ™¯</li></ul> <p>æŠ¥åæ´»åŠ¨ä½¿ç”¨æ¨¡æ¿æ¨¡å¼å®ç°ã€‚æŠ½è±¡ç±»ä¸­å®šä¹‰æ•´ä¸ªæŠ¥åæ´»åŠ¨æ‰§è¡Œæµç¨‹å’Œé¡ºåºï¼š</p> <p>â‘ æŸ¥è¯¢æ˜¯å¦å­˜åœ¨æŠ¥äº†åä½†æ˜¯æœªæŠ½å¥–çš„è®°å½•ï¼ˆå½“å‰å†æ¬¡æŠ¥åæ´»åŠ¨å°±æ˜¯åœ¨åˆ·å•ï¼‰</p> <p>â‘¡è·å–æ´»åŠ¨è´¦å•,å¹¶å°†æ´»åŠ¨æŠ¥åæ•°é‡æ’å…¥ç¼“å­˜å½“ä¸­</p> <p>â‘¢æ´»åŠ¨ä¿¡æ¯æ ¡éªŒï¼šåŒ…æ‹¬æ—¥æœŸæ ¡éªŒï¼Œåº“å­˜æ ¡éªŒï¼ŒçŠ¶æ€æ ¡éªŒã€‚</p> <p>â‘£æ‰£å‡æ´»åŠ¨åº“å­˜ï¼šå¯ä»¥æ ¹æ®ä¸åŒæ´»åŠ¨æ‰§è¡Œä¸åŒçš„æ‰£å‡ç­–ç•¥ï¼Œæ— é™æ¬¡æ•°æˆ–è€…æ˜¯é™æ¬¡æ•°ã€‚</p> <p>â‘¤æ·»åŠ ä¸ªäººæŠ¥åè®°å½•</p> <p>å…¶ä¸­æ´»åŠ¨ä¿¡æ¯æ ¡éªŒå¤„ç†ã€æ‰£å‡æ´»åŠ¨åº“å­˜ã€æ·»åŠ ä¸ªäººæŠ¥åè®°å½•æŠ½è±¡å‡ºæ¥äº¤ç»™å­ç±»å®ç°ã€‚</p> <h2 id="_17-ç»„åˆæ¨¡å¼-å†³ç­–æ ‘"><a href="#_17-ç»„åˆæ¨¡å¼-å†³ç­–æ ‘" class="header-anchor">#</a> 17.ç»„åˆæ¨¡å¼&amp;å†³ç­–æ ‘</h2> <h4 id="ç»„åˆæ¨¡å¼"><a href="#ç»„åˆæ¨¡å¼" class="header-anchor">#</a> ç»„åˆæ¨¡å¼</h4> <ul><li>ä¸šåŠ¡åœºæ™¯</li></ul> <p>æŠ¥åæ´»åŠ¨æ—¶é™¤äº†ç”¨æˆ·ç›´æ¥æŒ‡å®šç‰¹å®šçš„æ´»åŠ¨ä¹‹å¤–ï¼Œè¿˜å¯ä»¥ä½¿ç”¨<strong>å†³ç­–æ ‘</strong>æ ¹æ®ç”¨æˆ·ä¿¡æ¯æ¥å†³ç­–å‡ºæœ€åˆé€‚çš„æ´»åŠ¨IDï¼Œä»¥å‡å°‘æ´»åŠ¨æˆæœ¬ã€‚</p> <p>é‡åˆ°æµç¨‹æ§åˆ¶(ç±»ä¼¼äºä¸šåŠ¡åŠç†æµç¨‹ã€ç®€å†é¢è¯•æµç¨‹)ã€æ¡ä»¶ç­›é€‰ã€å¤šå±‚çº§æ ‘å½¢èœå•åŠ è½½ç­‰ç­‰éƒ½å¯ä»¥è€ƒè™‘ä½¿ç”¨å†³ç­–æ ‘ã€‚</p> <ul><li>ç»„åˆæ¨¡å¼</li></ul> <p>ç»„åˆæ¨¡å¼ï¼šå¯¹è±¡å…·æœ‰éƒ¨åˆ†-æ•´ä½“çš„å±‚æ¬¡ç»“æ„å¯ä»¥ä½¿ç”¨ç»„åˆæ¨¡å¼(ä¹¦ç±-ç›®å½•ï¼Œå­èŠ‚ç‚¹-éå¶å­èŠ‚ç‚¹)ã€‚å®ç°çš„å…³é”®ç‚¹åœ¨äº<strong>ç»„åˆå¯¹è±¡</strong>(ç›®å½•ï¼Œéå¶å­èŠ‚ç‚¹)éœ€è¦ç»´æŠ¤ä¸€ä¸ª<strong>å•ä¸ªå¯¹è±¡çš„é›†åˆ</strong>ã€‚è€Œå…·ä½“å¦‚ä½•ä½¿ç”¨ç»„åˆæ¨¡å¼ç»Ÿä¸€æ“ä½œç»„åˆå¯¹è±¡ä¸å•ä¸ªå¯¹è±¡ï¼Œæœ‰å‡ ç§è®¾è®¡ï¼š</p> <p>â‘ é€šè¿‡ç±»é‡Œçš„typeå­—æ®µæ¥æ ‡è¯†èŠ‚ç‚¹ç±»å‹</p> <p>â‘¡å¦‚æœèŠ‚ç‚¹ä¹‹é—´è¿˜éœ€è¦æ§åˆ¶ä¸åŒçš„è¡Œä¸ºï¼Œå¯ä»¥ç»§æ‰¿æŠ½è±¡çˆ¶ç±»ï¼Œç„¶ååœ¨<strong>å®ç°ç±»é‡Œé¢ç»´æŠ¤ä¸åŒç±»å‹å¯¹è±¡çš„æ ‡è¯†å­—æ®µ</strong>ã€‚å¤–éƒ¨è°ƒç”¨æ—¶åªéœ€è¦æ“ä½œæŠ½è±¡æ¥å£,<strong>é€šè¿‡æ¥å£å®ç°çš„getã€setæ–¹æ³•æš´æ¼ä¸åŒèŠ‚ç‚¹ç±»å‹çš„å±æ€§</strong>ã€‚</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TreeNodeVO</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">Long</span> treeId<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">Long</span> treeNodeId<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">Integer</span> nodeType<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> ruleKey<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> ruleDesc<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> nodeValue<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">TreeNodeLineVO</span><span class="token punctuation">&gt;</span></span> treeNodeLineVOList<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h4 id="å†³ç­–æ ‘"><a href="#å†³ç­–æ ‘" class="header-anchor">#</a> å†³ç­–æ ‘</h4> <ul><li>VOå¯¹è±¡è®¾è®¡</li></ul> <p>æ ‘èŠ‚ç‚¹ï¼š<strong>éå¶å­èŠ‚ç‚¹</strong>åŒ…å«å†³ç­–å­—æ®µç±»å‹(å¹´é¾„ï¼Œæ€§åˆ«...)ã€å­èŠ‚ç‚¹é“¾è·¯é›†åˆã€‚è€Œ<strong>å¶å­èŠ‚ç‚¹çš„èŠ‚ç‚¹å€¼ä¿å­˜çš„æ˜¯æ´»åŠ¨ID</strong>ã€‚</p> <p>é“¾è·¯èŠ‚ç‚¹(è¾¹èŠ‚ç‚¹)ï¼šå¤´èŠ‚ç‚¹ã€å°¾èŠ‚ç‚¹ã€å†³ç­–æ¯”è¾ƒç±»å‹(å¤§äºï¼Œå°äºï¼Œç­‰äº)ï¼Œ<strong>è¾¹çš„å†³ç­–å€¼</strong></p> <ul><li>è¿‡æ»¤å†³ç­–</li></ul> <p>é¦–å…ˆæ˜ç¡®ä¸€ç‚¹ï¼Œ<font color="red"><strong>è¿›è¡Œå†³ç­–çš„æ ‘èŠ‚ç‚¹ä¸ä¿å­˜æœ‰å†³ç­–å€¼ï¼Œæ‰€æœ‰éå¶å­èŠ‚ç‚¹çš„å†³ç­–å€¼éƒ½æ˜¯ä»ä¸€ä¸ªæ ¹æ®ç”¨æˆ·ä¿¡æ¯å°è£…æˆçš„Map&lt;Type,value&gt;å¾—åˆ°ï¼Œæ ¹æ®éå¶å­èŠ‚ç‚¹çš„å†³ç­–å­—æ®µæ¥ä»Mapå–å‡ºå†³ç­–å€¼</strong></font>ã€‚</p> <p>æ¯ä¸€æ¡é“¾è·¯è¿›è¡Œå†³ç­–è¿‡æ»¤æ—¶ï¼Œæ ¹æ®å½“å‰èŠ‚ç‚¹çš„å†³ç­–å€¼ã€è¾¹èŠ‚ç‚¹æ¯”è¾ƒç±»å‹ã€è¾¹ç•Œç‚¹å†³ç­–å€¼æ¥è¿›è¡Œåˆ¤æ–­ï¼Œä»è€Œå†³ç­–å‡ºç¬¦åˆæ¡ä»¶çš„ä¸€æ¡é“¾è·¯ï¼Œè·å–ä¸‹ä¸€æ­¥è¦èµ°çš„èŠ‚ç‚¹IDã€‚æœ€ç»ˆåˆ°è¾¾æ ‘çš„å¶å­èŠ‚ç‚¹åå†³ç­–å‡ºæ´»åŠ¨IDã€‚</p> <p>è¿™é‡Œå®šä¹‰äº†è¾¹èŠ‚ç‚¹æ¯”è¾ƒç±»å‹çš„å¸¸é‡ï¼Œ<strong>å¤§äºã€å°äºç­‰æ¯”è¾ƒè§„åˆ™åœ¨æ•°æ®åº“ä¸­ä¿å­˜ä¸ºintå€¼</strong>ã€‚</p> <ul><li>å°è£…å†³ç­–å™¨å’Œå†³ç­–æœåŠ¡</li></ul> <p>ä½¿ç”¨<font color="red">å·¥å‚æ¨¡å¼+ç­–ç•¥æ¨¡å¼å®ç°ä¸åŒè§„åˆ™çš„å†³ç­–å™¨</font>ã€‚é¦–å…ˆå·¥å‚logicFilterMapä¼šæ ¹æ®ä¸åŒçš„èŠ‚ç‚¹ç±»å‹å–å‡ºå†³ç­–å™¨ï¼Œä¸åŒçš„å†³ç­–å™¨ä¼šæ ¹æ®<strong>å†³ç­–å™¨ç±»å‹</strong>ä»è¯·æ±‚å¯¹è±¡ä¸­å°è£…çš„ç”¨æˆ·ä¿¡æ¯Mapå–å‡ºå¯¹åº”å­—æ®µçš„å†³ç­–å€¼,å¹¶è¿›è¡Œè¿‡æ»¤å†³ç­–ã€‚</p> <p><img src="https://jsd.cdn.zzko.cn/gh/blage-coding/picx-images-hosting@master/20230515/image-20230406103439028.5fvil1uo5t80.webp" alt="image-20230406103439028"></p> <p>å†³ç­–æœåŠ¡åˆ™æ§åˆ¶æ•´ä¸ªæµç¨‹ï¼ŒåŒ…æ‹¬è·å–æ‰€æœ‰å†³ç­–æ ‘çš„èŠ‚ç‚¹ä¿¡æ¯â€”â€”&gt;éå†æ•´ä¸ªæ ‘èŠ‚ç‚¹è¿›è¡Œå†³ç­–â€”â€”&gt;åŒ…è£…å“åº”å¯¹è±¡.</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token class-name">Constants<span class="token punctuation">.</span>NodeType</span><span class="token punctuation">.</span><span class="token constant">STEM</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>treeNodeVO<span class="token punctuation">.</span><span class="token function">getNodeType</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">/** è·å–å½“å‰å†³ç­–èŠ‚ç‚¹çš„å­æ ‘èŒ */</span>
    <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">TreeNodeLineVO</span><span class="token punctuation">&gt;</span></span> treeNodeLineVOList <span class="token operator">=</span> treeNodeVO<span class="token punctuation">.</span><span class="token function">getTreeNodeLineVOList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">String</span> ruleKey <span class="token operator">=</span> treeNodeVO<span class="token punctuation">.</span><span class="token function">getRuleKey</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">/** æ ¹æ®å½“å‰å†³ç­–å­—æ®µæ‹¿åˆ°å†³ç­–å™¨ */</span>
    <span class="token class-name">LogicFilter</span> logicFilter <span class="token operator">=</span> logicFilterMap<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>ruleKey<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">String</span> matterValue <span class="token operator">=</span> logicFilter<span class="token punctuation">.</span><span class="token function">matterValue</span><span class="token punctuation">(</span>req<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">Long</span> childId <span class="token operator">=</span> logicFilter<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span>matterValue<span class="token punctuation">,</span> treeNodeLineVOList<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">/** æ ¡éªŒæ˜¯å¦å†³ç­–å‡ºç»“æœ */</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token class-name">Constants<span class="token punctuation">.</span>Global</span><span class="token punctuation">.</span><span class="token constant">TREE_NULL_NODE</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>childId<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    treeNodeVO <span class="token operator">=</span> treeNodeMap<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>childId<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><h2 id="_18-é—¨é¢æ¨¡å¼"><a href="#_18-é—¨é¢æ¨¡å¼" class="header-anchor">#</a> 18.é—¨é¢æ¨¡å¼</h2> <ul><li>ä¸šåŠ¡åœºæ™¯</li></ul> <p>åœ¨RPCè°ƒç”¨æ—¶å¯ä»¥ä¸æš´éœ²åº”ç”¨å±‚æ¥å£ï¼Œä¾¿äºå¤–ç³»ç»Ÿè°ƒç”¨ã€‚ä¸æš´éœ²å­ç³»ç»Ÿä¹‹é—´çš„æ¨¡å—äº¤äº’ä¸å®ç°ï¼Œ<strong>å®ç°å®¢æˆ·ç«¯å’Œå­ç³»ç»Ÿä¹‹é—´è§£è€¦</strong>ã€‚</p> <p>æ‰§è¡ŒæŠ½å¥–å°è£…ä¸€ä¸ªé—¨é¢ï¼Œå…¶ä¸­åŒ…æ‹¬äº†å­ç³»ç»Ÿæ´»åŠ¨é¢†å–ã€æ ¹æ®ç­–ç•¥ç®—æ³•æŠ½å¥–ã€ç»“æœç”Ÿæˆè®¢å•è½åº“çš„ç»„åˆè°ƒç”¨ï¼Œå®¢æˆ·ç«¯ä¸éœ€è¦å…³å¿ƒå­ç³»ç»Ÿä¹‹é—´çš„ç»„åˆå’Œä¸åŒæœåŠ¡è¯·æ±‚çš„å°è£…ã€‚</p> <h2 id="_19-mapstruct"><a href="#_19-mapstruct" class="header-anchor">#</a> 19.MapStruct</h2> <h4 id="æ€§èƒ½æ¯”è¾ƒ"><a href="#æ€§èƒ½æ¯”è¾ƒ" class="header-anchor">#</a> æ€§èƒ½æ¯”è¾ƒ</h4> <p>æ‰§è¡Œæ€§èƒ½ä¸Šget/set&gt;MapStruct&gt;BeanUtils</p> <p>Javaç¨‹åºæ‰§è¡Œçš„è¿‡ç¨‹ï¼Œæ˜¯ç”±ç¼–è¯‘å™¨å…ˆæŠŠjavaæ–‡ä»¶ç¼–è¯‘æˆclasså­—èŠ‚ç æ–‡ä»¶ï¼Œç„¶åç”±JVMå»è§£é‡Šæ‰§è¡Œclassæ–‡ä»¶ã€‚Mapstructæ­£æ˜¯åœ¨javaæ–‡ä»¶åˆ°classè¿™ä¸€æ­¥å¸®æˆ‘ä»¬å®ç°äº†è½¬æ¢æ–¹æ³•ï¼Œå³åšäº†é¢„å¤„ç†ï¼Œæå‰ç¼–è¯‘å¥½æ–‡ä»¶ã€‚</p> <p><strong>IMapping</strong>æ³¨å…¥çˆ†çº¢ã€‚ä»£ç æ²¡æ‰§è¡Œä¹‹å‰è‡ªåŠ¨æ³¨å…¥è¯¥è½¬æ¢å™¨æ¥å£IDEAä¼šå‡ºç°çº¢çº¿æç¤ºï¼Œä½†æ˜¯è¿è¡Œå¯ä»¥é€šè¿‡ï¼ŒåŸå› å°±æ˜¯åœ¨äºè¯¥æ ‡ç­¾å¯ä»¥åŠ¨æ€çš„å®ŒæˆDTO-DOä¹‹é—´çš„è½¬æ¢ï¼Œä¼šåœ¨<strong>target</strong>åŒ…ä¸­ç”Ÿæˆå¯¹åº”çš„å®ç°ç±»ã€‚</p> <h4 id="æ³¨è§£ä½¿ç”¨"><a href="#æ³¨è§£ä½¿ç”¨" class="header-anchor">#</a> æ³¨è§£ä½¿ç”¨</h4> <ul><li>@Mapping</li></ul> <p>é€šè¿‡sourceå’Œtargeté…ç½®ä¸åŒå­—æ®µåç§°ä¹‹é—´çš„èµ‹å€¼ã€‚åŒåå±æ€§ä¸éœ€è¦æŒ‡å®šsourceå’Œtargetï¼Œå¯ä»¥ä¸é€‚ç”¨è¯¥æ³¨è§£ã€‚</p> <p>å½“æºå’Œç›®çš„æŸä¸€è¾¹ç¼ºå°‘æŸä¸ªå±æ€§æ—¶ï¼Œè½¬æ¢æ—¶å¯ä»¥é€šè¿‡æŒ‡å®š@Mappingé‡Œçš„constantæˆ–è€…defaultValueç»™å¦ä¸€è¾¹èµ‹å€¼ã€‚</p> <p>æºå’Œç›®çš„çš„å±æ€§æ ¼å¼ä¸ä¸€è‡´(ç±»å‹ä¸€æ ·)æ—¶ï¼Œå¯ä»¥æŒ‡å®šdateFormatç»™ç›®çš„å±æ€§å€¼è½¬æ¢ä¸ºç‰¹å®šçš„æ ¼å¼ï¼Œå¦‚@Mapping(target = &quot;createTime&quot;, dateFormat = &quot;yyyy-MM-dd HH:mm:ss&quot;)ã€‚</p> <p>æºå’Œç›®çš„å­˜åœ¨æŸä¸ªå±æ€§ç±»å‹ä¸ä¸€è‡´æ—¶ï¼Œå¯ä»¥é€šè¿‡expressionæŒ‡å®šç±»ï¼Œæˆ–è€…å®ç°è½¬æ¢å™¨ç±»ï¼Œç„¶ååœ¨Mapperä¸­usesæŒ‡å®šä½¿ç”¨ã€‚</p> <ul><li>Mapper</li></ul> <p>componentModelï¼šæŒ‡å®šå½“å‰æ¥å£ç”Ÿæˆçš„å®ç°ç±»çš„ç»„ä»¶ç±»å‹ã€‚å¦‚æœæŒ‡å®šæ˜¯springï¼Œå¦‚æœæŒ‡å®šæ˜¯springï¼Œä¼šè‡ªåŠ¨ç»™å½“å‰å®ç°ç±»æ³¨è§£@Componentã€‚</p> <p>unmappedTargetPolicy = ReportingPolicy.IGNOREï¼š<strong>å¿½ç•¥å¤šä¸ªæ˜ å°„å™¨ä¸­</strong>æœªæ˜ å°„çš„å±æ€§ï¼Œä¹Ÿå°±æ˜¯æ˜ å°„çš„æºæˆ–è€…ç›®æ ‡ç±»æ²¡æœ‰æŸä¸ªå±æ€§æ—¶ï¼Œå¿½ç•¥è¯¥é”™è¯¯ã€‚</p> <ul><li>@InheritConfiguration</li></ul> <p>å½“ä¸¤ä¸ªæ–¹æ³•çš„æ˜ å°„å™¨é…ç½®ç›¸åŒæ—¶ï¼Œå¯ä»¥ä½¿ç”¨è¯¥æ³¨è§£ï¼ŒMapStructä¼šæ£€ç´¢å…¶å®ƒçš„å·²é…ç½®æ–¹æ³•å¹¶ç”¨äºå½“å‰æ–¹æ³•çš„æ³¨è§£é…ç½®ã€‚<strong>ä¿è¯ç›¸åŒé…ç½®å™¨åªæœ‰ä¸€ä¸ª</strong>ã€‚</p> <ul><li>@mappingconfig</li></ul> <p>å…±äº«é…ç½®ï¼Œå¯ä»¥é€šè¿‡ç»§æ‰¿æˆ–è€…æ˜¯æŒ‡å®šmapper config=?ä½¿ç”¨</p> <h4 id="å®ç°è½¬æ¢å™¨"><a href="#å®ç°è½¬æ¢å™¨" class="header-anchor">#</a> å®ç°è½¬æ¢å™¨</h4> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Mapper</span><span class="token punctuation">(</span>componentModel <span class="token operator">=</span> <span class="token string">&quot;spring&quot;</span><span class="token punctuation">,</span> unmappedTargetPolicy <span class="token operator">=</span> <span class="token class-name">ReportingPolicy</span><span class="token punctuation">.</span><span class="token constant">IGNORE</span><span class="token punctuation">,</span> unmappedSourcePolicy <span class="token operator">=</span> <span class="token class-name">ReportingPolicy</span><span class="token punctuation">.</span><span class="token constant">IGNORE</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">AwardMapping</span> <span class="token keyword">extends</span> <span class="token class-name">IMapping</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">DrawAwardVO</span><span class="token punctuation">,</span> <span class="token class-name">AwardDTO</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Mapping</span><span class="token punctuation">(</span>target <span class="token operator">=</span> <span class="token string">&quot;userId&quot;</span><span class="token punctuation">,</span> source <span class="token operator">=</span> <span class="token string">&quot;uId&quot;</span><span class="token punctuation">)</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token class-name">AwardDTO</span> <span class="token function">sourceToTarget</span><span class="token punctuation">(</span><span class="token class-name">DrawAwardVO</span> var1<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token class-name">DrawAwardVO</span> <span class="token function">targetToSource</span><span class="token punctuation">(</span><span class="token class-name">AwardDTO</span> var1<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h2 id="_20-kafkaæµé‡å‰Šå³°"><a href="#_20-kafkaæµé‡å‰Šå³°" class="header-anchor">#</a> 20.kafkaæµé‡å‰Šå³°</h2> <ul><li>ä¸­å¥–åå¼‚æ­¥æ¶ˆæ¯å‘å¥–</li></ul> <p>åœ¨å¼‚æ­¥å‘å¥–æ¶ˆè´¹åœºæ™¯ä¸­,ä¸­å¥–è½åº“å(user_strategy_exportè¡¨æ’å…¥è®¢å•æ•°æ®ï¼Œä½†æˆå¥–ä½è¿˜ä¸º0)ï¼Œç”Ÿäº§è€…é€šè¿‡MQæ¨é€<strong>å‘å¥–é€šçŸ¥</strong>ï¼Œæ¶ˆè´¹è€…æ”¶åˆ°åä¿®æ”¹æˆå¥–çŠ¶æ€ä½ã€‚ä»è€Œå®ç°è§£è€¦å‰Šå³°ï¼Œç”¨æˆ·åªå…³æ³¨æŠ½å¥–ç»“æœï¼Œè€Œåç»­å…¶å®ƒè¿‡ç¨‹éƒ½å¯ä»¥äº¤ç»™MQå¼‚æ­¥å¤„ç†ã€‚</p> <p><strong>æ•°æ®åº“è¡¨è®¾è®¡ä¸Šç»™exportè®¢å•è¡¨è®¾ç½®äº†MQæ¶ˆæ¯å‘é€çŠ¶æ€</strong>ï¼Œ<strong>æ ¹æ®ç”Ÿäº§è€…å‘é€æ¶ˆæ¯åçš„å›è°ƒçŠ¶æ€æ¥ä¿®æ”¹æ¶ˆæ¯å‘é€çŠ¶æ€</strong>ï¼Œå¯¹äºå‘é€å¤±è´¥æ¶ˆæ¯çš„é‡‡ç”¨å®šæ—¶ä»»åŠ¡è¡¥å¿(è¿™é‡Œå¦‚æœæ¶ˆæ¯çŠ¶æ€ä¿®æ”¹å¤±è´¥ä¹Ÿä¸ä¼šæœ‰å½±å“ï¼Œæœ€ç»ˆåªéœ€è¦åˆ¤æ–­æˆåŠŸcodeç )ï¼Œä¿è¯äº†<font color="red"><strong>ç”Ÿäº§è€…åˆ°brokerä¹‹é—´çš„é«˜å¯ç”¨</strong></font>ã€‚</p> <p>æ¶ˆè´¹è€…æ¶ˆè´¹å¤±è´¥ï¼Œå¯ä»¥é€šè¿‡<strong>offsetåç§»é‡æœºåˆ¶</strong>(åªæœ‰æ¶ˆè´¹æˆåŠŸæ‰æäº¤)+<strong>æŒ‡å®šauto-offset-reset</strong>+<strong>æ‰‹åŠ¨æäº¤åç§»é‡(æ‰§è¡Œack.acknowledge</strong>())è¯¸å¤šæœºåˆ¶æ¥ä¿è¯<font color="red"><strong>æ¶ˆè´¹è€…ä¸brokerä¹‹é—´çš„é«˜å¯ç”¨</strong></font>ã€‚å…¶ä¸­æŸäº›æœºåˆ¶å¯èƒ½å¯¼è‡´é‡å¤æ¶ˆè´¹(earliest)ï¼Œå› æ­¤éœ€è¦ä¿è¯<strong>æ¶ˆè´¹å¹‚ç­‰æ€§</strong>ã€‚</p> <ul><li>æŠ¥åæ´»åŠ¨æˆåŠŸåå¼‚æ­¥æ‰£å‡æ´»åŠ¨åº“å­˜</li></ul> <p>åŸæœ¬æ´»åŠ¨åº“å­˜æ‰£å‡ä½¿ç”¨æ•°æ®åº“è¡Œçº§é”(ä¹è§‚é”)å¤„ç†æ‰£å‡ï¼Œä½†æ˜¯å­˜åœ¨å¹¶å‘é—®é¢˜ï¼Œå¦‚æœåº“å­˜ä¸º1æ—¶ï¼Œä¸¤ä¸ªç”¨æˆ·åŒæ—¶éƒ½æŸ¥å‡ºåº“å­˜éƒ½å¤§äº0ï¼Œé‚£ä¹ˆå®ƒä»¬éƒ½å¯ä»¥æ‰§è¡Œæ›´æ–°æ“ä½œï¼Œå¯¼è‡´åº“å­˜ä¸ºè´Ÿæ•°ã€‚</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">UPDATE</span> activity <span class="token keyword">SET</span> stock_surplus_count <span class="token operator">=</span> stock_surplus_count <span class="token operator">-</span> <span class="token number">1</span>
<span class="token keyword">WHERE</span> activity_id <span class="token operator">=</span> <span class="token comment">#{activityId} AND stock_surplus_count &gt; 0</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>é€šè¿‡redisæ´»åŠ¨åº“å­˜æŠ¥åå®Œæ´»åŠ¨åï¼Œä½¿ç”¨MQå‘é€æ¶ˆæ¯å¼‚æ­¥æ›´æ–°æ•°æ®åº“æ´»åŠ¨åº“å­˜ï¼Œåšæ•°æ®æœ€ç»ˆä¸€è‡´æ€§å¤„ç†ã€‚</p> <h2 id="_21-xxl-jobå®æ—¶ä»»åŠ¡"><a href="#_21-xxl-jobå®æ—¶ä»»åŠ¡" class="header-anchor">#</a> 21.xxl-jobå®æ—¶ä»»åŠ¡</h2> <p>åœ¨ä½¿ç”¨ä¸Šxxl-jobæ›´å¤šé€‚ç”¨äºå¯¹<strong>å®æ—¶æ€§</strong>æœ‰è¦æ±‚çš„å®šæ—¶ä»»åŠ¡ï¼Œæˆ–è€…æ˜¯åœ¨è·¨æœåŠ¡æˆ–è€…æ˜¯è·¨ä¸šåŠ¡ç›¸äº’è°ƒç”¨çš„åœºæ™¯ä¸‹ä¿è¯æ•´ä¸ªç³»ç»Ÿçš„é«˜å¯ç”¨(feignã€dubboç­‰å› ä¸ºç½‘ç»œæ³¢åŠ¨è°ƒç”¨å¤±è´¥ï¼Œå›è°ƒé€šçŸ¥åä½¿ç”¨xxljobè¿›è¡Œè¡¥å¿).</p> <ul><li>åº”ç”¨åœºæ™¯1</li></ul> <p>æ‰«ææŠ½å¥–æ´»åŠ¨çŠ¶æ€ã€‚åœ¨ç§’æ€æ´»åŠ¨å¼€å§‹ä¹‹å‰ï¼Œæ ¹æ®å½“å‰æ—¶é—´å’Œæ´»åŠ¨å¼€å§‹æ—¶é—´çš„æ—¶ç©ºå…³ç³»ï¼Œè°ƒç”¨çŠ¶æ€æµè½¬æœåŠ¡ï¼Œå®¡æ ¸é€šè¿‡çš„æ´»åŠ¨çŠ¶æ€æ‰«æåä¿®æ”¹ä¸ºä¸ºæ´»åŠ¨ä¸­ã€‚é€šè¿‡æŠŠå·²è¿‡æœŸæ´»åŠ¨ä¸­çš„çŠ¶æ€æ‰«æä¸ºå…³é—­ã€‚</p> <ul><li>åº”ç”¨åœºæ™¯2</li></ul> <p>MQæ¶ˆæ¯è¡¥å¿ä¸šåŠ¡ã€‚å¯¹å‰é¢MQå‘é€å‘å¥–æ¶ˆæ¯å¤±è´¥çš„æƒ…å†µï¼Œé¦–å…ˆæ‰«æå‡ºæ¶ˆæ¯å‘é€å¤±è´¥çš„è®¢å•ï¼ŒåŒ…æ‹¬æ¶ˆæ¯å‘é€å¤±è´¥(state=2)å’Œè¿Ÿè¿Ÿæ²¡æœ‰å‘é€æ¶ˆæ¯çš„æƒ…å†µ(state=0)ï¼Œç„¶åå†é€šè¿‡å®šæ—¶ä»»åŠ¡è¿›è¡Œè¡¥å¿é‡æ–°å‘é€æ¶ˆæ¯ã€‚</p> <p>å…¶ä¸­ç”±äºéœ€è¦é€šè¿‡æ‰«ææ‰€æœ‰æ•°æ®åº“æ¥æ‰¾å‡ºå‘é€å¤±è´¥çš„æ¶ˆæ¯ï¼Œå› æ­¤éœ€è¦<strong>å¾ªç¯çš„æ–¹å¼æŠŠæ¯ä¸ªåº“ä¸‹çš„å¤šå¼ è¡¨ä¸­çš„æ¯æ¡ç”¨æˆ·è®°å½•éƒ½è¿›è¡Œæ‰«æ</strong>ã€‚æ‰€ä»¥éœ€è¦åœ¨åˆ†åº“åˆ†è¡¨ç»„ä»¶ä¸­ï¼Œ<strong>æä¾›å‡ºå¯ä»¥è®¾ç½®è·¯ç”±åˆ°çš„åº“å’Œè¡¨</strong>ã€‚</p> <p>ä¸¤ç§åšæ³•ï¼Œä¸€ç§æ˜¯ç›´æ¥åœ¨xxl-jobä»»åŠ¡é…ç½®æ—¶åœ¨ä»»åŠ¡å‚æ•°æŒ‡å®šéœ€è¦æ‰«æçš„æ•°æ®åº“ç¼–å·ã€‚å¦ä¸€ç§åˆ™æ˜¯é€šè¿‡IDBRouterStrategyçš„Beanå¯¹è±¡å®ç°ï¼Œä»ç±»é‡Œé¢çš„dbConfigä¸­æ‹¿åˆ°<strong>springé…</strong>ç½®åˆ†åº“åˆ†è¡¨çš„æ•°é‡ã€‚æœ€åå¾ªç¯è®¾ç½®DBContextHolderçš„åº“è¡¨ç´¢å¼•å³å¯ã€‚</p> <p><strong>æ ¹æ®MQå‘é€æ¶ˆæ¯çš„å›è°ƒçŠ¶æ€ï¼Œä¿®æ”¹MQçŠ¶æ€(ä¸ä¿®æ”¹åˆ™ä¼šé‡å¤è¡¥å¿å·²ç»æˆåŠŸMQæ¶ˆæ¯)</strong>ã€‚</p> <h2 id="_22-redisæ»‘å—é”"><a href="#_22-redisæ»‘å—é”" class="header-anchor">#</a> 22.redisæ»‘å—é”</h2> <p>åœºæ™¯ï¼šæ´»åŠ¨åº“å­˜æ‰£å‡</p> <p>é€šè¿‡rediså®ç°äº†æ»‘å—é”ï¼Œåœ¨é«˜å¹¶å‘åœºæ™¯ä¸‹ï¼Œç”¨æˆ·åªæœ‰æ‹¿åˆ°åˆ†å¸ƒå¼æ»‘å—é”ï¼Œæ‰èƒ½å¤Ÿå®Œæˆredisçš„æ´»åŠ¨åº“å­˜æ‰£å‡ã€‚åˆ†å¸ƒå¼é”keyè®¾ç½®ä¸º<strong>æ´»åŠ¨ç¼–å·+åº“å­˜(æ’é˜Ÿé”ï¼Œå½“å‰æ´»åŠ¨åº“å­˜æ•°é‡æ²¡å‡å°‘ï¼Œé‚£ä¹ˆå…¶å®ƒç”¨æˆ·å°±è·å–ä¸åˆ°)</strong>ï¼Œå¯ä»¥ä½¿ç²’åº¦é™ä½ï¼Œå¦‚æœå•ç‹¬åªæ˜¯æ´»åŠ¨ç¼–å·ä½œä¸ºkeyå¯èƒ½å‡ºç°<strong>æœ‰åº“å­˜è€Œä¸èƒ½ç§’æ€</strong>çš„åœºæ™¯ã€‚åˆ†å¸ƒå¼é”åŠ åœ¨<strong>æ´»åŠ¨åº“å­˜å‡ä¸€</strong>æ“ä½œçš„ä¸¤å¤´ï¼Œå‡å°é”çš„åŠ›åº¦ï¼Œæé«˜ç³»ç»Ÿæ€§èƒ½ã€‚</p> <p>é™¤äº†æ»‘å—é”ä¹‹å¤–ï¼Œredisè¿˜å­˜æ”¾äº†ç§’æ€æ´»åŠ¨çš„æŠ¥ååº“å­˜(çƒ­ç‚¹æ•°æ®)ã€‚æ•´ä¸ªæ‰£å‡æµç¨‹å¦‚ä¸‹ï¼š</p> <ul><li>æŸ¥è¯¢æ´»åŠ¨è¯¦æƒ…åï¼ŒæŠŠæ´»åŠ¨åº“å­˜æ•°é‡é€šè¿‡setifabsent(ä¸ç”¨setçš„åŸå› æ˜¯é˜²æ­¢ä»æ•°æ®åº“è¯»çš„è„æ•°æ®æ›´æ–°åˆ°ç¼“å­˜ä¸­)åŠ å…¥ç¼“å­˜ä¸­ï¼ŒåŒæ—¶å¯ä»¥ç»™åº“å­˜æ•°é‡ä¹Ÿå°±æ˜¯çƒ­ç‚¹æ•°æ®æ·»åŠ è¿‡æœŸæ—¶é—´æ¯”å¦‚2hï¼Œé˜²æ­¢è¿‡å¤šçš„çƒ­ç‚¹æ•°æ®å ç”¨rediså†…å­˜ç©ºé—´ã€‚</li> <li>æ‰£å‡æµç¨‹ä¸­ï¼Œé¦–å…ˆä»¥æ´»åŠ¨id+æ´»åŠ¨åº“å­˜æ•°é‡ä¸ºKeyè·å–é”</li> <li>å¦‚æœè·å–æˆåŠŸï¼Œé‚£ä¹ˆå…ˆåˆ¤æ–­åº“å­˜æ˜¯å¦æœ‰å‰©ä½™ï¼Œç„¶åæ‰£å‡redisä¸­æ´»åŠ¨åº“å­˜æ•°é‡</li> <li>é‡Šæ”¾æ»‘å—é”</li> <li>æ‰£å‡å®Œæ•°æ®åå‘é€MQæ¶ˆæ¯æ´»åŠ¨åº“å­˜å‡ä¸€ã€‚æ³¨æ„è¿™é‡Œä¸èƒ½ç”¨æ‰£å‡æ´»åŠ¨è¿”å›çš„ç¼“å­˜ä¸­çš„åº“å­˜æ•°æ®é€šè¿‡èµ‹å€¼æ›´æ–°ï¼Œ<strong>åªèƒ½å¤ŸUPDATE activity SET stock_surplus_count = stock_surplus_count-1</strong>,å› ä¸ºè¿™é‡ŒMQæ‰§è¡Œçš„é¡ºåºåœ¨åˆ†å¸ƒå¼åœºæ™¯ä¸èƒ½ä¿è¯ï¼Œå¯èƒ½ä¼šæŠŠå…ˆæ‰£å‡çš„åº“å­˜åæ¶ˆè´¹æ›´æ–°ã€‚</li></ul> <p><img src="https://jsd.cdn.zzko.cn/gh/blage-coding/picx-images-hosting@master/20230515/1680653192489-2504f3f3-5aef-4ce1-9b43-6d04f58dac9d%5B1%5D.3ql1b514ila0.webp" alt="img"></p> <p>æ­¤å¤–ï¼Œå¦‚æœç³»ç»Ÿå¹¶å‘ä½“é‡è¾ƒå¤§ï¼Œè¿˜éœ€è¦æŠŠ MQ çš„æ•°æ®ä¸è¦ç›´æ¥å¯¹åº“æ›´æ–°ï¼Œä»…ä»…æ›´æ–°ç¼“å­˜ä¸­çš„åº“å­˜æ•°é‡ï¼Œæœ€åå¯ä»¥ä½¿ç”¨å®šæ—¶ä»»åŠ¡<strong>æ‹¿ç¼“å­˜çš„åº“å­˜æ•°é‡</strong>æ¥æ›´æ–°æ•°æ®åº“åº“å­˜ï¼Œç„¶ååˆ é™¤ç¼“å­˜ä¸­çš„åº“å­˜æ•°æ®ã€‚ä»¥æ­¤å‡å°‘å¯¹æ•°æ®åº“è¡¨çš„æ“ä½œã€‚</p> <p>å®é™…ä¸Šrediså¹¶ä¸é€‚åˆå®æ—¶æ€§æ•°æ®ï¼Œåªèƒ½ä¿è¯æœ€ç»ˆä¸€è‡´æ€§ã€‚å› ä¸ºå†™æ•°æ®åº“ååˆ é™¤ç¼“å­˜èƒ½ä¿è¯ä¸€è‡´æ€§ä½†æ˜¯ä¸èƒ½æ»¡è¶³é«˜å¹¶å‘ï¼Œè€Œå¦‚æœä¸åˆ é™¤ç¼“å­˜åˆä¼šå¯¼è‡´è¯»åˆ°è„æ•°æ®ã€‚</p> <h2 id="_23-redisåºåˆ—åŒ–å™¨"><a href="#_23-redisåºåˆ—åŒ–å™¨" class="header-anchor">#</a> 23.redisåºåˆ—åŒ–å™¨</h2> <p>JdkSerializationRedisSerializerï¼šRedisTemplateé»˜è®¤åºåˆ—åŒ–æ–¹å¼ï¼Œå‰ææ˜¯è¢«åºåˆ—åŒ–å¯¹è±¡å¿…é¡»å®ç°Serializableæ¥å£ï¼Œåºåˆ—åŒ–åä¿å­˜çš„æ˜¯å­—èŠ‚åºåˆ—ã€‚(åºåˆ—åŒ–åç»“æœåºå¤§ï¼Œå æ®rediså†…å­˜)</p> <p>StringRedisSerializerï¼šæ˜¯StringRedisTemplateé»˜è®¤çš„åºåˆ—åŒ–æ–¹å¼ï¼Œ<strong>åªèƒ½å¯¹å­—ç¬¦ä¸²è¿›è¡Œåºåˆ—åŒ–</strong>ï¼Œæ— æ³•å¯¹æ™®é€šå¯¹è±¡è¿›è¡Œåºåˆ—åŒ–ï¼Œå› æ­¤éœ€è¦JSON.toJSONStringè¿›è¡Œè½¬åŒ–ã€‚</p> <p>Jackson2JsonRedisSerializerï¼šé€Ÿåº¦å¿«ä¸éœ€è¦å®ç°serializableæ¥å£ï¼Œå°†å¯¹è±¡åºåˆ—åŒ–æˆjsonä¸²è¿›è¡Œå­˜å‚¨ã€‚<strong>åœ¨åºåˆ—åŒ–æ—¶éœ€è¦æä¾›åºåˆ—åŒ–å¯¹è±¡çš„.classç±»å‹ä¿¡æ¯</strong>ã€‚</p> <p>æ³¨æ„ï¼šä½¿ç”¨jacksonæˆ–è€…genericJacksonå­˜åœ¨çš„å‘</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code>redisTemplate<span class="token punctuation">.</span><span class="token function">opsForValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span> <span class="token number">1L</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">Long</span> value <span class="token operator">=</span> redisTemplate<span class="token punctuation">.</span><span class="token function">opsForValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">;</span> 
<span class="token comment">// æ­¤æ—¶è·å¾—çš„å€¼çš„ç±»å‹ä¸ºIntegerç±»å‹, ç›´æ¥è¿›è¡Œå¼ºè½¬ä¼šè¿›è¡ŒæŠ¥é”™</span>
<span class="token comment">// å…¶å®è¿™ä¹Ÿä¸èƒ½è¯´æ˜¯åºåˆ—åŒ–å­˜åœ¨çš„é—®é¢˜ï¼Œè€Œæ˜¯jsonçš„æ•°å­—ç±»å‹ä¸javaçš„æ•°æ®ç±»å‹ä¸èƒ½å…¼å®¹</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>è¿™é‡Œç»™å‡ºä¸€ç§åºåˆ—åŒ–å™¨é…ç½®ï¼š</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Configuration</span>
<span class="token annotation punctuation">@EnableCaching</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">RedisConfig</span> <span class="token keyword">extends</span> <span class="token class-name">CachingConfigurerSupport</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Bean</span>
    <span class="token keyword">public</span> <span class="token class-name">RedisTemplate</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> <span class="token function">redisTemplate</span><span class="token punctuation">(</span><span class="token class-name">RedisConnectionFactory</span> factory<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">RedisTemplate</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> template <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">RedisTemplate</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        template<span class="token punctuation">.</span><span class="token function">setConnectionFactory</span><span class="token punctuation">(</span>factory<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Jackson2JsonRedisSerializer</span> jackson2JsonRedisSerializer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Jackson2JsonRedisSerializer</span><span class="token punctuation">(</span><span class="token class-name">Object</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">ObjectMapper</span> om <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ObjectMapper</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// æŒ‡å®šè¦åºåˆ—åŒ–çš„åŸŸï¼Œfield,getå’Œset,ä»¥åŠä¿®é¥°ç¬¦èŒƒå›´ï¼ŒANYæ˜¯éƒ½æœ‰åŒ…æ‹¬privateå’Œpublic</span>
        om<span class="token punctuation">.</span><span class="token function">setVisibility</span><span class="token punctuation">(</span><span class="token class-name">PropertyAccessor</span><span class="token punctuation">.</span><span class="token constant">ALL</span><span class="token punctuation">,</span> <span class="token class-name">JsonAutoDetect<span class="token punctuation">.</span>Visibility</span><span class="token punctuation">.</span><span class="token constant">ANY</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// æŒ‡å®šåºåˆ—åŒ–è¾“å…¥çš„ç±»å‹ï¼Œç±»å¿…é¡»æ˜¯éfinalä¿®é¥°çš„ï¼Œfinalä¿®é¥°çš„ç±»ï¼Œæ¯”å¦‚String,Integerç­‰ä¼šè·‘å‡ºå¼‚å¸¸</span>
        om<span class="token punctuation">.</span><span class="token function">enableDefaultTyping</span><span class="token punctuation">(</span><span class="token class-name">ObjectMapper<span class="token punctuation">.</span>DefaultTyping</span><span class="token punctuation">.</span><span class="token constant">NON_FINAL</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        jackson2JsonRedisSerializer<span class="token punctuation">.</span><span class="token function">setObjectMapper</span><span class="token punctuation">(</span>om<span class="token punctuation">)</span><span class="token punctuation">;</span>
        
        <span class="token comment">/** è®¾ç½®redisé”®å’Œå€¼çš„åºåˆ—åŒ–å™¨*/</span>
        template<span class="token punctuation">.</span><span class="token function">setKeySerializer</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">StringRedisSerializer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        template<span class="token punctuation">.</span><span class="token function">setValueSerializer</span><span class="token punctuation">(</span>jackson2JsonRedisSerializer<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">/** è®¾ç½®hashçš„åºåˆ—åŒ–å™¨*/</span>
        template<span class="token punctuation">.</span><span class="token function">setHashKeySerializer</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">StringRedisSerializer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        template<span class="token punctuation">.</span><span class="token function">setValueSerializer</span><span class="token punctuation">(</span>jackson2JsonRedisSerializer<span class="token punctuation">)</span><span class="token punctuation">;</span>
        template<span class="token punctuation">.</span><span class="token function">afterPropertiesSet</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> template<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br></div></div><h2 id="_24-æ•´åˆspringbootå’Œxxljob"><a href="#_24-æ•´åˆspringbootå’Œxxljob" class="header-anchor">#</a> 24.æ•´åˆspringbootå’Œxxljob</h2> <p>åˆ›é€ ä¸€ä¸ªxxl-jobç»„ä»¶ï¼Œå®¢æˆ·ç«¯å¯åŠ¨springåè‡ªåŠ¨å°†ä»»åŠ¡æ³¨å†Œåˆ°è°ƒåº¦ä¸­å¿ƒadminä¸­ã€‚</p> <p>æŸ¥çœ‹è°ƒåº¦ä¸­å¿ƒcontrolleræºç åï¼Œå‘ç°æ–°å»ºæ‰§è¡Œå™¨å’Œä»»åŠ¡éƒ½æ˜¯å‘æ•°æ®åº“ä¸­æ·»åŠ XxlJobGroupå’ŒXxlJobInfoè¿™ä¸¤ä¸ªå¯¹è±¡ï¼Œä¹Ÿå°±æ˜¯springå¯åŠ¨æ—¶å¾€æ•°æ®åº“æ’å…¥æ‰§è¡Œå™¨å’Œä»»åŠ¡ä¸¤ç§è®°å½•å³å¯ã€‚å¯ä»¥åœ¨@PostConstructå®ç°ã€‚</p> <p>éš¾ç‚¹åœ¨äºé¡¹ç›®å¯åŠ¨æ—¶è·å–@XxlJobæ³¨è§£é‡Œçš„å†…å®¹ã€‚é¦–å…ˆæ‹¿åˆ°applicationContextå¹¶æ‹¿åˆ°springä¸­æ‰€æœ‰çš„beanï¼Œç„¶åå†é€šè¿‡.class.getAnnotationæ‹¿åˆ°æ³¨è§£ï¼Œä½†æ˜¯æœ€åè¿˜æ˜¯è¦æ‹¿åˆ°æ–¹æ³•ä¸Šçš„æ³¨è§£ã€‚æŸ¥äº†ä¸‹å‘ç°xxljobæ˜¯é€šè¿‡MethodIntrospector.selectMethodså®ç°ã€‚è¿™é‡Œç•™ä¸ªå‘åç»­æŠŠ@XxlJobä¹Ÿä¸€èµ·åˆå¹¶</p> <p>æ³¨æ„ï¼šè·å–è‡ªå®šä¹‰æ³¨è§£é‡Œé¢çš„å€¼ï¼Œé‚£ä¹ˆä¸€å®šè¦èƒ½å¤Ÿæ‰¾åˆ°æ³¨è§£ç±»ï¼Œé€šè¿‡XX.getClass().getAnnotation(MyAnnotation.class)æ‰èƒ½æ‹¿åˆ°æ³¨è§£æ¥å£ï¼Œè¿›è€Œæ‹¿åˆ°æ³¨è§£é‡Œé¢çš„å€¼ã€‚</p> <h2 id="_25-dubboé€šä¿¡å¯¹è±¡åºåˆ—åŒ–"><a href="#_25-dubboé€šä¿¡å¯¹è±¡åºåˆ—åŒ–" class="header-anchor">#</a> 25.Dubboé€šä¿¡å¯¹è±¡åºåˆ—åŒ–</h2> <p>dubboè¿›è¡Œå¾®æœåŠ¡é€šä¿¡æ—¶ï¼ŒåŒæ–¹ä¹‹é—´è¿›è¡Œä¿¡æ¯ä¼ è¾“çš„å¯¹è±¡éƒ½éœ€è¦å®ç°åºåˆ—åŒ–æ¥å£(åŒ…æ‹¬ç±»ä¸‹çš„å­å±æ€§å¯¹è±¡ï¼ŒéjavaåŸºæœ¬ç±»å‹ï¼›ç»§æ‰¿å…³ç³»åªéœ€è¦åºåˆ—åŒ–å­ç±»)ï¼Œè°ƒç”¨æ–¹å‘é€è¯·æ±‚çš„reqå¯¹è±¡ï¼Œä»¥åŠæœåŠ¡æä¾›æ–¹çš„åº”ç­”reså¯¹è±¡ã€‚</p> <h2 id="_26-å¤šæœåŠ¡åŒ…è°ƒç”¨ä¸‹mavenæ‰“åŒ…æŠ€å·§"><a href="#_26-å¤šæœåŠ¡åŒ…è°ƒç”¨ä¸‹mavenæ‰“åŒ…æŠ€å·§" class="header-anchor">#</a> 26.å¤šæœåŠ¡åŒ…è°ƒç”¨ä¸‹Mavenæ‰“åŒ…æŠ€å·§</h2> <ul><li>æ‰“åŒ…é¡ºåºéµå¾ªçˆ¶pomâ€”â€”&gt;è¢«è°ƒç”¨æœåŠ¡çš„jaråŒ…â€”â€”&gt;å­æœåŠ¡jaråŒ…</li> <li>æ‰“åŒ…æ“ä½œä¸€å¾‹cleanâ€”â€”&gt;packageâ€”â€”&gt;install</li> <li>installæ“ä½œè¡¨ç¤ºå°†å½“å‰jaråŒ…åŠ è½½å®‰è£…åˆ°æœ¬åœ°Mavenä»“åº“å½“ä¸­</li> <li>è°ƒç”¨å…¶å®ƒæœåŠ¡çš„ä¾èµ–æ—¶ï¼Œ<strong>éœ€è¦æŒ‡å®šversionç‰ˆæœ¬å·</strong>æˆ–è€…äº¤ç»™çˆ¶pomé€šè¿‡dependencyManagementç®¡ç†ã€‚å› ä¸ºå…·ä½“çš„jaråŒ…éƒ½æ˜¯ä¿å­˜åœ¨ä»“åº“ä¸­groupId+artifactId+versionæ‰€æ‹¼æ¥çš„æ–‡ä»¶ç›®å½•ä¸‹ã€‚</li> <li>å¯ä»¥æŒ‡å®šä»“åº“è®©mavenåœ¨æœ¬åœ°ä»“åº“æ‰¾åŒ…ã€‚</li> <li>æ°¸ä¹…å…³é—­é˜²ç«å¢™systemctl disable firewalld  /firewald.service</li></ul></div></div>  <div class="page-edit"><div class="edit-link"><a href="https://github.com/blage-coding/blog/edit/master/docs/é¡¹ç›®ç¬”è®°/02.æŠ½å¥–/01.æŠ½å¥–é¡¹ç›®.md" target="_blank" rel="noopener noreferrer">ç¼–è¾‘</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <!----> <div class="last-updated"><span class="prefix">ä¸Šæ¬¡æ›´æ–°:</span> <span class="time">2023/12/15, 15:49:57</span></div></div> <div class="page-nav-wapper"><div class="page-nav-centre-wrap"><a href="/pages/798214/" class="page-nav-centre page-nav-centre-prev"><div class="tooltip">éƒ¨ç½²é…ç½®</div></a> <a href="/pages/4bbbbb/" class="page-nav-centre page-nav-centre-next"><div class="tooltip">é¡¹ç›®æ¢³ç†</div></a></div> <div class="page-nav"><p class="inner"><span class="prev">
        â†
        <a href="/pages/798214/" class="prev">éƒ¨ç½²é…ç½®</a></span> <span class="next"><a href="/pages/4bbbbb/">é¡¹ç›®æ¢³ç†</a>â†’
      </span></p></div></div></div> <!----></main></div> <div class="footer"><!----> 
  Theme by
  <a href="https://github.com/xugaoyi/vuepress-theme-vdoing" target="_blank" title="æœ¬ç«™ä¸»é¢˜">Vdoing</a> 
    | Copyright Â© 2023-2024
    <span>blageCoder</span></div> <div class="buttons"><div title="è¿”å›é¡¶éƒ¨" class="button blur go-to-top iconfont icon-fanhuidingbu" style="display:none;"></div> <div title="å»è¯„è®º" class="button blur go-to-comment iconfont icon-pinglun" style="display:none;"></div> <div title="ä¸»é¢˜æ¨¡å¼" class="button blur theme-mode-but iconfont icon-zhuti"><ul class="select-box" style="display:none;"><li class="iconfont icon-zidong">
          è·Ÿéšç³»ç»Ÿ
        </li><li class="iconfont icon-rijianmoshi">
          æµ…è‰²æ¨¡å¼
        </li><li class="iconfont icon-yejianmoshi">
          æ·±è‰²æ¨¡å¼
        </li><li class="iconfont icon-yuedu">
          é˜…è¯»æ¨¡å¼
        </li></ul></div></div> <!----> <!----> <!----></div><div class="global-ui"><div></div></div></div>
    <script src="/assets/js/app.36a8861c.js" defer></script><script src="/assets/js/2.1ba3a2de.js" defer></script><script src="/assets/js/3.6e4df72f.js" defer></script><script src="/assets/js/468.6605b6cc.js" defer></script>
  </body>
</html>
